/*
Copyright (c) 2003-2013, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/(function(){function t(t){return e.instances[t]}function r(t){var n=this;n.id=t.name;var r=t.element.getDocument().getWindow().$,i=e.oC.getWindow().$;n.inPopup=!!r&&!!r.opener;n.inIframe=!n.inPopup&&r!=i.top&&r.frameElement.nodeName.toLowerCase()=="iframe";n.inFrame=!n.inPopup&&r!=i.top&&r.frameElement.nodeName.toLowerCase()=="frame";n.inUrlPopup=!!n.inPopup&&!!i.opener}function i(e,t,n){t.on("appReady",function(r){r.removeListener();e.document=t.document.$;e.folders=t.folders;e.files=t.aG["filesview.filesview"].data().files;e.basketFiles=t.basketFiles;e.resourceTypes=t.resourceTypes;e.connector=t.connector;e.lang=t.lang;e.langCode=t.langCode;e.config=t.config;t.aG["foldertree.foldertree"].on("afterAddFolder",function(t){t.removeListener();n&&n(e)},e)},e,null,999)}var e=function(){var e={jY:"D03E1XW",_:{},status:"unloaded",basePath:function(){var e=window.CKFINDER_BASEPATH||"";if(!e){var t=document.getElementsByTagName("script");for(var n=0;n<t.length;n++){var r=t[n].src.match(/(^|.*[\\\/])CKFINDER(?:_basic)?(?:_v2)?(?:_source)?.js(?:\?.*)?$/i);if(r){e=r[1];break}}}e.indexOf("://")==-1&&(e.indexOf("/")===0?e=location.href.match(/^.*?:\/\/[^\/]*/)[0]+e:e=location.href.match(/^[^\?]*\/(?:)/)[0]+e);return e}(),getUrl:function(e){e.indexOf("://")==-1&&e.indexOf("/")!==0&&(e=this.basePath+e);this.jY&&e.charAt(e.length-1)!="/"&&(e+=(e.indexOf("?")>=0?"&":"?")+"t="+this.jY);return e}},t=window.CKFINDER_GETURL;if(t){var n=e.getUrl;e.getUrl=function(r){return t.call(e,r)||n.call(e,r)}}return e}(),n={callback:1,selectThumbnailActionFunction:1,selectActionFunction:1};e.jd=function(){var e=this,t={};for(var r in e){if(!e.hasOwnProperty(r))continue;if(typeof e[r]=="function"&&!n[r]||typeof e[r]=="undefined")continue;t[r]=e[r]}e.callback&&(t.callback=e.callback);return t};e.lj=function(e){var t=this;e=e||t.basePath;var n="";if(!e||e.length===0)e=CKFinder.DEFAULT_basePath;e.substr(e.length-1,1)!="/"&&(e+="/");e+="ckfinder.html";var r;if(t.hh){r=t.hh;typeof r=="function"&&(r=r.toString().match(/function ([^(]+)/)[1]);n+="?action=js&amp;func="+r}if(t.jx){n+=n?"&amp;":"?";n+="data="+encodeURIComponent(t.jx)}if(t.disableThumbnailSelection){n+=n?"&amp;":"?";n+="dts=1"}else if(t.lH||t.hh){r=t.lH||t.hh;typeof r=="function"&&(r=r.toString().match(/function ([^(]+)/)[1]);n+=n?"&amp;":"?";n+="thumbFunc="+r;t.nm?n+="&amp;tdata="+encodeURIComponent(t.nm):!t.lH&&t.jx&&(n+="&amp;tdata="+encodeURIComponent(t.jx))}if(t.startupPath){n+=n?"&amp;":"?";n+="start="+encodeURIComponent(t.startupPath+(t.startupFolderExpanded?":1":":0"))}if(t.rememberLastFolder!==undefined&&!t.rememberLastFolder){n+=n?"&amp;":"?";n+="rlf=0"}if(t.id){n+=n?"&amp;":"?";n+="id="+encodeURIComponent(t.id)}if(t.skin){n+=n?"&amp;":"?";n+="skin="+encodeURIComponent(t.skin)}return e+n};r.prototype={_:{},addFileContextMenuOption:function(n,r,i){var s=t(this.id),o="FileContextMenu_"+n.command;s.bD(o,{exec:function(e){var t=e.aG["filesview.filesview"].tools.dH();r(e.cg,t)}});n.command=o;n.group||(n.group="file1");s.gp(o,n);s.aG["filesview.filesview"].on("beforeContextMenu",function(n){if(i){var r=i(this.tools.dH());r&&(n.data.bj[o]=r==-1?e.aY:e.aS)}else n.data.bj[o]=e.aS})},disableFileContextMenuOption:function(e,n){var r=t(this.id),i=n?"FileContextMenu_"+e:e,s=function(t){delete t.data.bj[i]};r.aG["filesview.filesview"].on("beforeContextMenu",s);return function(){r.aG["filesview.filesview"].removeListener("beforeContextMenu",s)}},addFolderContextMenuOption:function(n,r,i){var s=t(this.id),o="FolderContextMenu_"+n.command;s.bD(o,{exec:function(e){r(e.cg,e.aV)}});n.command=o;n.group||(n.group="folder1");s.gp(o,n);s.aG["foldertree.foldertree"].on("beforeContextMenu",function(n){if(i){var r=i(this.app.aV);r&&(n.data.bj[o]=r==-1?e.aY:e.aS)}else n.data.bj[o]=e.aS})},disableFolderContextMenuOption:function(e,n){var r=t(this.id),i=n?"FolderContextMenu_"+e:e,s=function(t){delete t.data.bj[i]};r.aG["foldertree.foldertree"].on("beforeContextMenu",s);return function(){r.aG["foldertree.foldertree"].removeListener("beforeContextMenu",s)}},addFolderDropMenuOption:function(n,r,i){var s=t(this.id),o="FolderDropMenu_"+n.command;s.bD(o,{exec:function(e){r(e.cg,e.cK.oa())}});n.command=o;var u=new e.iD(s,o,n);s.aG["foldertree.foldertree"].on("beforeDropMenu",function(t){if(i?i.call(s.cg,t.data.folder):1)t.data.iG[o]=u})},disableFolderDropMenuOption:function(e,n){var r=t(this.id),i=n?"FolderDropMenu_"+e:e,s=function(t){delete t.data.iG[i]};r.aG["foldertree.foldertree"].on("beforeDropMenu",s);return function(){r.aG["foldertree.foldertree"].removeListener("beforeDropMenu",s)}},getSelectedFile:function(){return t(this.id).aG["filesview.filesview"].tools.dH()},getSelectedFiles:function(){return t(this.id).aG["filesview.filesview"].tools.oO()},getSelectedFolder:function(){return t(this.id).aV},setUiColor:function(e){return t(this.id).setUiColor(e)},destroy:function(e){t(this.id).destroy();e&&e()},openDialog:function(n,r){var i=this,s=(new e.dom.document(window.document)).getHead(),o=t(i.id).document.getWindow();if(i.inFrame||i.inPopup||i.inIframe)e.document=t(i.id).document;return t(i.id).openDialog(n,r,s)},openMsgDialog:function(e,n){t(this.id).msgDialog(e,n)},openConfirmDialog:function(e,n,r){t(this.id).fe(e,n,r)},openInputDialog:function(e,n,r,i){t(this.id).hs(e,n,r,i)},openSkippedFilesDialog:function(e,n,r,i){t(this.id).skippedFilesDialog(e,n,r,i)},addTool:function(e){return t(this.id).plugins.tools.addTool(e)},addToolPanel:function(e){return t(this.id).plugins.tools.addToolPanel(e)},removeTool:function(e){t(this.id).plugins.tools.removeTool(e)},showTool:function(e){t(this.id).plugins.tools.showTool(e)},hideTool:function(e){t(this.id).plugins.tools.hideTool(e)},getResourceType:function(e){return t(this.id).getResourceType(e)},log:function(t){e.log.apply(e.log,arguments)},getLog:function(){return e.mZ()},emptyBasket:function(){t(this.id).execCommand("TruncateBasket")},replaceUploadForm:function(n,r,i,s){var o=t(this.id);s||(s=10);if(s>=(o.dC||20))return;o.dC=s;o.aG["formpanel.formpanel"].on("beforeUploadFileForm",function(t){if(t.data.step!=2)return;if(s>o.dC)return;t.cancel(!0);var u=this.data(),a=t.data.folder;try{if(u.dc=="upload")this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(e.aS)});else{this.data().dc&&this.oW("requestUnloadForm");i||this.eh.removeClass("show_border");this.oW("requestLoadForm",{html:n,command:"upload"});r&&r()}}catch(f){this.oW("failedUploadFileForm",t.data);this.oW("afterUploadFileForm",t.data);throw e.ba(f)}});return{hide:function(){o.oW("requestUnloadForm",function(){o.cS("upload").bR(e.aS)})}}},resizeFormPanel:function(e){var n=t(this.id);if(typeof e=="undefined"){n.document.getById("panel_view").setStyle("height","");n.document.getById("panel_widget").setStyle("height","")}else{var r=Math.min(e,Math.max(90,n.document.getById("main_container").$.offsetHeight-300));n.document.getById("panel_view").setStyle("height",r+"px");n.document.getById("panel_widget").setStyle("height",r-3+"px")}n.layout.ea(!0)},refreshOpenedFolder:function(){var e=t(this.id),n=e.aG["filesview.filesview"].tools.currentFolder();e.oW("requestSelectFolder",{folder:n})},selectFile:function(e){var n=t(this.id);n.oW("requestSelectFile",{file:e,scrollTo:1})},closePopup:function(){if(!this.inPopup)return;t(this.id).element.getDocument().getWindow().$.close()},openFolder:function(e,n){var r=t(this.id);n=n.replace(/\/$/,"");e=e.toLowerCase();for(var i=0;i<r.folders.length;i++){var s=r.folders[i];if(s.getPath().replace(/\/$/,"")==n&&e==s.type.toLowerCase()){r.oW("requestSelectFolder",{folder:s});r.oW("requestShowFolderFiles",{folder:s});return}}},setUiColor:function(e){t(this.id).setUiColor(e)},execCommand:function(e){t(this.id).execCommand(e)}};(function(){function t(e){var t=1;while(CKFinder._.instanceConfig[t])t++;CKFinder._.instanceConfig[t]=e;return t}window.CKFinder=function(e,t){if(e)for(var n in e){if(!e.hasOwnProperty(n))continue;if(typeof e[n]=="function"&&n!="callback")continue;this[n]=e[n]}this.callback=t};CKFinder.prototype={create:function(t){var n="ckf"+Math.random().toString().substr(2,9);document.write('<span id="'+n+'"></span>');t=e.tools.extend(e.jd.call(this),t,!0);var r=e.replace(n,t,CKFinder);this.api=r.cg;return r.cg},appendTo:function(t,n){n=e.tools.extend(e.jd.call(this),n,!0);var r=e.appendTo(t,n,CKFinder);this.api=r.cg;return r.cg},replace:function(t,n){n=e.tools.extend(e.jd.call(this),n,!0);var r=e.replace(t,n,CKFinder);this.api=r.cg;return r.cg},popup:function(t,n){var r=this;t=t||"80%";n=n||"70%";typeof t=="string"&&t.length>1&&t.substr(t.length-1,1)=="%"&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10));typeof n=="string"&&n.length>1&&n.substr(n.length-1,1)=="%"&&(n=parseInt(window.screen.height*parseInt(n,10)/100,10));t<200&&(t=200);n<200&&(n=200);var i=parseInt((window.screen.height-n)/2,10),s=parseInt((window.screen.width-t)/2,10),o="location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,width="+t+",height="+n+",top="+i+",left="+s,u=e.env.webkit?"about:blank":"",a=window.open(u,"CKFinderpopup",o,!0);if(!a)return!1;r.width=r.height="100%";var f='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><title>CKFinder 2</title><style type="text/css">body, html, iframe, #ckfinder { margin: 0; padding: 0; border: 0; width: 100%; height: 100%; overflow: hidden; }</style></head><body></body></html>',l=new e.dom.document(a.document);l.$.open();e.env.isCustomDomain()&&(l.$.domain=window.document.domain);l.$.write(f);l.$.close();try{var c=navigator.userAgent.toLowerCase();if(c.indexOf(" chrome/")==-1){a.moveTo(s,i);a.resizeTo(t,n)}a.focus();return r.appendTo(l.bH())}catch(h){return r.appendTo(l.bH())}return!1}};CKFinder._={};CKFinder._.instanceConfig=[];CKFinder.lang={};CKFinder.version="2.3.1";CKFinder.revision="2516";CKFinder.addPlugin=function(t,n,r){var i={bM:r||[]};typeof n=="function"&&(n={appReady:n});for(var s in n){if(!n.hasOwnProperty(s))continue;s!="connectorInitialized"&&s!="uiReady"&&(i[s]=n[s])}i.bz=function(e){if(e.config.readOnly&&i.readOnly===!1)return null;n.connectorInitialized&&e.on("connectorInitialized",function(t){var r=n.connectorInitialized;r&&r.call(r,e.cg,t.data.xml)},null,null,1e3);n.connectorResponse&&e.on("connectorResponse",function(t){var r=n.connectorResponse;r&&r.call(r,e.cg,t.data.xml)});n.galleryCallback&&e.on("launchGallery",function(t){var r=n.galleryCallback;r&&(t.data.bx=r.call(r,e.cg,t.data.selected,t.data.files))});n.uiReady&&e.on("uiReady",function(){var t=n.uiReady;t.call(t,e.cg)},null,null,1e3);n.appReady&&e.on("appReady",function(){var t=n.appReady;t.call(t,e.cg)},null,null,1e3)};e.plugins.add(t,i)};CKFinder.getPluginPath=function(t){return e.plugins.getPath(t)};CKFinder.addExternalPlugin=function(t,n,r){e.plugins.tR(t,n,r)};CKFinder.setPluginLang=function(t,n,r){e.plugins.rX(t,n,r)};CKFinder.dialog={add:function(t,n){typeof n=="function"&&(n=e.tools.override(n,function(e){return function(t){return e(t.cg)}}));e.dialog.add(t,n)}};CKFinder.tools={};CKFinder.env={};CKFinder.dom={};CKFinder.create=function(e,t,n,r,i){var s;if(e!==null&&typeof e=="object"){s=new CKFinder;for(var o in e)s[o]=e[o]}else{s=new CKFinder;s.basePath=e;t&&(s.width=t);n&&(s.height=t);r&&(s.selectActionFunction=r);i&&(s.callback=i)}return s.create()};CKFinder.popup=function(e,t,n,r,i){var s;if(e!==null&&typeof e=="object"){s=new CKFinder;for(var o in e)s[o]=e[o]}else{s=new CKFinder;s.basePath=e;r&&(s.selectActionFunction=r);i&&(s.callback=i)}return s.popup(t,n)};CKFinder.setupFCKeditor=function(n,r,i,s){var o,u;if(r!==null&&typeof r=="object"){u=t(r);o=new CKFinder;for(var a in r){o[a]=r[a];if(a=="width"){var f=o[a]||800;typeof f=="string"&&f.length>1&&f.substr(f.length-1,1)=="%"&&(f=parseInt(window.screen.width*parseInt(f,10)/100,10));n.Config.LinkBrowserWindowWidth=f;n.Config.ImageBrowserWindowWidth=f;n.Config.FlashBrowserWindowWidth=f}else if(a=="height"){var l=o[a]||600;typeof l=="string"&&l.length>1&&l.substr(l.length-1,1)=="%"&&(l=parseInt(window.screen.height*parseInt(l,10)/100,10));n.Config.LinkBrowserWindowHeight=l;n.Config.ImageBrowserWindowHeight=l;n.Config.FlashBrowserWindowHeight=l}}}else{o=new CKFinder;o.basePath=r}var c=o.basePath;c.substr(0,1)!="/"&&c.indexOf("://")==-1&&(c=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+c);c=e.lj.call(o,c);var h=c.indexOf("?")!==-1?"&":"?";if(u){c+=h+"configId="+u;h="&"}n.Config.LinkBrowserURL=c;n.Config.ImageBrowserURL=c+h+"type="+(i||"Images");n.Config.FlashBrowserURL=c+h+"type="+(s||"Flash");var p=c.substring(0,1+c.lastIndexOf("/"));n.Config.LinkUploadURL=p+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files";n.Config.ImageUploadURL=p+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(i||"Images");n.Config.FlashUploadURL=p+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(s||"Flash")};CKFinder.setupCKEditor=function(n,r,i,s){if(n===null){for(var o in CKEDITOR.instances)CKFinder.setupCKEditor(CKEDITOR.instances[o],r,i,s);CKEDITOR.on("instanceCreated",function(e){CKFinder.setupCKEditor(e.editor,r,i,s)});return}var u,a;if(r!==null&&typeof r=="object"){a=t(r);u=new CKFinder;for(var f in r){u[f]=r[f];if(f=="width"){var l=u[f]||800;typeof l=="string"&&l.length>1&&l.substr(l.length-1,1)=="%"&&(l=parseInt(window.screen.width*parseInt(l,10)/100,10));n.config.filebrowserWindowWidth=l}else if(f=="height"){var c=u[f]||600;typeof c=="string"&&c.length>1&&c.substr(c.length-1,1)=="%"&&(c=parseInt(window.screen.height*parseInt(c,10)/100,10));n.config.filebrowserWindowHeight=c}}}else{u=new CKFinder;u.basePath=r}var h=u.basePath;h.substr(0,1)!="/"&&h.indexOf("://")==-1&&(h=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+h);h=e.lj.call(u,h);var p=h.indexOf("?")!==-1?"&":"?";if(a){h+=p+"configId="+a;p="&"}n.config.filebrowserBrowseUrl=h;n.config.filebrowserImageBrowseUrl=h+p+"type="+(i||"Images");n.config.filebrowserFlashBrowseUrl=h+p+"type="+(s||"Flash");var d=h.substring(0,1+h.lastIndexOf("/"));n.config.filebrowserUploadUrl=d+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files";n.config.filebrowserImageUploadUrl=d+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(i||"Images");n.config.filebrowserFlashUploadUrl=d+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(s||"Flash")}})();if(!e.event){e.event=function(){};e.event.du=function(t,n){var r=e.event.prototype;for(var i in r)t[i]==undefined&&(t[i]=r[i])};e.event.prototype=function(){var t=function(e){var t=e.kk&&e.kk()||e._||(e._={});return t.cC||(t.cC={})},n=function(e){this.name=e;this.dF=[]};n.prototype={mi:function(e){for(var t=0,n=this.dF;t<n.length;t++)if(n[t].fn==e)return t;return-1}};return{on:function(e,r,i,s,o){var u=t(this),a=u[e]||(u[e]=new n(e));if(a.mi(r)<0){var f=a.dF;i||(i=this);isNaN(o)&&(o=10);var l=this,c=function(t,n,o,u){var a={name:e,jN:this,application:t,data:n,jO:s,stop:o,cancel:u,removeListener:function(){l.removeListener(e,r)}};r.call(i,a);return a.data};c.fn=r;c.nT=o;for(var h=f.length-1;h>=0;h--)if(f[h].nT<=o){f.splice(h+1,0,c);return}f.unshift(c)}},oW:function(){var n=!1,r=function(){n=!0},i=!1,s=function(e){i=e?2:!0};return function(u,a,f,l){if(typeof a=="function"){l=a;a=null}else if(typeof f=="function"){l=f;f=null}u!="mousemove"&&e.log("[EVENT] "+u,a,l);var c=t(this)[u],h=n,p=i;n=i=!1;if(c){var d=c.dF;if(d.length){d=d.slice(0);for(var v=0;v<d.length;v++){var m=d[v].call(this,f,a,r,s);typeof m!="undefined"&&(a=m);if(n||i&&i!=2)break}}}var g=i||(typeof a=="undefined"?!1:!a||typeof a.result=="undefined"?a:a.result);typeof l=="function"&&i!=2&&(g=l.call(this,i,a)||g);n=h;i=p;return g}}(),cr:function(e,n,r){var i=this.oW(e,n,r);delete t(this)[e];return i},removeListener:function(e,n){var r=t(this)[e];if(r){var i=r.mi(n);i>=0&&r.dF.splice(i,1)}},mF:function(){var e=t(this);for(var n=0;n<e.length;n++)e[n].dF=[]},rC:function(e){var n=t(this)[e];return n&&n.dF.length>0}}}()}if(!e.application){e.kZ=0;e.fc=1;e.qE=2;e.application=function(t,n,r,i){var s=this;s._={instanceConfig:t,element:n};s.ff=r||e.kZ;e.event.call(s);s.iI(i)};e.application.replace=function(t,n,r){var i=t;if(typeof i!="object"){i=document.getElementById(t);if(!i){var s=0,o=document.getElementsByName(t);while((i=o[s++])&&i.tagName.toLowerCase()!="textarea");}if(!i)throw'[CKFINDER.application.replace] The element with id or name "'+t+'" was not found.'}return new e.application(n,i,e.fc,r)};e.application.appendTo=function(t,n,r){if(typeof t!="object"){t=document.getElementById(t);if(!t)throw'[CKFINDER.application.appendTo] The element with id "'+t+'" was not found.'}return new e.application(n,t,e.qE,r)};e.application.prototype={iI:function(){var t=e.application.eb||(e.application.eb=[]);t.push(this)},oW:function(t,n,r){return e.event.prototype.oW.call(this,t,n,this,r)},cr:function(t,n,r){return e.event.prototype.cr.call(this,t,n,this,r)}};e.event.du(e.application.prototype,!0)}if(!e.env){e.env=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,n={ie:!1,opera:!!t&&t.version,webkit:e.indexOf(" applewebkit/")>-1,air:e.indexOf(" adobeair/")>-1,mac:e.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat",isCustomDomain:function(){return this.ie&&document.domain!=window.location.hostname}};n.gecko=navigator.product=="Gecko"&&!n.webkit&&!n.opera;n.chrome=!1;n.safari=!1;n.webkit&&(e.indexOf(" chrome/")>-1?n.chrome=!0:n.safari=!0);var r=0;if(n.ie){r=parseFloat(e.match(/msie (\d+)/)[1]);n.ie8=!!document.documentMode;n.ie8Compat=document.documentMode==8;n.ie7Compat=r==7&&!document.documentMode||document.documentMode==7;n.ie6Compat=r<7||n.quirks}if(n.gecko){var i=e.match(/rv:([\d\.]+)/);if(i){i=i[1].split(".");r=i[0]*1e4+(i[1]||0)*100+ +(i[2]||0)}n.isMobile=e.indexOf("fennec")>-1}if(n.opera){r=parseFloat(t.version());n.isMobile=e.indexOf("opera mobi")>-1}n.air&&(r=parseFloat(e.match(/ adobeair\/(\d+)/)[1]));if(n.webkit){r=parseFloat(e.match(/ applewebkit\/(\d+)/)[1]);n.isMobile=e.indexOf("mobile")>-1}n.version=r;n.isCompatible=n.ie&&r>=6||n.gecko&&r>=10801||n.opera&&r>=9.5||n.air&&r>=1||n.webkit&&r>=522||!1;n.cssClass="browser_"+(n.ie?"ie":n.gecko?"gecko":n.opera?"opera":n.air?"air":n.webkit?"webkit":"unknown");n.quirks&&(n.cssClass+=" browser_quirks");if(n.ie){n.cssClass+=" browser_ie"+(n.version<7?"6":n.version>=8?"8":"7");n.quirks&&(n.cssClass+=" browser_iequirks");n.ie7Compat&&(n.cssClass+=" browser_ie7Compat")}n.gecko&&r<10900&&(n.cssClass+=" browser_gecko18");return n}();CKFinder.env=e.env}var s=e.env,o=s.ie;e.status=="unloaded"&&function(){e.event.du(e);e.dO=function(){if(e.status!="basic_ready"){e.dO.qr=!0;return}delete e.dO;var t=document.createElement("script");t.type="text/javascript";t.src=e.basePath+"ckfinder.js";document.getElementsByTagName("head")[0].appendChild(t)};e.mS=0;e.uQ="ckfinder";e.uM=!0;var t=function(t,n,r,i){if(s.isCompatible){e.dO&&e.dO();var o=r(t,n,i);e.add(o);return o}return null};e.replace=function(n,r,i){return t(n,r,e.application.replace,i)};e.appendTo=function(n,r,i){return t(n,r,e.application.appendTo,i)};e.add=function(e){var t=this._.io||(this._.io=[]);t.push(e)};e.uL=function(){var e=document.getElementsByTagName("textarea");for(var t=0;t<e.length;t++){var n=null,r=e[t],i=r.name;if(!r.name&&!r.id)continue;if(typeof arguments[0]=="string"){var s=new RegExp("(?:^| )"+arguments[0]+"(?:$| )");if(!s.test(r.className))continue}else if(typeof arguments[0]=="function"){n={};if(arguments[0](r,n)===!1)continue}this.replace(r,n)}};(function(){var t=function(){var t=e.dO,n=e.mS;e.status="basic_ready";t&&t.qr?t():n&&setTimeout(function(){e.dO&&e.dO()},n*1e3)};window.addEventListener?window.addEventListener("load",t,!1):window.attachEvent&&window.attachEvent("onload",t)})();e.status="basic_loaded"}();e.dom={};CKFinder.dom=e.dom;var u=e.dom;e.ajax=function(){var t=function(){if(!o||location.protocol!="file:")try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}return null},n=function(e){return e.readyState==4&&(e.status>=200&&e.status<300||e.status==304||e.status===0||e.status==1223)},r=function(e){return n(e)?e.responseText:null},i=function(t){if(n(t)){var r=t.responseXML,i=new e.xml(r&&r.firstChild&&r.documentElement&&r.documentElement.nodeName!="parsererror"?r:t.responseText.replace(/^[^<]+/,"").replace(/[^>]+$/,""));if(i&&i.mq&&i.mq.documentElement&&i.mq.documentElement.nodeName!="parsererror"&&i.mq.documentElement.nodeName!="html"&&i.mq.documentElement.nodeName!="br")return i}var s=e.nG||e.jt,o=t.responseText,u=s.lang.ErrorMsg[o?"XmlError":"XmlEmpty"]+"<br>";i&&i.mq&&(i.mq.parseError&&i.mq.parseError.reason?u+=i.mq.parseError.reason:i.mq.documentElement&&i.mq.documentElement.nodeName=="parsererror"&&(u+=i.mq.documentElement.textContent));if(!o)s.msgDialog(s.lang.SysErrorDlgTitle,u);else{if(/text\/plain/.test(t.getResponseHeader("Content-Type"))||/<Connector\s*/.test(o)){o=e.tools.htmlEncode(o);o=o.replace(/\n/g,"<br>");o='<div style="width:600px; overflow:scroll"><font>'+o+"</font></div>"}s.msgDialog(s.lang.SysErrorDlgTitle,u+"<br>"+s.lang.ErrorMsg.XmlRawResponse.replace("%s","<br><br>"+o))}return{}},s=function(n,r,i,s){var o=!!r;e.log("[AJAX] "+(s?"POST":"GET")+" "+n);var u=t();if(!u)return null;s?u.open("POST",n,o):u.open("GET",n,o);o&&(u.onreadystatechange=function(){if(u.readyState==4){r(i(u));u=null}});if(s){u.setRequestHeader("Content-type","application/x-www-form-urlencoded");u.send(s)}else u.send(null);return o?"":i(u)};return{load:function(e,t,n){return s(e,t,r,n)},loadXml:function(e,t,n){return s(e,t,i,n)}}}();CKFinder.ajax=e.ajax;(function(){var t=[];e.tools={arrayCompare:function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0},clone:function(e){var t;if(e&&e instanceof Array){t=[];for(var n=0;n<e.length;n++)t[n]=this.clone(e[n]);return t}if(e===null||typeof e!="object"||e instanceof String||e instanceof Number||e instanceof Boolean||e instanceof Date)return e;t=new e.constructor;for(var r in e){var i=e[r];t[r]=this.clone(i)}return t},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},extend:function(e){var t=arguments.length,n,r;if(typeof (n=arguments[t-1])=="boolean")t--;else if(typeof (n=arguments[t-2])=="boolean"){r=arguments[t-1];t-=2}for(var i=1;i<t;i++){var s=arguments[i];for(var o in s)if(n===!0||e[o]==undefined)if(!r||o in r)e[o]=s[o]}return e},prototypedCopy:function(e){var t=function(){};t.prototype=e;return new t},isArray:function(e){return!!e&&e instanceof Array},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t=typeof e.cssFloat!="undefined"?"cssFloat":typeof e.styleFloat!="undefined"?"styleFloat":"float";return function(e){return e=="float"?t:e.replace(/-./g,function(e){return e.substr(1).toUpperCase()})}}(),htmlEncode:function(e){var t=function(e){var t=new u.element("span");t.setText(e);return t.getHtml()},n=t("\n").toLowerCase()=="<br>"?function(e){return t(e).replace(/<br>/gi,"\n")}:t,r=t(">")==">"?function(e){return n(e).replace(/>/g,"&gt;")}:n,i=t("  ")=="&nbsp; "?function(e){return r(e).replace(/&nbsp;/g," ")}:r;this.htmlEncode=i;return this.htmlEncode(e)},getNextNumber:function(){var e=0;return function(){return++e}}(),override:function(e,t){return t(e)},setTimeout:function(e,t,n,r,i){i||(i=window);n||(n=i);return i.setTimeout(function(){r?e.apply(n,[].concat(r)):e.apply(n)},t||0)},trim:function(){var e=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t?t.replace(e,""):null}}(),ltrim:function(){var e=/^[ \t\n\r]+/g;return function(t){return t?t.replace(e,""):null}}(),rtrim:function(){var e=/[ \t\n\r]+$/g;return function(t){return t?t.replace(e,""):null}}(),indexOf:Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},bind:function(e,t){return function(){return e.apply(t,arguments)}},createClass:function(t){var n=t.$,r=t.base,i=t.vd||t._,s=t.ej,o=t.statics;if(i){var u=n;n=function(){var t=this,n=t._||(t._={});for(var r in i){var s=i[r];n[r]=typeof s=="function"?e.tools.bind(s,t):s}u.apply(t,arguments)}}if(r){n.prototype=this.prototypedCopy(r.prototype);n.prototype.constructor=n;n.prototype.base=function(){this.base=r.prototype.base;r.apply(this,arguments);this.base=arguments.callee}}s&&this.extend(n.prototype,s,!0);o&&this.extend(n,o,!0);return n},addFunction:function(e,n){return t.push(function(){e.apply(n||this,arguments)})-1},removeFunction:function(e){t[e]=null},callFunction:function(e){var n=t[e];return n.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var e=/^\d+(?:\.\d+)?$/;return function(t){return t+(e.test(t)?"px":"")}}(),repeat:function(e,t){return(new Array(t+1)).join(e)},deepCopy:function(t){var n={};if(typeof t=="object"){typeof t.length!="undefined"&&(n=[]);for(var r in t)t[r]===null?n[r]=null:typeof t[r]=="object"?n[r]=e.tools.deepCopy(t[r]):n[r]=t[r]}return n},getUrlParam:function(e,t){var n=new RegExp("(?:[?&]|&amp;)"+e+"=([^&]+)","i"),r=(t||window).location.search.match(n);return r&&r.length>1?r[1]:null},htmlEncode:function(e){if(!e)return"";e=typeof e!="string"?e.toString():e;e=e.replace(/&/g,"&amp;");e=e.replace(/</g,"&lt;");e=e.replace(/>/g,"&gt;");return e},setCookie:function(e,t,n){document.cookie=e+"="+t+(n?"":"; expires=Thu, 6 Oct 2016 01:00:00 UTC; path=/")},getCookie:function(e){var t=document.cookie.match(new RegExp("(^|\\s|;)"+e+"=([^;]*)"));return t&&t.length>0?t[2]:""},mH:function(e){if(o){e.$.onfocusin=function(){e.addClass("focus_inside")};e.$.onfocusout=function(){e.removeClass("focus_inside")}}else{e.$.addEventListener("focus",function(){e.addClass("focus_inside")},!0);e.$.addEventListener("blur",function(){e.removeClass("focus_inside")},!0)}},formatSize:function(e,t,n){if(e==0)return"0";if(e<1)return t.Kb.replace("%1",1);if(e<1024){n||(e=e.toFixed(2));return t.Kb.replace("%1",e)}return e<1048576?t.Mb.replace("%1",(e/1024).toFixed(2)):t.Gb.replace("%1",(e/1048576).toFixed(2))},formatSpeed:function(e,t){return t.SizePerSecond.replace("%1",this.formatSize(e,t))}};CKFinder._.callFunction=e.tools.callFunction;CKFinder.tools=e.tools})();var a=e.tools;u.event=function(e){this.$=e};u.event.prototype={oV:function(){return this.$.keyCode||this.$.which||0},db:function(){var t=this,n=t.oV();if(t.$.ctrlKey||t.$.metaKey)n+=e.bP;t.$.shiftKey&&(n+=e.dy);t.$.altKey&&(n+=e.eJ);return n},preventDefault:function(e){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1;e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},bK:function(){var e=this.$.target||this.$.srcElement;return e?new u.bi(e):null},getButton:function(){if(this.$.which)return this.$.which;switch(this.$.button){case 1:return 1;case 4:return 2;case 2:return 3}},ov:function(){return 1==this.getButton()}};e.bP=1e3;e.dy=2e3;e.eJ=4e3;u.dE=function(e){e&&(this.$=e)};u.dE.prototype=function(){var t=function(t,n){return function(r){typeof e!="undefined"&&t.oW(n,new u.event(r))}};return{kk:function(){var e;(e=this.dw("_"))||this.fL("_",e={});return e},on:function(n){var r=this,i=r.dw("_cke_nativeListeners");if(!i){i={};r.fL("_cke_nativeListeners",i)}if(!i[n]){var s=i[n]=t(r,n);r.$.addEventListener?r.$.addEventListener(n,s,!!e.event.jP):r.$.attachEvent&&r.$.attachEvent("on"+n,s)}return e.event.prototype.on.apply(r,arguments)},removeListener:function(t){var n=this;e.event.prototype.removeListener.apply(n,arguments);if(!n.rC(t)){var r=n.dw("_cke_nativeListeners"),i=r&&r[t];if(i){n.$.removeEventListener?n.$.removeEventListener(t,i,!1):n.$.detachEvent&&n.$.detachEvent("on"+t,i);delete r[t]}}}}}();(function(t){var n={};t.equals=function(e){return e&&e.$===this.$};t.fL=function(e,t){var r=this.iY(),i=n[r]||(n[r]={});i[e]=t;return this};t.dw=function(e){var t=this.$._ckf_expando,r=t&&n[t];return r&&r[e]};t.jF=function(e){var t=this.$._ckf_expando,r=t&&n[t],i=r&&r[e];typeof i!="undefined"&&delete r[e];return i||null};t.iY=function(){return this.$._ckf_expando||(this.$._ckf_expando=a.getNextNumber())};e.event.du(t)})(u.dE.prototype);u.window=function(e){u.dE.call(this,e)};u.window.prototype=new u.dE;a.extend(u.window.prototype,{focus:function(){s.webkit&&this.$.parent&&this.$.parent.focus();this.$.focus()},eR:function(){var e=this.$.document,t=e.compatMode=="CSS1Compat";return{width:(t?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(t?e.documentElement.clientHeight:e.body.clientHeight)||0}},hV:function(){var e=this.$;if("pageXOffset"in e)return{x:e.pageXOffset||0,y:e.pageYOffset||0};var t=e.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}}});u.document=function(e){u.dE.call(this,e)};var f=u.document;f.prototype=new u.dE;a.extend(f.prototype,{appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var t=new u.element("link");t.setAttributes({rel:"stylesheet",type:"text/css",href:e});this.getHead().append(t)}},createElement:function(e,t){var n=new u.element(e,this);if(t){t.attributes&&n.setAttributes(t.attributes);t.gS&&n.setStyles(t.gS)}return n},jT:function(e){return new u.text(e,this)},focus:function(){this.getWindow().focus()},getById:function(e){var t=this.$.getElementById(e);return t?new u.element(t):null},vu:function(e,t){var n=this.$.documentElement;for(var r=0;n&&r<e.length;r++){var i=e[r];if(!t){n=n.childNodes[i];continue}var s=-1;for(var o=0;o<n.childNodes.length;o++){var a=n.childNodes[o];if(t===!0&&a.nodeType==3&&a.previousSibling&&a.previousSibling.nodeType==3)continue;s++;if(s==i){n=a;break}}}return n?new u.bi(n):null},eG:function(e,t){!o&&t&&(e=t+":"+e);return new u.iT(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];e=new u.element(e);return(this.getHead=function(){return e})()},bH:function(){var e=new u.element(this.$.body);return(this.bH=function(){return e})()},gT:function(){var e=new u.element(this.$.documentElement);return(this.gT=function(){return e})()},getWindow:function(){var e=new u.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return e})()}});u.bi=function(t){if(t){switch(t.nodeType){case e.cv:return new u.element(t);case e.fl:return new u.text(t)}u.dE.call(this,t)}return this};u.bi.prototype=new u.dE;e.cv=1;e.fl=3;e.va=8;e.om=11;e.oh=0;e.op=1;e.gW=2;e.gX=4;e.mo=8;e.lF=16;a.extend(u.bi.prototype,{appendTo:function(e,t){e.append(this,t);return e},clone:function(t,n){var r=this.$.cloneNode(t);if(!n){var i=function(t){if(t.nodeType!=e.cv)return;t.removeAttribute("id",!1);t.removeAttribute("_ckf_expando",!1);var n=t.childNodes;for(var r=0;r<n.length;r++)i(n[r])};i(r)}return new u.bi(r)},gE:function(){return!!this.$.previousSibling},ge:function(){return!!this.$.nextSibling},kB:function(e){e.$.parentNode.insertBefore(this.$,e.$.nextSibling);return e},insertBefore:function(e){e.$.parentNode.insertBefore(this.$,e.$);return e},vP:function(e){this.$.parentNode.insertBefore(e.$,this.$);return e},lU:function(e){var t=[],n=this.getDocument().$.documentElement,r=this.$;while(r&&r!=n){var i=r.parentNode,s=-1;for(var o=0;o<i.childNodes.length;o++){var u=i.childNodes[o];if(e&&u.nodeType==3&&u.previousSibling&&u.previousSibling.nodeType==3)continue;s++;if(u==r)break}t.unshift(s);r=r.parentNode}return t},getDocument:function(){var e=new f(this.$.ownerDocument||this.$.parentNode.ownerDocument);return(this.getDocument=function(){return e})()},vA:function(){var e=this.$,t=e.parentNode&&e.parentNode.firstChild,n=-1;while(t){n++;if(t==e)return n;t=t.nextSibling}return-1},hL:function(t,n,r){if(r&&!r.call){var i=r;r=function(e){return!e.equals(i)}}var s=!t&&this.getFirst&&this.getFirst(),o;if(!s){if(this.type==e.cv&&r&&r(this,!0)===!1)return null;s=this.dG()}while(!s&&(o=(o||this).getParent())){if(r&&r(o,!0)===!1)return null;s=o.dG()}return s?r&&r(s)===!1?null:n&&n!=s.type?s.hL(!1,n,r):s:null},hZ:function(t,n,r){if(r&&!r.call){var i=r;r=function(e){return!e.equals(i)}}var s=!t&&this.dB&&this.dB(),o;if(!s){if(this.type==e.cv&&r&&r(this,!0)===!1)return null;s=
this.cf()}while(!s&&(o=(o||this).getParent())){if(r&&r(o,!0)===!1)return null;s=o.cf()}return s?r&&r(s)===!1?null:n&&s.type!=n?s.hZ(!1,n,r):s:null},cf:function(e){var t=this.$,n;do{t=t.previousSibling;n=t&&new u.bi(t)}while(n&&e&&!e(n));return n},vs:function(){return this.cf(function(e){return e.$.nodeType==1})},dG:function(e){var t=this.$,n;do{t=t.nextSibling;n=t&&new u.bi(t)}while(n&&e&&!e(n));return n},vk:function(){return this.dG(function(e){return e.$.nodeType==1})},getParent:function(){var e=this.$.parentNode;return e&&e.nodeType==1?new u.bi(e):null},vn:function(e){var t=this,n=[];do n[e?"push":"unshift"](t);while(t=t.getParent());return n},vv:function(e){var t=this;if(e.equals(t))return t;if(e.contains&&e.contains(t))return e;var n=t.contains?t:t.getParent();do if(n.contains(e))return n;while(n=n.getParent());return null},gz:function(t){var n=this.$,r=t.$;if(n.compareDocumentPosition)return n.compareDocumentPosition(r);if(n==r)return e.oh;if(this.type==e.cv&&t.type==e.cv){if(n.contains){if(n.contains(r))return e.lF+e.gX;if(r.contains(n))return e.mo+e.gW}if("sourceIndex"in n)return n.sourceIndex<0||r.sourceIndex<0?e.op:n.sourceIndex<r.sourceIndex?e.gX:e.gW}var i=this.lU(),s=t.lU(),o=Math.min(i.length,s.length);for(var u=0;u<=o-1;u++)if(i[u]!=s[u]){if(u<o)return i[u]<s[u]?e.gX:e.gW;break}return i.length<s.length?e.lF+e.gX:e.mo+e.gW},vw:function(e,t){var n=this.$;t||(n=n.parentNode);while(n){if(n.nodeName&&n.nodeName.toLowerCase()==e)return new u.bi(n);n=n.parentNode}return null},vX:function(e,t){var n=this.$;t||(n=n.parentNode);while(n){if(n.nodeName&&n.nodeName.toLowerCase()==e)return!0;n=n.parentNode}return!1},move:function(e,t){e.append(this.remove(),t)},remove:function(e){var t=this.$,n=t.parentNode;if(n){if(e)for(var r;r=t.firstChild;)n.insertBefore(t.removeChild(r),t);n.removeChild(t)}return this},replace:function(e){this.insertBefore(e);e.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){var t=this,n;while(t.getFirst&&(n=t.getFirst())){if(n.type==e.fl){var r=a.ltrim(n.getText()),i=n.hJ();if(!r){n.remove();continue}if(r.length<i){n.split(i-r.length);t.$.removeChild(t.$.firstChild)}}break}},rtrim:function(){var t=this,n;while(t.dB&&(n=t.dB())){if(n.type==e.fl){var r=a.rtrim(n.getText()),i=n.hJ();if(!r){n.remove();continue}if(r.length<i){n.split(r.length);t.$.lastChild.parentNode.removeChild(t.$.lastChild)}}break}if(!o&&!s.opera){n=t.$.lastChild;n&&n.type==1&&n.nodeName.toLowerCase()=="br"&&n.parentNode.removeChild(n)}}});u.iT=function(e){this.$=e};u.iT.prototype={count:function(){return this.$.length},getItem:function(e){var t=this.$[e];return t?new u.bi(t):null}};u.element=function(e,t){typeof e=="string"&&(e=(t?t.$:document).createElement(e));u.dE.call(this,e)};var l=u.element;l.eB=function(e){return e&&(e.$?e:new l(e))};l.prototype=new u.bi;l.kE=function(e,t){var n=new l("div",t);n.setHtml(e);return n.getFirst().remove()};l.rS=function(e,t,n,r){var i=t.dw("list_marker_id")||t.fL("list_marker_id",a.getNextNumber()).dw("list_marker_id"),s=t.dw("list_marker_names")||t.fL("list_marker_names",{}).dw("list_marker_names");e[i]=t;s[n]=1;return t.fL(n,r)};l.sM=function(e){for(var t in e)l.qZ(e,e[t],!0)};l.qZ=function(e,t,n){var r=t.dw("list_marker_names"),i=t.dw("list_marker_id");for(var s in r)t.jF(s);t.jF("list_marker_names");if(n){t.jF("list_marker_id");delete e[i]}};a.extend(l.prototype,{type:e.cv,addClass:function(e){var t=this.$.className;if(t){var n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","");n.test(t)||(t+=" "+e)}this.$.className=t||e},removeClass:function(e){var t=this.getAttribute("class");if(t){var n=new RegExp("(?:^|\\s+)"+e+"(?=\\s|$)","i");if(n.test(t)){t=t.replace(n,"").replace(/^\s+/,"");t?this.setAttribute("class",t):this.removeAttribute("class")}}},hasClass:function(e){var t=new RegExp("(?:^|\\s+)"+e+"(?=\\s|$)","");return t.test(this.getAttribute("class"))},append:function(t,n){var r=this;typeof t=="string"&&(t=r.getDocument().createElement(t));n?r.$.insertBefore(t.$,r.$.firstChild):r.$.appendChild(t.$);e.log("[DOM] DOM flush into "+r.getName());return t},appendHtml:function(e){var t=this;if(!t.$.childNodes.length)t.setHtml(e);else{var n=new l("div",t.getDocument());n.setHtml(e);n.jg(t)}},appendText:function(e){this.$.text!=undefined?this.$.text+=e:this.append(new u.text(e))},pd:function(){var t=this,n=t.dB();while(n&&n.type==e.fl&&!a.rtrim(n.getText()))n=n.cf();(!n||!n.is||!n.is("br"))&&t.append(s.opera?t.getDocument().jT(""):t.getDocument().createElement("br"))},tV:function(e){var t=this,n=new u.mk(t.getDocument());n.setStartAfter(t);n.setEndAfter(e);var r=n.extractContents();n.insertNode(t.remove());r.kA(t)},contains:o||s.webkit?function(t){var n=this.$;return t.type!=e.cv?n.contains(t.getParent().$):n!=t.$&&n.contains(t.$)}:function(e){return!!(this.$.compareDocumentPosition(e.$)&16)},focus:function(){try{this.$.focus()}catch(e){}},getHtml:function(){return this.$.innerHTML},fH:function(){var e=this;if(e.$.outerHTML)return e.$.outerHTML.replace(/<\?[^>]*>/,"");var t=e.$.ownerDocument.createElement("div");t.appendChild(e.$.cloneNode(!0));return t.innerHTML},setHtml:function(t){e.log("[DOM] DOM flush into "+this.getName());return this.$.innerHTML=t},setText:function(t){l.prototype.setText=this.$.innerText!=undefined?function(t){e.log("[DOM] Text flush");return this.$.innerText=t}:function(t){e.log("[DOM] Text flush");return this.$.textContent=t};return this.setText(t)},getAttribute:function(){var e=function(e){return this.$.getAttribute(e,2)};return o&&(s.ie7Compat||s.ie6Compat)?function(t){var n=this;switch(t){case"class":t="className";break;case"tabindex":var r=e.call(n,t);r!==0&&n.$.tabIndex===0&&(r=null);return r;case"checked":return n.$.checked;case"style":return n.$.style.cssText}return e.call(n,t)}:e}(),getChildren:function(){return new u.iT(this.$.childNodes)},getComputedStyle:o?function(e){return this.$.currentStyle[a.cssStyleToDomStyle(e)]}:function(e){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(e)},pf:function(){var t=e.ga[this.getName()];this.pf=function(){return t};return t},eG:f.prototype.eG,vp:o?function(){var t=this.$.tabIndex;t===0&&!e.ga.ug[this.getName()]&&parseInt(this.getAttribute("tabindex"),10)!==0&&(t=-1);return t}:s.webkit?function(){var e=this.$.tabIndex;if(e==undefined){e=parseInt(this.getAttribute("tabindex"),10);isNaN(e)&&(e=-1)}return e}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},dS:function(){return this.$.id||null},data:function(e,t){e="data-"+e;if(t===undefined)return this.getAttribute(e);t===!1?this.removeAttribute(e):this.setAttribute(e,t);return null},vm:function(){return this.$.name||null},getName:function(){var e=this.$.nodeName.toLowerCase();if(o&&!(document.documentMode>8)){var t=this.$.scopeName;t!="HTML"&&(e=t.toLowerCase()+":"+e)}return(this.getName=function(){return e})()},getValue:function(){return this.$.value},getFirst:function(){var e=this.$.firstChild;return e?new u.bi(e):null},dB:function(e){var t=this.$.lastChild,n=t&&new u.bi(t);n&&e&&!e(n)&&(n=n.cf(e));return n},rd:function(e){return this.$.style[a.cssStyleToDomStyle(e)]},is:function(){var e=this.getName();for(var t=0;t<arguments.length;t++)if(arguments[t]==e)return!0;return!1},vL:function(){var t=this.getName(),n=!e.ga.uj[t]&&(e.ga[t]||e.ga.span);return n&&n["#"]},isIdentical:function(e){if(this.getName()!=e.getName())return!1;var t=this.$.attributes,n=e.$.attributes,r=t.length,i=n.length;if(!o&&r!=i)return!1;for(var s=0;s<r;s++){var u=t[s];if((!o||u.specified&&u.nodeName!="_ckf_expando")&&u.nodeValue!=e.getAttribute(u.nodeName))return!1}if(o)for(s=0;s<i;s++){u=n[s];if((!o||u.specified&&u.nodeName!="_ckf_expando")&&u.nodeValue!=t.getAttribute(u.nodeName))return!1}return!0},isVisible:function(){return this.$.offsetWidth&&this.$.style.visibility!="hidden"},hasAttributes:o&&(s.ie7Compat||s.ie6Compat)?function(){var e=this.$.attributes;for(var t=0;t<e.length;t++){var n=e[t];switch(n.nodeName){case"class":if(this.getAttribute("class"))return!0;case"_ckf_expando":continue;default:if(n.specified)return!0}}return!1}:function(){var e=this.$.attributes;return e.length>1||e.length==1&&e[0].nodeName!="_ckf_expando"},hasAttribute:function(e){var t=this.$.attributes.getNamedItem(e);return!!t&&!!t.specified},hide:function(){this.setStyle("display","none")},jg:function(e,t){var n=this.$;e=e.$;if(n==e)return;var r;if(t)while(r=n.lastChild)e.insertBefore(n.removeChild(r),e.firstChild);else while(r=n.firstChild)e.appendChild(n.removeChild(r))},show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var e=function(e,t){this.$.setAttribute(e,t);return this};return o&&(s.ie7Compat||s.ie6Compat)?function(t,n){var r=this;t=="class"?r.$.className=n:t=="style"?r.$.style.cssText=n:t=="tabindex"?r.$.tabIndex=n:t=="checked"?r.$.checked=n:e.apply(r,arguments);return r}:e}(),setAttributes:function(e){for(var t in e)this.setAttribute(t,e[t]);return this},setValue:function(e){this.$.value=e;return this},removeAttribute:function(){var e=function(e){this.$.removeAttribute(e)};return o&&(s.ie7Compat||s.ie6Compat)?function(t){t=="class"?t="className":t=="tabindex"&&(t="tabIndex");e.call(this,t)}:e}(),uW:function(e){for(var t=0;t<e.length;t++)this.removeAttribute(e[t])},removeStyle:function(e){var t=this;t.$.style.removeAttribute?t.$.style.removeAttribute(a.cssStyleToDomStyle(e)):t.setStyle(e,"");t.$.style.cssText||t.removeAttribute("style")},setStyle:function(e,t){this.$.style[a.cssStyleToDomStyle(e)]=t;return this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},setOpacity:function(e){if(o&&s.version<9){e=Math.round(e*100);this.setStyle("filter",e>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")}else this.setStyle("opacity",e)},unselectable:s.gecko?function(){this.$.style.MozUserSelect="none"}:s.webkit?function(){this.$.style.uE="none"}:function(){if(o||s.opera){var e=this.$,t,n=0;e.unselectable="on";while(t=e.all[n++])switch(t.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:t.unselectable="on"}}},vr:function(){var e=this;while(e.getName()!="html"){if(e.getComputedStyle("position")!="static")return e;e=e.getParent()}return null},ir:function(e){var t=this,n=0,r=0,i=t.getDocument().bH(),u=t.getDocument().$.compatMode=="BackCompat",a=t.getDocument();if(document.documentElement.getBoundingClientRect){var f=t.$.getBoundingClientRect(),c=a.$,h=c.documentElement,p=h.clientTop||i.$.clientTop||0,d=h.clientLeft||i.$.clientLeft||0,v=!0;if(o){var m=a.gT().contains(t),y=a.bH().contains(t);v=u&&y||!u&&m}if(v){n=f.left+(!u&&h.scrollLeft||i.$.scrollLeft);n-=d;r=f.top+(!u&&h.scrollTop||i.$.scrollTop);r-=p}}else{var b=t,w=null,E;while(b&&b.getName()!="body"&&b.getName()!="html"){n+=b.$.offsetLeft-b.$.scrollLeft;r+=b.$.offsetTop-b.$.scrollTop;if(!b.equals(t)){n+=b.$.clientLeft||0;r+=b.$.clientTop||0}var S=w;while(S&&!S.equals(b)){n-=S.$.scrollLeft;r-=S.$.scrollTop;S=S.getParent()}w=b;b=(E=b.$.offsetParent)?new l(E):null}}if(e){var x=t.getWindow(),T=e.getWindow();if(!x.equals(T)&&x.$.frameElement){var N=(new l(x.$.frameElement)).ir(e);n+=N.x;r+=N.y}}if(!document.documentElement.getBoundingClientRect&&s.gecko&&!u){n+=t.$.clientLeft?1:0;r+=t.$.clientTop?1:0}return{x:n,y:r}},scrollIntoView:function(e){var t=this,n=t.getWindow(),r=n.eR().height,i=r*-1;if(e)i+=r;else{i+=t.$.offsetHeight||0;i+=parseInt(t.getComputedStyle("marginBottom")||0,10)||0}var s=t.ir();i+=s.y;i=i<0?0:i;var o=n.hV().y;(i>o||i<o-r)&&n.$.scrollTo(0,i)},bR:function(t){var n=this;switch(t){case e.eV:n.addClass("cke_on");n.removeClass("cke_off");n.removeClass("cke_disabled");break;case e.aY:n.addClass("cke_disabled");n.removeClass("cke_off");n.removeClass("cke_on");break;default:n.addClass("cke_off");n.removeClass("cke_on");n.removeClass("cke_disabled")}},getFrameDocument:function(){var e=this.$;try{e.contentWindow.document}catch(t){e.src=e.src;o&&s.version<7&&window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);</script>")')}return e&&new f(e.contentWindow.document)},qw:function(e,t){var n=this,r=n.$.attributes;t=t||{};for(var i=0;i<r.length;i++){var s=r[i];if(s.specified||o&&s.nodeValue&&s.nodeName.toLowerCase()=="value"){var u=s.nodeName;if(u in t)continue;var a=n.getAttribute(u);a===null&&(a=s.nodeValue);e.setAttribute(u,a)}}n.$.style.cssText!==""&&(e.$.style.cssText=n.$.style.cssText)},renameNode:function(e){var t=this;if(t.getName()==e)return;var n=t.getDocument(),r=new l(e,n);t.qw(r);t.jg(r);t.$.parentNode.replaceChild(r.$,t.$);r.$._ckf_expando=t.$._ckf_expando;t.$=r.$},getChild:function(e){var t=this.$;if(!e.slice)t=t.childNodes[e];else while(e.length>0&&t)t=t.childNodes[e.shift()];return t?new u.bi(t):null},iu:function(){return this.$.childNodes.length},hX:function(){this.on("contextmenu",function(e){e.data.bK().hasClass("cke_enable_context_menu")||e.data.preventDefault()})},toString:function(){return this.getName()+"#"+this.dS()+"."+this.getAttribute("class")}});(function(){function t(t){var n=0;for(var r=0,i=e[t].length;r<i;r++)n+=parseInt(this.getComputedStyle(e[t][r])||0,10)||0;return n}var e={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};l.prototype.setSize=function(e,n,r){if(typeof n=="number"){r&&(!o||!s.quirks)&&(n-=t.call(this,e));this.setStyle(e,n+"px")}};l.prototype.hR=function(e,n){var r=Math.max(this.$["offset"+a.capitalize(e)],this.$["client"+a.capitalize(e)])||0;n&&(r-=t.call(this,e));return r}})();e.command=function(t,n){this.pW=[];this.exec=function(r){if(this.bu==e.aY||this.readOnly===!1&&t.config.readOnly)return!1;n.oD&&t.focus();return n.exec.call(this,t,r)!==!1};a.extend(this,n,{iH:{qt:1},oD:!0,bu:e.aS});e.event.call(this)};e.command.prototype={enable:function(){var t=this;t.bu==e.aY&&t.bR(!t.vf||typeof t.lJ=="undefined"?e.aS:t.lJ)},disable:function(){this.bR(e.aY)},bR:function(e){var t=this;if(t.bu==e)return!1;t.lJ=t.bu;t.bu=e;t.oW("bu");return!0},rJ:function(){var t=this;t.bu==e.aS?t.bR(e.eV):t.bu==e.eV&&t.bR(e.aS)}};e.event.du(e.command.prototype,!0);e.config={customConfig:e.getUrl("config.js"),connectorLanguage:"cfm",language:"",defaultLanguage:"en",defaultViewType:"thumbnails",defaultSortBy:"filename",defaultDisplayFilename:!0,defaultDisplayDate:!0,defaultDisplayFilesize:!0,pO:"",height:400,plugins:"foldertree,folder,filebrowser,container,connector,resource,toolbar,formpanel,filesview,status,contextmenu,uploadform,keystrokes,dragdrop,basket,dialog,tools,resize,maximize,help,flashupload,mobile,html5upload,gallery",extraPlugins:"",fileIcons:"ai|avi|bmp|cs|dll|doc|docx|exe|fla|gif|jpg|js|mdb|mp3|ogg|pdf|ppt|pptx|rdp|swf|swt|txt|vsd|xls|xlsx|xml|zip",removePlugins:"",tabIndex:0,thumbnailDelay:50,theme:"default",skin:"kama",width:"100%",baseFloatZIndex:1e4,directDownload:!1,log:!1,logStackTrace:!1,rememberLastFolder:!0,id:null,startupPath:"",startupFolderExpanded:!0,selectActionFunction:null,selectActionData:null,selectThumbnailActionFunction:null,selectThumbnailActionData:null,disableThumbnailSelection:!1,thumbsUrl:null,thumbsDirectAccess:!1,imagesMaxWidth:0,imagesMaxHeight:0,selectActionType:"js",resourceType:null,disableHelpButton:!1,connectorPath:"",connectorInfo:"",uiColor:null,showContextMenuArrow:!1,useNativeIcons:!1,maxSimultaneousUploads:1,readOnly:!1,selectMultiple:!0};CKFinder.config=e.config;var c=e.config;e.dU=function(e,t){this.rG=e;this.message=t};e.fs=function(e){if(e.fs)return e.fs;this.hasFocus=!1;this._={application:e};return this};e.fs.prototype={focus:function(){var t=this;t._.fW&&clearTimeout(t._.fW);if(!t.hasFocus){e.nG&&e.nG.fs.ly();var n=t._.application;n.container.getFirst().addClass("cke_focus");t.hasFocus=!0;n.oW("focus")}},blur:function(){var e=this;e._.fW&&clearTimeout(e._.fW);e._.fW=setTimeout(function(){delete e._.fW;e.ly()},100)},ly:function(){if(this.hasFocus){var e=this._.application;e.container.getFirst().removeClass("cke_focus");this.hasFocus=!1;e.oW("blur")}}};(function(){var t={};e.lang={ko:{bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,eo:1,es:1,"es-mx":1,et:1,fa:1,fi:1,fr:1,gu:1,he:1,hi:1,hr:1,hu:1,it:1,ja:1,lv:1,lt:1,nb:1,nl:1,no:1,nn:1,pl:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,qN:1,sv:1,tr:1,vi:1,"zh-cn":1,"zh-tw":1},load:function(t,n,r){if(!t||!e.lang.ko[t])t=this.jV(n,t);this[t]?r(t,this[t]):e.scriptLoader.load(e.getUrl("lang/"+t+".js"),function(){r(t,CKFinder.lang[t])},this)},jV:function(t,n){var r=this.ko;n=n||navigator.userLanguage||navigator.language;var i=n.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),s=i[1],o=i[2];r[s+"-"+o]?s=s+"-"+o:r[s]||(s=null);e.lang.jV=s?function(){return s}:function(e){return e};return s||t}}})();(function(){e.log=function(){if(!c.log&&!window.CKFINDER_LOG)return;var t="";for(var n=0;n<arguments.length;n++){var r=arguments[n];if(!r)continue;t&&(t+="; ");switch(typeof r){case"function":var i=/function (\w+?)\(/.exec(r.toString());i=i?i[1]:"anonymous func";t+=i;break;default:t+=r?r.toString():""}}e._.log.push(t);typeof window.console=="object"&&(console.log.apply?console.log.apply(console,arguments):console.log(t))};e.ba=function(t){c.logStackTrace&&e.log("[EXCEPTION] "+t.toString());return t};e.mZ=function(t){var n="";for(var r=0;r<e._.log.length;r++)n+=r+1+". "+e._.log[r]+"\n";return n};e._.log=[]})();e.scriptLoader=function(){var t={},n={};return{load:function(r,i,s,u,a){var f=typeof r=="string";f&&(r=[r]);s||(s=e);var c=r.length,h=[],p=[],d=function(e){i&&(f?i.call(s,e):i.call(s,h,p))};if(c===0){d(!0);return}var v=function(e,t){(t?h:p).push(e);--c<=0&&d(t)},y=function(e,r){t[e]=1;var i=n[e];delete n[e];for(var s=0;s<i.length;s++)i[s](e,r)},b=function(r){if(u!==!0&&t[r]){v(r,!0);return}var s=n[r]||(n[r]=[]);s.push(v);if(s.length>1)return;var f=new l("script");f.setAttributes({type:"text/javascript",src:r});if(i)if(o)f.$.onreadystatechange=function(){if(f.$.readyState=="loaded"||f.$.readyState=="complete"){f.$.onreadystatechange=null;e.log("[LOADED] "+r);y(r,!0)}};else{f.$.onload=function(){setTimeout(function(){e.log("[LOADED] "+r);y(r,!0)},0)};f.$.onerror=function(){y(r,!1)}}f.appendTo(a?a:e.document.getHead())};for(var w=0,E=c;w<E;w++)b(r[w])},uq:function(t){var n=new l("script");n.setAttribute("type","text/javascript");n.appendText(t);n.appendTo(e.document.getHead())}}}();CKFinder.scriptLoader=e.scriptLoader;e.fQ=function(e,t){var n=this;n.basePath=e;n.fileName=t;n.bX={};n.loaded={};n.jn={};n._={rZ:{}}};e.fQ.prototype={add:function(e,t){if(this.bX[e])throw'[CKFINDER.fQ.add] The resource name "'+e+'" is already bX.';this.bX[e]=t||{}},eB:function(e){return this.bX[e]||null},getPath:function(t){var n=this.jn[t];return e.getUrl(n&&n.dir||this.basePath+t+"/")},pi:function(t){var n=this.jn[t];return e.getUrl(this.getPath(t)+(n&&n.file||this.fileName+".js"))},tR:function(e,t,n){e=e.split(",");for(var r=0;r<e.length;r++){var i=e[r];this.jn[i]={dir:t,file:n}}},load:function(t,n,r){a.isArray(t)||(t=t?[t]:[]);var i=this.loaded,s=this.bX,o=[],u={},f={};for(var l=0;l<t.length;l++){var c=t[l];if(!c)continue;if(!i[c]&&!s[c]){var h=this.pi(c);o.push(h);h in u||(u[h]=[]);u[h].push(c)}else f[c]=this.eB(c)}e.scriptLoader.load(o,function(e,t){if(t.length)throw'[CKFINDER.fQ.load] Resource name "'+u[t[0]].join(",")+'" was not found at "'+t[0]+'".';for(var s=0;s<e.length;s++){var o=u[e[s]];for(var a=0;a<o.length;a++){var l=o[a];f[l]=this.eB(l);i[l]=1}}n.call(r,f)},this)}};e.plugins=new e.fQ("plugins/","plugin");var h=e.plugins;h.load=a.override(h.load,function(e){return function(t,n,r){var i={},s=function(t){e.call(this,t,function(e){a.extend(i,e);var t=[];for(var o in e){var u=e[o],f=u&&u.bM;if(f)for(var l=0;l<f.length;l++)i[f[l]]||t.push(f[l])}if(t.length)s.call(this,t);else{for(o in i){u=i[o];if(u.onLoad&&!u.onLoad.qK){u.onLoad();u.onLoad.qK=1}}n&&n.call(r||window,i)}},this)};s.call(this,t)}});h.rX=function(e,t,n){var r=this.eB(e);r.lang[t]=n};(function(){var t={},n=function(e,n){var r=function(){t[e]=1;n()},i=new l("img");i.on("load",r);i.on("error",r);i.setAttribute("src",e)};e.rw={load:function(e,r){var i=e.length,s=function(){--i===0&&r()};for(var o=0;o<e.length;o++){var u=e[o];t[u]?s():n(u,s)}}}})();e.skins=function(){var t={},n={},r={},i=function(s,o,u,a){var f=t[o];if(!s.skin){s.skin=f;f.bz&&f.bz(s)}var l=function(t){for(var n=0;n<t.length;n++)t[n]=e.getUrl(r[o]+t[n])};if(!n[o]){var c=f.ls;if(c&&c.length>0){l(c);e.rw.load(c,function(){n[o]=1;i(s,o,u,a)});return}n[o]=1}u=f[u];var h=0;u?u.iB?u.iB[s.name]&&(h=1):u.iB=[]:h=1;if(h)a&&a();else{u.eb===undefined&&(u.eb=[]);u.eb[s.name]===undefined&&(u.eb[s.name]=[]);var p=u.eb[s.name];p.push(a);if(p.length>1)return;var d=!u.css||!u.css.length,v=!u.js||!u.js.length,m=function(){if(d&&v){u.iB[s.name]=1;for(var e=0;e<p.length;e++)p[e]&&p[e]()}};if(!d){if(!u.rr){l(u.css);u.rr=1}if(u.qx)for(var g=0;g<u.css.length;g++)e.oC.appendStyleSheet(u.css[g]);else s.on("themeSpace",function(e){if(e.data.space=="head")for(var t=0;t<u.css.length;t++)e.data.html+="<link rel='stylesheet' href='"+u.css[t]+"'>\n";e.removeListener()});d=1}if(!v){l(u.js);s.scriptLoader.load(u.js,function(){v=1;m()})}m()}};return{add:function(n,i){t[n]=i;i.fh=r[n]||(r[n]=e.getUrl("skins/"+n+"/"))},loaded:t,load:function(n,s,o){var u=n.gd,a=n.fh;if(t[u]){i(n,u,s,o);var f=t[u]}else{r[u]=a;e.scriptLoader.load(a+"skin.js",function(){i(n,u,s,o)})}}}}();e.gc=new e.fQ("gc/","theme");e.bY=function(e){if(e.bY)return e.bY;this._={jZ:{},items:{},application:e};return this};var p=e.bY;p.prototype={add:function(e,t,n){this._.items[e]={type:t,command:n.command||null,mp:Array.prototype.slice.call(arguments,2)}},create:function(e){var t=this,n=t._.items[e],r=n&&t._.jZ[n.type],i=n&&n.command&&t._.application.cS(n.command),s=r&&r.create.apply(t,n.mp);i&&i.pW.push(s);return s},kd:function(e,t){this._.jZ[e]=t}};(function(){var t=0,n=function(){var r="ckfinder"+ ++t;return e.instances&&e.instances[r]?n():r},u={},d=function(t){var n=t.config.customConfig;if(!n)return!1;var r=u[n]||(u[n]={});if(r.fn){r.fn.call(t,t.config);(t.config.customConfig==n||!d(t))&&t.cr("customConfigLoaded")}else e.scriptLoader.load(n,function(){CKFinder.customConfig?r.fn=CKFinder.customConfig:r.fn=function(){};d(t)});return!0},v=function(e,t){e.on("customConfigLoaded",function(){if(t){if(t.on)for(var n in t.on)e.on(n,t.on[n]);a.extend(e.config,t,!0);delete e.config.on}y(e)});t&&t.id&&(e.config.id=t.id);t&&t.customConfig!=undefined&&(e.config.customConfig=t.customConfig);d(e)||e.cr("customConfigLoaded")},y=function(t){var n=t.config.skin.split(","),r=n[0],i=e.getUrl(n[1]||"skins/"+r+"/");t.gd=r;t.fh=i;t.iy="cke_skin_"+r+" skin_"+r;t.qn=t.ox();t.on("uiReady",function(){t.document.getWindow().on("lW",function(){a.setCookie("CKFinder_UTime",Math.round((new Date).getTime()/1e3),!0);a.setCookie("CKFinder_UId",encodeURIComponent(t.id?t.id:location.href),!0)})});t.cr("configLoaded");b(t)},b=function(t){e.lang.load(t.config.language,t.config.defaultLanguage,function(e,n){t.langCode=e;t.lang=a.prototypedCopy(n);t.lB=function(){var e="['"+t.lang.DateAmPm.join("','")+"']",n=t.lang.DateTime.replace(/dd|mm|yyyy|hh|HH|MM|aa|d|m|yy|h|H|M|a/g,function(t){var n;switch(t){case"d":n="day.replace(/^0/,'')";break;case"dd":n="day";break;case"m":n="month.replace(/^0/,'')";break;case"mm":n="month";break;case"yy":n="year.substr(2)";break;case"yyyy":n="year";break;case"H":n="hour.replace(/^0/,'')";break;case"HH":n="hour";break;case"h":n="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) ).replace(/^0/,'')";break;case"hh":n="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) )";break;case"M":n="minute.replace(/^0/,'')";break;case"MM":n="minute";break;case"a":n=e+"[ hour < 12 ? 0 : 1 ].charAt(0)";break;case"aa":n=e+"[ hour < 12 ? 0 : 1 ]";break;default:n="'"+t+"'"}return"',"+n+",'"});n="'"+n+"'";n=n.replace(/('',)|,''$/g,"");return new Function("day","month","year","hour","minute","return ["+n+"].join('');")}();s.gecko&&s.version<10900&&t.lang.dir=="rtl"&&(t.lang.dir="ltr");w(t)})},w=function(t){var n=t.config,r=n.plugins,i=n.extraPlugins,s=n.removePlugins;if(i){var o=new RegExp("(?:^|,)(?:"+i.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");r=r.replace(o,"");r+=","+i}if(s){o=new RegExp("(?:^|,)(?:"+s.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");r=r.replace(o,"")}h.load(r.split(","),function(n){var r=[],i=[],s=[],o;if(t.config.readOnly)for(var o in n)n[o].readOnly===!1&&delete n[o];t.plugins=n;for(o in n){var u=n[o],f=u.lang,l=h.getPath(o),c=null;n[o].name=o;u.pathName=l;if(f){c=a.indexOf(f,t.langCode)>=0?t.langCode:f[0];if(!u.lang[c])s.push(e.getUrl(l+"lang/"+c+".js"));else{a.extend(t.lang,u.lang[c]);c=null}}i.push(c);r.push(u)}e.scriptLoader.load(s,function(){var n=["eK","bz","gr"];for(var s=0;s<n.length;s++)for(var o=0;o<r.length;o++){var u=r[o];s===0&&i[o]&&u.lang&&a.extend(t.lang,u.lang[i[o]]);if(u[n[s]]){e.log("[PLUGIN] "+u.name+"."+n[s]);u[n[s]](t)}}t.oW("pluginsLoaded");E(t)})})},E=function(t){e.skins.load(t,"application",function(){e.skins.load(t,"host",function(){S(t)})})},S=function(t){var n=t.config.theme;e.gc.load(n,function(){var r=t.theme=e.gc.eB(n);r.pathName=e.gc.getPath(n);t.oW("themeAvailable")})};e.application.prototype.iI=function(t){var u=l.eB(this._.element),h=this._.instanceConfig;delete this._.element;delete this._.instanceConfig;this._.ky={};this._.gS=[];u.getDocument().getWindow().$.CKFinder=t;this.element=u;this.document=null;this.rQ={};this.name=n();if(this.name in e.instances)throw'[CKFINDER.application] The instance "'+this.name+'" already exists.';this.config=a.prototypedCopy(c);this.bY=new p(this);this.fs=new e.fs(this);this.aL={};this.aG={};this.on("uiReady",function(t){this.document.getWindow().on("lW",this.destroy,this);try{var n=this.document.getWindow();if(this.cg.inPopup&&(!o&&!s.opera||n.$.top.location.href.match(/ckfinder.html/)||n.$.top.name=="CKFinderpopup")){var r=this,i=[e.oC];if(n.$.top.location.href.match(/ckfinder.html/)||n.$.top.name=="CKFinderpopup"){this.document.focus();this.focus()}e.event.jP=!0;this.document.on("keydown",function(t){if(t.data.oV()==116||t.data.db()==e.bP+82){r.execCommand("refresh");n.$.event&&n.$.event.keyCode&&(n.$.event.keyCode=5055);try{t.data.preventDefault()}catch(i){}}});e.event.jP=!1;r.cg.inUrlPopup&&i.push(new f(e.oC.getWindow().$.opener.document));var u={},a=function(e,t){u[t].push(e);return function(){var t;if(e&&(t=e.apply(this,arguments)))return t;r.element&&r.element.getDocument().getWindow().$.close()}},l=function(){for(var e=0;e<i.length;e++){i[e].bH().$.onbeforeunload=u[e][0];i[e].getWindow().$.onunload=u[e][1];i[e].getWindow().$.onbeforeunload=u[e][2]}};for(var c=0;c<i.length;c++){u[c]={};i[c].bH().$.onbeforeunload=a(i[c].bH().$.onbeforeunload,c);i[c].getWindow().$.onunload=a(i[c].getWindow().$.onunload,c);i[c].getWindow().$.onbeforeunload=a(i[c].getWindow().$.onbeforeunload,c)}n.getDocument().bH().$.onbeforeunload=l;n.$.onunload=l;n.$.onbeforeunload=l}}catch(t){}},this);this.cg=new r(this);this.on("configLoaded",function(e){var t=this;i(t.cg,t,t.config.callback);t.id=t.config.id},this);v(this,h);e.oW("instanceCreated",null,this)}})();a.extend(e.application.prototype,{bD:function(t,n){return this._.ky[t]=new e.command(this,n)},destroy:function(){var t=this;t.theme.destroy(t);t.oW("destroy");e.remove(t)},execCommand:function(t,n){e.log("[COMMAND] "+t);var r=this.cS(t),i={name:t,rm:n,command:r};if(r&&r.bu!=e.aY&&this.oW("beforeCommandExec",i)!==!0){i.returnValue=r.exec(i.rm);if(!r.async&&this.oW("afterCommandExec",i)!==!0)return i.returnValue}return!1},cS:function(e){return this._.ky[e]},ox:function(){var e=Math.round((new Date).getTime()/1e3),t=a.getCookie("CKFinder_UTime"),n=decodeURIComponent(a.getCookie("CKFinder_UId"));return n&&t&&n==(this.id?this.id:location.href)&&Math.abs(e-t)<5?1:0},bs:""});(function(){var t="";for(var n=49;n<58;n++)t+=String.fromCharCode(n);for(n=65;n<91;n++){if(n==73||n==79)continue;t+=String.fromCharCode(n)}e.bs=t;e.nd="lo";e.jG="ho";e.hf=new window.RegExp("^www\\.");e.hg=new window.RegExp(":\\d+$");e.lS=function(t){return t.toLowerCase().replace(e.hf,"").replace(e.hg,"")}})();e.on("loaded",function(){var t=e.application.eb;if(t){delete e.application.eb;for(var n=0;n<t.length;n++)t[n].iI()}});delete e.dO;e.instances={};e.document=new f(document);e.oC=e.document.getWindow().$!=e.document.getWindow().$.top?new f(e.document.getWindow().$.top.document):e.document;e.add=function(t){e.instances[t.name]=t;e.jt=t;t.on("focus",function(){if(e.nG!=t){e.nG=t;e.oW("nG")}});t.on("blur",function(){if(e.nG==t){e.nG=null;e.oW("nG")}})};e.remove=function(t){delete e.instances[t.name]};e.aL={};e.eV=1;e.aS=2;e.aY=0;e.bF="";(function(){function t(e,t){return e+"."+(t.name||t||e)}e.aG={bX:{},hS:function(n,i,s){var o=t(n,i);if(this.bX[o]!==undefined)throw"[CKFINDER] Widget "+o+" already bX!";e.log("[WIDGET] bX "+o);this.bX[o]=new r(o,s);return this.bX[o]},bz:function(n,r,i,s,o){var u=t(r,i),f=this.bX[u],c=a.deepCopy(f.hF),h=function(e,t,n){this.app=e;this.eh=t instanceof l?t:new l(t);this.hF=c?a.extend(c,n):n||{};this._={};var r=function(e){this.ib=e};r.prototype=this.tools;this.tools=new r(this);var i=f.dT;if(i.length)for(var s=0;s<i.length;s++)i[s].call(this,e,this)};h.prototype=f;var p=new h(n,s,o);for(var d in p.fw)p.fw[d].readOnly&&n.config.readOnly?p.ke(d):p.gA(d);if(n.aG[u])throw"[CKFINDER Widget "+u+" already inited.";n.aG[u]=p;e.log("[WIDGET] instanced "+u);return p}};var n={click:1,mouseover:1,mouseout:1,focus:1,blur:1,submit:1,dblclick:1,mousedown:1,mouseup:1,mousemove:1,keypress:1,keydown:1,keyup:1,load:1,lW:1,abort:1,error:1,resize:1,scroll:1,select:1,change:1,reset:1},r=function(e,t){var n=this;n.id=e;n.readOnly=!0;n.fw={};n.hF=t||{};n.dT=[];n.tools=new n.tools(n)};r.prototype={gA:function(t){var r=this;e.log("[WIDGET] Enabling behavior "+t);var i=r.fw[t];if(!i)return;var s=r;for(var o=0;o<i.cC.length;o++){var u=i.cC[o];if(n[u])r.eh.on(u,i.fO,s);else{r.on(u,i.fO,s);r.app.on(u,i.fO,s)}}},ke:function(t){e.log("[WIDGET] Disabling behavior "+t);var r=this.fw[t];if(!r)return;for(var i=0;i<r.cC.length;i++){var s=r.cC[i];n[s]?this.eh.removeListener(s,r.fO):this.removeListener(s,r.fO)}},bh:function(e,t,n,r){a.isArray(t)||(t=[t]);this.fw[e]={cC:t,fO:n,readOnly:r===!1};this.eh&&this.gA(e)},removeBehavior:function(e){delete this.fw[e]},ur:function(){return this.fw},bn:function(){return this.eh},oE:function(){return this.hF},data:function(){return this.hF},tools:function(){}};r.prototype.tools.prototype={kg:function(e){if(e.target==this.ib.eh)return 1}};e.event.du(r.prototype)})();e.xml=function(e){var t=null;if(typeof e=="object")t=e;else{var n=(e||"").replace(/&nbsp;/g,"");if(window.DOMParser)t=(new DOMParser).parseFromString(n,"text/xml");else if(window.ActiveXObject){try{t=new ActiveXObject("MSXML2.DOMDocument")}catch(r){try{t=new ActiveXObject("Microsoft.XmlDom")}catch(r){}}if(t){t.async=!1;t.resolveExternals=!1;t.validateOnParse=!1;t.loadXML(n)}}}this.mq=t};e.xml.prototype={selectSingleNode:function(e,t){var n=this.mq;if(t||(t=n)){if("selectSingleNode"in t)return t.selectSingleNode(e);if(n.evaluate){var r=n.evaluate(e,t,null,9,null);return r&&r.singleNodeValue||null}if(t.querySelectorAll){var i=this.selectNodes(e,t);if(i.length==1){var r=e.match(/\/@(.*$)/);return r?i[0].getAttributeNode(r[1]):i[0]}}else alert("XPath is not supported in your browser")}return null},selectNodes:function(e,t){var n=this.mq,r=[];if(t||(t=n)){if("selectNodes"in t)return t.selectNodes(e);if(n.evaluate){var i=n.evaluate(e,t,null,5,null);if(i){var s;while(s=i.iterateNext())r.push(s)}}else{if(t.querySelectorAll){var o=e.replace(/\/@(.*$)/,"[$1]").replace(/\//gi,">");return t.querySelectorAll(o)}alert("XPath is not supported in your browser")}}return r},vB:function(e,t){var n=this.selectSingleNode(e,t),r=[];if(n){n=n.firstChild;while(n){n.xml?r.push(n.xml):window.XMLSerializer&&r.push((new XMLSerializer).serializeToString(n));n=n.nextSibling}}return r.length?r.join(""):null}};(function(){var t={address:1,tY:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,de:1},n={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1},r=function(t){var n=t.getChildren();for(var r=0,i=n.count();r<i;r++){var s=n.getItem(r);if(s.type==e.cv&&e.ga.um[s.getName()])return!0}return!1};u.qS=function(i){var s=this,u=null,a=null,f=[],l=i;while(l){if(l.type==e.cv){s.qH||(s.qH=l);var c=l.getName();o&&l.$.scopeName!="HTML"&&(c=l.$.scopeName.toLowerCase()+":"+c);if(!a){!u&&t[c]&&(u=l);n[c]&&(!u&&c=="div"&&!r(l)?u=l:a=l)}f.push(l);if(c=="body")break}l=l.getParent()}s.block=u;s.tX=a;s.elements=f}})();u.qS.prototype={sJ:function(e){var t=this.elements,n=e&&e.elements;if(!n||t.length!=n.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].equals(n[r]))return!1;return!0}};u.text=
function(e,t){typeof e=="string"&&(e=(t?t.$:document).createTextNode(e));this.$=e};u.text.prototype=new u.bi;a.extend(u.text.prototype,{type:e.fl,hJ:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},split:function(e){var t=this;if(o&&e==t.hJ()){var n=t.getDocument().jT("");n.kB(t);return n}var r=t.getDocument(),i=new u.text(t.$.splitText(e),r);if(s.ie8){var a=new u.text("",r);a.kB(i);a.remove()}return i},substring:function(e,t){return typeof t!="number"?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,t)}});u.pa=function(t){t=t||e.document;this.$=t.$.createDocumentFragment()};a.extend(u.pa.prototype,l.prototype,{type:e.om,kA:function(e){e=e.$;e.parentNode.insertBefore(this.$,e.nextSibling)}},!0,{append:1,pd:1,getFirst:1,dB:1,appendTo:1,jg:1,insertBefore:1,kA:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,iu:1,getChild:1,getChildren:1});(function(){function t(t,n){if(this._.end)return null;var r,i=this.mk,s,o=this.vR,u=this.type,a=t?"getPreviousSourceNode":"getNextSourceNode";if(!this._.start){this._.start=1;i.trim();if(i.collapsed){this.end();return null}}if(!t&&!this._.kp){var f=i.endContainer,l=f.getChild(i.endOffset);this._.kp=function(t,n){return(!n||!f.equals(t))&&(!l||!t.equals(l))&&(t.type!=e.cv||t.getName()!="body")}}if(t&&!this._.ka){var c=i.startContainer,h=i.startOffset>0&&c.getChild(i.startOffset-1);this._.ka=function(t,n){return(!n||!c.equals(t))&&(!h||!t.equals(h))&&(t.type!=e.cv||t.getName()!="body")}}var p=t?this._.ka:this._.kp;o?s=function(e,t){return p(e,t)===!1?!1:o(e)}:s=p;if(this.current)r=this.current[a](!1,u,s);else if(t){r=i.endContainer;if(i.endOffset>0){r=r.getChild(i.endOffset-1);s(r)===!1&&(r=null)}else r=s(r)===!1?null:r.hZ(!0,u,s)}else{r=i.startContainer;r=r.getChild(i.startOffset);r?s(r)===!1&&(r=null):r=s(i.startContainer)===!1?null:i.startContainer.hL(!0,u,s)}while(r&&!this._.end){this.current=r;if(!this.lf||this.lf(r)!==!1){if(!n)return r}else if(n&&this.lf)return!1;r=r[a](!1,u,s)}this.end();return this.current=null}function n(e){var n,r=null;while(n=t.call(this,e))r=n;return r}u.gm=a.createClass({$:function(e){this.mk=e;this._={}},ej:{end:function(){this._.end=1},next:function(){return t.call(this)},previous:function(){return t.call(this,!0)},sC:function(){return t.call(this,!1,!0)!==!1},sD:function(){return t.call(this,!0,!0)!==!1},uF:function(){return n.call(this)},uB:function(){return n.call(this,!0)},reset:function(){delete this.current;this._={}}}});var r={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},i={hr:1};l.prototype.qy=function(e){var t=a.extend({},i,e||{});return r[this.getComputedStyle("display")]||t[this.getName()]};u.gm.pQ=function(t){return function(n,r){return n.type!=e.cv||!n.qy(t)}};u.gm.us=function(){return this.pQ({br:1})};u.gm.tU=function(e){},u.gm.tW=function(e,t){function n(e){return e&&e.getName&&e.getName()=="span"&&e.hasAttribute("_fck_bookmark")}return function(r){var i,s;i=r&&!r.getName&&(s=r.getParent())&&n(s);i=e?i:i||n(r);return t^i}};u.gm.sf=function(t){return function(n){var r=n&&n.type==e.fl&&!a.trim(n.getText());return t^r}}})();(function(){if(s.webkit){s.hc=!1;return}var t=l.kE('<div style="width:0px;height:0px;position:absolute;left:-10000px;border:1px solid;border-color:red blue;"></div>',e.document);t.appendTo(e.document.getHead());try{s.hc=t.getComputedStyle("border-top-color")==t.getComputedStyle("border-right-color")}catch(n){s.hc=!1}s.hc&&(s.cssClass+=" cke_hc");t.remove()})();h.load(c.pO.split(","),function(){e.status="loaded";e.oW("loaded");var t=e._.io;if(t){delete e._.io;for(var n=0;n<t.length;n++)e.add(t[n])}});if(o)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(d){}CKFinder.lang.en={appTitle:"CKFinder",common:{unavailable:'%1<span class="cke_accessibility">, unavailable</span>',confirmCancel:"Some of the options were changed. Are you sure you want to close the dialog window?",ok:"OK",cancel:"Cancel",confirmationTitle:"Confirmation",messageTitle:"Information",inputTitle:"Question",undo:"Undo",redo:"Redo",skip:"Skip",skipAll:"Skip all",makeDecision:"What action should be taken?",rememberDecision:"Remember my decision"},dir:"ltr",HelpLang:"en",LangCode:"en",DateTime:"m/d/yyyy h:MM aa",DateAmPm:["AM","PM"],FoldersTitle:"Folders",FolderLoading:"Loading...",FolderNew:"Please type the new folder name: ",FolderRename:"Please type the new folder name: ",FolderDelete:'Are you sure you want to delete the "%1" folder?',FolderRenaming:" (Renaming...)",FolderDeleting:" (Deleting...)",DestinationFolder:"Destination Folder",FileRename:"Please type the new file name: ",FileRenameExt:"Are you sure you want to change the file extension? The file may become unusable.",FileRenaming:"Renaming...",FileDelete:'Are you sure you want to delete the file "%1"?',FilesDelete:"Are you sure you want to delete %1 files?",FilesLoading:"Loading...",FilesEmpty:"The folder is empty.",DestinationFile:"Destination File",SkippedFiles:"List of skipped files:",BasketFolder:"Basket",BasketClear:"Clear Basket",BasketRemove:"Remove from Basket",BasketOpenFolder:"Open Parent Folder",BasketTruncateConfirm:"Do you really want to remove all files from the basket?",BasketRemoveConfirm:'Do you really want to remove the file "%1" from the basket?',BasketRemoveConfirmMultiple:"Do you really want to remove %1 files from the basket?",BasketEmpty:"No files in the basket, drag and drop some.",BasketCopyFilesHere:"Copy Files from Basket",BasketMoveFilesHere:"Move Files from Basket",OperationCompletedSuccess:"Operation completed successfully.",OperationCompletedErrors:"Operation completed with errors.",FileError:"%s: %e",MovedFilesNumber:"Number of files moved: %s.",CopiedFilesNumber:"Number of files copied: %s.",MoveFailedList:"The following files could not be moved:<br />%s",CopyFailedList:"The following files could not be copied:<br />%s",Upload:"Upload",UploadTip:"Upload New File",Refresh:"Refresh",Settings:"Settings",Help:"Help",HelpTip:"Help",Select:"Select",SelectThumbnail:"Select Thumbnail",View:"View",Download:"Download",NewSubFolder:"New Subfolder",Rename:"Rename",Delete:"Delete",DeleteFiles:"Delete Files",CopyDragDrop:"Copy Here",MoveDragDrop:"Move Here",RenameDlgTitle:"Rename",NewNameDlgTitle:"New Name",FileExistsDlgTitle:"File Already Exists",SysErrorDlgTitle:"System Error",FileOverwrite:"Overwrite",FileAutorename:"Auto-rename",ManuallyRename:"Manually rename",OkBtn:"OK",CancelBtn:"Cancel",CloseBtn:"ns",UploadTitle:"Upload New File",UploadSelectLbl:"Select a file to upload",UploadProgressLbl:"(Upload in progress, please wait...)",UploadBtn:"Upload Selected File",UploadBtnCancel:"Cancel",UploadNoFileMsg:"Please select a file from your computer.",UploadNoFolder:"Please select a folder before uploading.",UploadNoPerms:"File upload not allowed.",UploadUnknError:"Error sending the file.",UploadExtIncorrect:"File extension not allowed in this folder.",UploadLabel:"Files to Upload",UploadTotalFiles:"Total Files:",UploadTotalSize:"Total Size:",UploadSend:"Upload",UploadAddFiles:"Add Files",UploadClearFiles:"Clear Files",UploadCancel:"Cancel Upload",UploadRemove:"Remove",UploadRemoveTip:"Remove !f",UploadUploaded:"Uploaded !n%",UploadProcessing:"Processing...",SetTitle:"Settings",SetView:"View:",SetViewThumb:"Thumbnails",SetViewList:"List",SetDisplay:"Display:",SetDisplayName:"File Name",SetDisplayDate:"Date",SetDisplaySize:"File Size",SetSort:"Sorting:",SetSortName:"by File Name",SetSortDate:"by Date",SetSortSize:"by Size",SetSortExtension:"by Extension",FilesCountEmpty:"<Empty Folder>",FilesCountOne:"1 file",FilesCountMany:"%1 files",Kb:"%1 KB",Mb:"%1 MB",Gb:"%1 GB",SizePerSecond:"%1/s",ErrorUnknown:"It was not possible to complete the request. (Error %1)",Errors:{10:"Invalid command.",11:"The resource type was not specified in the request.",12:"The requested resource type is not valid.",102:"Invalid file or folder name.",103:"It was not possible to complete the request due to authorization restrictions.",104:"It was not possible to complete the request due to file system permission restrictions.",105:"Invalid file extension.",109:"Invalid request.",110:"Unknown error.",111:"It was not possible to complete the request due to resulting file size.",115:"A file or folder with the same name already exists.",116:"Folder not found. Please refresh and try again.",117:"File not found. Please refresh the files list and try again.",118:"Source and target paths are equal.",201:'A file with the same name is already available. The uploaded file was renamed to "%1".',202:"Invalid file.",203:"Invalid file. The file size is too big.",204:"The uploaded file is corrupt.",205:"No temporary folder is available for upload in the server.",206:"Upload cancelled due to security reasons. The file contains HTML-like data.",207:'The uploaded file was renamed to "%1".',300:"Moving file(s) failed.",301:"Copying file(s) failed.",500:"The file browser is disabled for security reasons. Please contact your system administrator and check the CKFinder configuration file.",501:"The thumbnails support is disabled."},ErrorMsg:{pg:"The file name cannot be empty.",FileExists:"File %s already exists.",FolderEmpty:"The folder name cannot be empty.",FolderExists:"Folder %s already exists.",FolderNameExists:"Folder already exists.",oP:'The file name cannot contain any of the following characters: \n\\ / : * ? " < > |',FolderInvChar:'The folder name cannot contain any of the following characters: \n\\ / : * ? " < > |',oo:"It was not possible to open the file in a new window. Please configure your browser and disable all popup blockers for this site.",XmlError:"It was not possible to properly load the XML response from the web server.",XmlEmpty:"It was not possible to load the XML response from the web server. The server returned an empty response.",XmlRawResponse:"Raw response from the server: %s"},Imageresize:{dialogTitle:"Resize %s",sizeTooBig:"Cannot set image height or width to a value bigger than the original size (%size).",resizeSuccess:"Image resized successfully.",thumbnailNew:"Create a new thumbnail",thumbnailSmall:"Small (%s)",thumbnailMedium:"Medium (%s)",thumbnailLarge:"Large (%s)",newSize:"Set a new size",width:"Width",height:"Height",invalidHeight:"Invalid height.",invalidWidth:"Invalid width.",invalidName:"Invalid file name.",newImage:"Create a new image",noExtensionChange:"File extension cannot be changed.",imageSmall:"Source image is too small.",contextMenuName:"Resize",lockRatio:"Lock ratio",resetSize:"Reset size"},Fileeditor:{save:"Save",fileOpenError:"Unable to open file.",fileSaveSuccess:"File saved successfully.",contextMenuName:"Edit",loadingFile:"Loading file, please wait..."},Maximize:{maximize:"Maximize",minimize:"Minimize"},Gallery:{current:"Image {current} of {total}"},Zip:{extractHereLabel:"Extract here",extractToLabel:"Extract to...",downloadZipLabel:"Download as zip",compressZipLabel:"Compress to zip",removeAndExtract:"Remove existing and extract",extractAndOverwrite:"Extract overwriting existing files",extractSuccess:"File extracted successfully."}};(function(){var t=1,n=2,r=4,i=8,s=16,o=32,u=64,a=128;e.aL.Acl=function(e){var f=this;e||(e=0);f.folderView=(e&t)==t;f.folderCreate=(e&n)==n;f.folderRename=(e&r)==r;f.folderDelete=(e&i)==i;f.fileView=(e&s)==s;f.fileUpload=(e&o)==o;f.fileRename=(e&u)==u;f.fileDelete=(e&a)==a};h.add("acl")})();(function(){h.add("connector",{bM:[],bz:function(t){t.on("appReady",function(){t.connector=new e.aL.Connector(t);var n=t.config.resourceType,r=n?{type:n}:null;t.connector.sendCommand("Init",r,function(n){var r;if(n.checkError())return;var i="Connector/ConnectorInfo/";e.ed=n.selectSingleNode(i+"@s").value;e.bF=n.selectSingleNode(i+"@c").value+"----";t.config.thumbsEnabled=n.selectSingleNode(i+"@thumbsEnabled").value=="true";t.config.thumbsDirectAccess=!1;if(t.config.thumbsEnabled){r=n.selectSingleNode(i+"@thumbsUrl");r&&(t.config.thumbsUrl=r.value);r=n.selectSingleNode(i+"@thumbsDirectAccess");r&&(t.config.thumbsDirectAccess=r.value=="true");r=n.selectSingleNode(i+"@thumbsWidth");t.config.thumbsWidth=(r?parseInt(r.value,10):100)||100;r=n.selectSingleNode(i+"@thumbsHeight");t.config.thumbsHeight=(r?parseInt(r.value,10):100)||100}t.config.imagesMaxWidth=parseInt(n.selectSingleNode(i+"@imgWidth").value,10);t.config.imagesMaxHeight=parseInt(n.selectSingleNode(i+"@imgHeight").value,10);r=n.selectSingleNode(i+"@uploadMaxSize");t.config.uploadMaxSize=r?parseInt(r.value,10):0;r=n.selectSingleNode(i+"@uploadCheckImages");t.config.uploadCheckImages=r?r.value=="true":!1;var s=n.selectSingleNode(i+"@plugins"),o=s&&s.value;if(o&&o.length)h.load(o.split(","),function(r){var i=[],s=[],o=[];for(var u in r){var f=r[u],l=f.lang,c=h.getPath(u),p=null;if(!!t.plugins[u])continue;t.plugins[u]=r[u];r[u].name=u;f.pathName=c;if(l){p=a.indexOf(l,t.langCode)>=0?t.langCode:l[0];if(!f.lang[p])o.push(e.getUrl(c+"lang/"+p+".js"));else{a.extend(t.lang,f.lang[p]);p=null}}s.push(p);i.push(f)}e.scriptLoader.load(o,function(){var r=["eK","bz","gr"];for(var o=0;o<r.length;o++)for(var u=0;u<i.length;u++){var f=i[u];o===0&&s[u]&&f.lang&&a.extend(t.lang,f.lang[s[u]]);if(f[r[o]]){e.log("[PLUGIN] "+f.name+"."+r[o]);f[r[o]](t)}}t.cr("uiReady");t.cr("appReady");t.oW("pluginsLoaded",{step:2,jN:t.connector});t.cr("connectorInitialized",{xml:n})})});else{t.oW("pluginsLoaded",{step:2,jN:t.connector});t.cr("connectorInitialized",{xml:n})}})})}});e.aL.Connector=function(t){this.app=t;var n=t.config.connectorLanguage||"cfm";t.config.connectorPath?this.oN=t.config.connectorPath:this.oN=e.basePath+"core/connector/"+n+"/connector."+n};e.aL.Connector.prototype={ERROR_NONE:0,ERROR_CUSTOMERROR:1,ERROR_INVALIDCOMMAND:10,ERROR_TYPENOTSPECIFIED:11,ERROR_INVALIDTYPE:12,ERROR_INVALIDNAME:102,ERROR_UNAUTHORIZED:103,ERROR_ACCESSDENIED:104,ERROR_INVALIDEXTENSION:105,ERROR_INVALIDREQUEST:109,ERROR_UNKNOWN:110,ERROR_ALREADYEXIST:115,ERROR_FOLDERNOTFOUND:116,ERROR_FILENOTFOUND:117,ERROR_SOURCE_AND_TARGET_PATH_EQUAL:118,ERROR_UPLOADEDFILERENAMED:201,ERROR_UPLOADEDINVALID:202,ERROR_UPLOADEDTOOBIG:203,ERROR_UPLOADEDCORRUPT:204,ERROR_UPLOADEDNOTMPDIR:205,ERROR_UPLOADEDWRONGHTMLFILE:206,ERROR_UPLOADEDINVALIDNAMERENAMED:207,ERROR_MOVE_FAILED:300,ERROR_COPY_FAILED:301,ERROR_CONNECTORDISABLED:500,ERROR_THUMBNAILSDISABLED:501,currentFolderUrl:function(){if(this.app.aV)return this.app.aV.getUrl()},currentType:function(){if(this.app.aV)return this.app.aV.type},currentTypeHash:function(){if(this.app.aV)return e.getResourceType(this.app.aV.type).hash},currentResourceType:function(){return e.getResourceType(this.currentType())},sendCommand:function(n,r,i,s,o){var u=this.composeUrl(n,r,s,o),f=this;return i?e.ajax.loadXml(u,function(e){e.hy=f.app;f.app.oW("connectorResponse",{xml:e});i(a.extend(e,t))}):e.ajax.loadXml(u,function(e){f.app.oW("connectorResponse",{xml:e})})},sendCommandPost:function(n,r,i,s,o,u){var f=this.composeUrl(n,r,o,u),l=this;i||(i={});i.CKFinderCommand=!0;return s?e.ajax.loadXml(f,function(e){e.hy=l.app;l.app.oW("connectorResponse",{xml:e});s(a.extend(e,t))},this.composeUrlParams(i)):e.ajax.loadXml(f,function(e){l.app.oW("connectorResponse",{xml:e})},this.composeUrlParams(i))},composeUrl:function(e,t,n,r){var i=this,s=i.oN+"?command="+encodeURIComponent(e);if(e!="Init"){var o="";r||(r=i.app.aV);n?o=i.app.getResourceType(n).hash:o=i.app.getResourceType(r.type).hash;s+="&type="+encodeURIComponent(n||i.app.aV.type)+"&currentFolder="+encodeURIComponent(r.getPath()||"")+"&langCode="+i.app.langCode+"&hash="+o}if(t){var u=i.composeUrlParams(t);u&&(s+="&"+u)}i.app.id&&(s+="&id="+encodeURIComponent(i.app.id));i.app.config.connectorInfo&&(s+=(i.app.config.connectorInfo.charAt(0)!="&"?"&":"")+i.app.config.connectorInfo);return s},composeUrlParams:function(e){if(!e)return"";var t="";for(var n in e){t.length&&(t+="&");t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])}return t}};var t={checkError:function(){var t=this,n=t.getErrorNumber(),r=t.hy.connector;if(n==r.ERROR_NONE)return!1;if(n===-1)return!0;var i=t.getErrorMessage();e.log("[ERROR] "+n);var s;if(n==r.ERROR_CUSTOMERROR)s=i;else{s=t.hy.lang.Errors[n];if(s)for(var o=0;o<=arguments.length;o++){var u=o===0?i:arguments[o-1];s=s.replace(/%(\d+)/,u)}else s=t.hy.lang.ErrorUnknown.replace(/%1/,n)}t.hy.msgDialog("",s);return n!=r.ERROR_UPLOADEDFILERENAMED},getErrorNumber:function(){var e=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@number");return e?parseInt(e.value,10):-1},getErrorMessage:function(){var e=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@text");return e?e.value:""}}})();h.add("resource",{bM:["connector"],bz:function(t){t.resourceTypes=[];t.on("connectorInitialized",function(n){var r=n.data.xml.selectNodes("Connector/ResourceTypes/ResourceType");for(var i=0;i<r.length;i++){var s=r[i].attributes;t.resourceTypes.push(new e.aL.ResourceType(t,{name:s.getNamedItem("name").value,url:s.getNamedItem("url").value,hasChildren:s.getNamedItem("hasChildren").value,allowedExtensions:s.getNamedItem("allowedExtensions").value,deniedExtensions:s.getNamedItem("deniedExtensions").value,acl:s.getNamedItem("acl").value,hash:s.getNamedItem("hash").value,maxSize:s.getNamedItem("maxSize").value}))}t.cr("resourcesReceived",{hK:t.resourceTypes})});t.getResourceType=function(e){for(var t=0;t<this.resourceTypes.length;t++){var n=this.resourceTypes[t];if(n.name==e)return n}return null}}});(function(){function t(e){var t={};if(e.length>0){var n=e.toLowerCase().split(",");for(var r=0;r<n.length;r++)t[n[r]]=!0}return t}e.aL.ResourceType=function(e,n){var r=this;r.app=e;r.name=n.name;r.url=n.url;r.hasChildren=n.hasChildren==="true";r.defaultView="Thumbnails";r.allowedExtensions=n.allowedExtensions;r.deniedExtensions=n.deniedExtensions;r.oT=t(n.allowedExtensions);r.ms=t(n.deniedExtensions);r.nS=n.acl;r.hash=n.hash;r.maxSize=n.maxSize};e.aL.ResourceType.prototype={isExtensionAllowed:function(e){var t=this;e=e.toLowerCase();return(t.deniedExtensions.length===0||!t.ms[e])&&(t.allowedExtensions.length===0||!!t.oT[e])},allowedExtensions:function(){return this.allowedExtensions},getRootFolder:function(){for(var e=0;e<this.app.folders.length;e++){var t=this.app.folders[e];if(t.isRoot&&t.type==this.name)return t}return undefined}}})();(function(){function n(t,n,r,i,s){t.childFolders===null&&(t.childFolders=[]);var o=new e.aL.Folder(t.app,n,r,i,s);o.parent=t;o.nh=t.isRoot?0:t.nh+1;t.childFolders.push(o);return o}function r(n,r){if(!n||n.length===0)throw new e.dU("name_empty",r.lang.ErrorMsg.FolderEmpty);if(t.iz.test(n))throw new e.dU("name_invalid_chars",r.lang.ErrorMsg.FolderInvChar);return!0}var t={iz:/[\\\/:\*\?"<>\|]/};h.add("folder",{bM:["resource","connector","acl"],bz:function(t){t.folders=[];t.aV=null;t.on("resourcesReceived",function(r){var i=[],s=r.data.hK;for(var o=0;o<s.length;o++){var u=s[o];i.push(new e.aL.Folder(t,u.name,u.name,u.hasChildren,u.nS));i[i.length-1].isRoot=!0}t.oW("requestAddFolder",{folders:i},function(){var r=t.config.startupPath||"",i=0,s="",o="";if(t.config.rememberLastFolder){var u=t.id?"CKFinder_Path_"+t.id:"CKFinder_Path";s=decodeURIComponent(a.getCookie(u))||""}if(r&&!t.qn){o=r;i=1}else s?o=s:r?o=r:t.resourceTypes.length&&(o=t.resourceTypes[0].name+"/");if(o){e.log("[FOLDER] Opening startup path: "+o);var f=o.split(":");if(!t.getResourceType(f[0])||f.length<2)f=[t.resourceTypes[0].name,"/"];var l=t.aG["foldertree.foldertree"],c=/(.*\/)(.*)$/.exec(f[1]);l.tools.jL(f[0],c[1],function(r){if(!r)return;e.log("[FOLDER] Opening startup folder: ",r);var s=!i&&(f[2]=="1"||f[2]===undefined);s&&t.config.startupFolderExpanded===!1&&(s=0);l.oW("requestSelectFolder",{folder:r,expand:s,file:c[2]&&r.type==f[0]&&r.getPath()==c[1]?c[2]:""})})}})});t.bD("RemoveFolder",{readOnly:!1,exec:function(e){var t=e.aV;if(t){if(t.isRoot||!t.acl.folderDelete)return;e.fe("",e.lang.FolderDelete.replace("%1",t.name),function(){e.oW("requestProcessingFolder",{folder:t});t.remove()})}}});t.bD("CreateSubFolder",{readOnly:!1,exec:function(t){var n=t.aV;n&&t.hs(t.lang.NewNameDlgTitle,t.lang.FolderRename,"",function(r){r=a.trim(r);if(r)try{t.oW("requestProcessingFolder",{folder:n});n.createNewFolder(r)}catch(i){if(!(i instanceof e.dU))throw i;t.oW("requestRepaintFolder",{folder:n});t.msgDialog("",i.message)}})}});t.bD("RenameFolder",{readOnly:!1,exec:function(t){var n=t.aV;if(n){if(n.isRoot||!n.acl.folderRename)return;t.hs(t.lang.RenameDlgTitle,t.lang.FolderRename,t.aV.name,function(r){r=a.trim(r);if(r)try{n.rename(r)}catch(i){if(!(i instanceof e.dU))throw i;t.oW("requestRepaintFolder",{folder:n});t.msgDialog("",i.message)}})}}});if(t.eU){t.dZ("folder0",99);t.dZ("folder1",100);t.dZ("folder2",101);t.dZ("folder3",102);t.eU({kl:{label:t.lang.NewSubFolder,command:"CreateSubFolder",group:"folder1"},lI:{label:t.lang.Rename,command:"RenameFolder",group:"folder1"},removeFolder:{label:t.lang.Delete,command:"RemoveFolder",group:"folder2"}})}}});e.aL.Folder=function(t,n,r,i,s){var o=this;o.app=t;o.type=n||"";o.name=r||"";o.hasChildren=i==undefined||i===null?!0:!!i;o.isRoot=!1;o.isOpened=!1;o.parent=null;o.isDirty=!1;o.acl=new e.aL.Acl(s);o.index=t.folders.push(o)-1;o.childFolders=null};e.aL.Folder.prototype={getPath:function(){var e=this,t=e.isRoot?"/":e.name;while(e.parent){e=e.parent;t=e.isRoot?"/"+t:e.name+"/"+t}return e!=this?t+"/":t},getUrl:function(){var e=this,t="";while(e){t=e.isRoot?this.app.getResourceType(e.type).url+t:encodeURIComponent(e.name)+"/"+t;e=e.parent}return t},getUploadUrl:function(){return this.app.connector.composeUrl("FileUpload",{},this.type,this)},getResourceType:function(){return this.app.getResourceType(this.type)},updateReference:function(){var e=this;if(e.app.folders[e.index]==e)return e;for(var t=0;t<e.parent.childFolders.length;t++)if(e.parent.childFolders[t].name==e.name)return e.parent.childFolders[t];return undefined},getChildren:function(t,r){var i=this,s=i.childFolders;if(i.hl&&!r){e.log("[FOLDER] getChildrenLock active, defering callback...");i.app.oW("requestLoadingFolder",{folder:i});var o=100;setTimeout(function(){if(!i.hl)t(s);else if(o<=3e3)setTimeout(arguments.callee,o*=2);else{e.log("[FOLDER] TIMEOUT for getChildrenLock defered callback!");i.hl=!1;i.getChildren(t)}});return undefined}if(s&&!i.isDirty&&!r){t(s);return s}i.hl=!0;if(i.isDirty&&s){e.log("[FOLDER] Clearing folder children cache.");for(var u=0;u<s.length;u++)delete i.app.folders[s[u].index]}i.app.oW("requestLoadingFolder",{folder:i});this.app.connector.sendCommand("GetFolders",null,function(e){if(e.checkError()){i.app.oW("requestRepaintFolder",{folder:i});return}var r=e.selectSingleNode("Connector/@resourceType").value;i.hm=!0;var s=e.selectNodes("Connector/Folders/Folder"),o=[];i.childFolders=null;for(var u=0;u<s.length;u++){var a=s[u].attributes.getNamedItem("name").value,f=s[u].attributes.getNamedItem("hasChildren").value=="true",l=parseInt(s[u].attributes.getNamedItem("acl").value,10);o.push(n(i,r,a,f,l))}i.hasChildren=!!s.length;i.isDirty=!1;i.hl=null;i.app.oW("requestRepaintFolder",{folder:i});t(o)},i.type,i);return null},mapLoadedDescendants:function(e){if(!this.childFolders)return;for(var t=0;t<this.childFolders.length;t++){var n=this.childFolders[t];n.mapLoadedDescendants(e);e(n)}},select:function(){this.app.oW("requestSelectFolder",{folder:this})},isSelected:function(){return this.app.aV&&this==this.app.aV},deselect:function(){this.app.oW("requestSelectFolder")},open:function(e){if(e&&!this.hm)return;this.app.oW("requestExpandFolder",{folder:this})},close:function(){this.app.oW("requestExpandFolder",{folder:this,collapse:1})},hU:function(){var e=1,t=this;while(t){e++;t=t.parent}return e},toggle:function(){var e=this;if(!e.hasChildren)return;e.isOpened?e.close():e.open()},createNewFolder:function(e){r(e,this.app);var t=this;t.isDirty=!0;t.app.connector.sendCommandPost("CreateFolder",{NewFolderName:e},null,function(n){if(n.checkError()){t.app.oW("requestRepaintFolder",{folder:t});return}t.hasChildren=!0;t.app.oW("afterCommandExecDefered",{name:"CreateFolder",ip:t,uv:e})},this.type,this)},rename:function(e){r(e,this.app);var t=this;this.app.oW("requestProcessingFolder",{folder:t});t.parent.isDirty=!0;if(t.name==e){t.app.oW("requestRepaintFolder",{folder:t});return}t.app.connector.sendCommandPost("RenameFolder",{NewFolderName:e},null,function(e){if(e.checkError()){t.app.oW("requestRepaintFolder",{folder:t});return}t.parent.isDirty=!1;t.name=e.selectSingleNode("Connector/RenamedFolder/@newName").value;t.app.oW("requestRepaintFolder",{folder:t})},this.type,this)},remove:function(){var e=this;e.deselect();e.parent.isDirty=!0;this.app.oW("requestProcessingFolder",{folder:e});e.app.connector.sendCommandPost("DeleteFolder",null,null,function(t){if(t.checkError()){e.app.oW("requestRepaintFolder",{folder:e});return}e.app.oW("requestRemoveFolder",{folder:e},function(){var t=a.indexOf(e.parent.childFolders,e),n=e.index,r=e.parent,i=e.app;r.childFolders[t].mapLoadedDescendants(function(e){i.folders[e.index].isDeleted=!0;delete i.folders[e.index]});r.childFolders.splice(t,1);i.folders[n].isDeleted=!0;delete i.folders[n];if(r.childFolders.length===0){r.childFolders=null;r.hasChildren=!1}e.releaseDomNodes&&e.releaseDomNodes();i.oW("afterCommandExecDefered",{name:"RemoveFolder",ip:r,uN:n,folder:e})})},this.type,this)},toString:function(){return this.getPath()}}})();(function(){function n(){function n(e){this.ib=e;this.bi=e.tools.kI().cf()}var t=e.aG.hS("foldertree","foldertree");t.dT.push(function(){var e=this.bn();e.hasClass("view")||(e=e.getParent());a.mH(e)});t.bh("KeyboardNavigation",["keydown","requestKeyboardNavigation"],function(n){var r=this,i=this.tools.cq(n),s=0;if(n.data&&n.data.bK){var o=n.data.bK();s=o.$==r.bn().$}if(!i&&!s)return;var u=a.extend({},n.data,{folder:i},!0);this.oW("beforeKeyboardNavigation",u,function(o,u){if(o)return;try{var a=n.data.db();if(s&&a>=37&&a<=40){var f=r.app.folders[0];f&&this.tools.cT(f)}else{var l;if(a==38){n.data.preventDefault();l=i.liNode();if(l.gE()){var c=this.tools.cq(l.cf());while(c.isOpened&&c.hasChildren){if(!c.childFolders.length)break;c=c.childFolders[c.childFolders.length-1]}this.tools.cT(c)}else i.isRoot||this.tools.cT(i.parent)}else if(a==39&&i.hasChildren)i.isOpened?i.getChildren(function(e){r.tools.cT(e[0])}):this.oW("requestExpandFolder",{folder:i});else if(a==40){n.data.preventDefault();l=i.liNode();i.isOpened&&i.hasChildren?i.getChildren(function(e){r.tools.cT(e[0])}):l.ge()?this.tools.cT(this.tools.cq(l.dG())):!i.isRoot&&i.parent&&function(e){var t=e.liNode();t.ge()?r.tools.cT(r.tools.cq(t.dG())):e.parent&&arguments.callee(e.parent)}(i.parent)}else if(a==37)i.isOpened?this.oW("requestExpandFolder",{folder:i,collapse:1}):!i.isRoot&&i.parent&&this.tools.cT(i.parent);else if(a==46){r.app.oW("requestSelectFolder",{folder:i});r.app.execCommand("RemoveFolder")}else if(a==113){r.app.oW("requestSelectFolder",{folder:i});r.app.execCommand("RenameFolder")}}this.oW("successKeyboardNavigation",u);this.oW("afterKeyboardNavigation",u)}catch(h){h=e.ba(h);this.oW("failedKeyboardNavigation",u);this.oW("afterKeyboardNavigation",u);throw h}})});t.dT.push(function(e,t){e.on("afterCommandExecDefered",function(n){if(!n.data)return;var r=n.data.folder;if(n.data.name=="RemoveFolder"){if(r==t.tools.ew){t.tools.cT();t.bn().focus()}var i=e.aG["filesview.filesview"].tools.folder,s=r==i;r.mapLoadedDescendants(function(e){i==r&&(s=!0)});t.oW("requestSelectFolder",{folder:r.parent,expand:s})}else n.data.name=="RenameFolder"&&r==t.tools.ew&&r.focus()})});t.bh("RemoveFolder","requestRemoveFolder",function(n){var r=this,i=this.tools.cq(n),s=a.extend({},n.data,{folder:i},!0);this.oW("beforeRemoveFolder",s,function(n,r){var s=this;if(n)return;try{i.liNode().remove();s.oW("successRemoveFolder",r);s.oW("afterRemoveFolder",r)}catch(o){s.oW("failedRemoveFolder",r);s.oW("afterRemoveFolder",r);throw e.ba(o)}})},!1);t.bh("LoadingFolder","requestLoadingFolder",function(n){var r=this,i=this.tools.cq(n);if(!i)return undefined;var s=a.extend({},n.data,{folder:i},!0);this.oW("beforeLoadingFolder",s,function(n,i){if(n)return;var s=i.folder;try{this.on("afterExpandFolder",function(e){if(e.data&&e.data.folder==s){e.removeListener();var t=s.childrenRootNode().getChild(0);if(t&&t.hasClass("loading")){t.remove();this.oW("requestRepaintFolder",{folder:s});i.step=2;r.oW("successLoadingFolder",i);r.oW("afterLoadingFolder",i)}}},null,null,1);s.childrenRootNode()&&s.childrenRootNode().setHtml('<li class="loading">'+r.app.lang.FolderLoading+"</li>");this.oW("requestProcessingFolder",{folder:s});i.step=1;this.oW("successLoadingFolder",i)}catch(o){this.oW("failedLoadingFolder",i);this.oW("afterLoadingFolder",i);throw e.ba(o)}});return undefined});t.bh("ProcessingFolder",["requestProcessingFolder"],function(n){n.result=this.oW("beforeProcessingFolder",n.data,function(n,r){var i=this;if(n)return;try{var s=i.tools.cq(r.folder),o=s.aNode();o.addClass("processing");i.oW("successProcessingFolder",r);i.oW("afterProcessingFolder",r)}catch(u){u=e.ba(u);i.oW("failedProcessingFolder",r);i.oW("afterProcessingFolder",r);throw u}})});t.bh("RepaintFolder",["requestRepaintFolder"],function(n){this.oW("beforeRepaintFolder",n.data,function(n,r){var i=this;if(n)return undefined;try{var s=i.tools.cq(r.folder),o=s.liNode(),u=s.expanderNode(),f=s.aNode(),l=s.childrenRootNode(),c=s.name;f.getHtml()!=c&&f.setHtml(a.htmlEncode(s.name));f.removeClass("processing");if(!s.hasChildren){o.removeClass("openable");o.removeClass("closable");o.addClass("nochildren");u.removeAttribute("aria-expanded");l.$.hasChildNodes()&&l.setHtml("")}else if(s.hasChildren)if(l.$.hasChildNodes()){o.addClass("closable");o.removeClass("openable");u.setAttribute("aria-expanded","true")}else{o.addClass("openable");o.removeClass("closable");u.removeAttribute("aria-expanded")}i.oW("successRepaintFolder");i.oW("afterRepaintFolder")}catch(h){i.oW("failedRepaintFolder");i.oW("afterRepaintFolder");throw e.ba(h)}return undefined})});t.dT.push(function(e,t){e.on("afterCommandExecDefered",function(e){e.data&&e.data.name=="RemoveFolder"&&t.oW("requestRepaintFolder",{folder:e.data.ip})})});t.bh("AddFolder","requestAddFolder",function(n){var r=this,s={folders:n.data.folder?[n.data.folder]:n.data.folders,root:n.data.root};this.oW("beforeAddFolder",s,function(n,s){if(n)return;var u=s.folders,a=s.root?this.tools.cq(s.root):null,f,l;try{if(a)if(a.hasChildren===!1)a.liNode().addClass("nochildren");else{a.liNode().removeClass("nochildren");f=o(u,i);a.childrenRootNode().appendHtml(f)}else{var c={};for(var h=0;h<u.length;h++){l=u[h].parent?u[h].parent.index:-1;c[l]||(c[l]=[]);c[l].push(u[h])}for(var p in c){f=o(c[p],i);if(p==-1)this.tools.kI().appendHtml(f);else{l=this.tools.cq(p);l.liNode().removeClass("nochildren");l.childrenRootNode().appendHtml(f)}}(1==e.bs.indexOf(e.bF.substr(1,1))%5&&e.lS(window.top[e.nd+"cation"][e.jG+"st"])!=e.lS(e.ed)||e.bF.substr(3,1)!=e.bs.substr((e.bs.indexOf(e.bF.substr(0,1))+e.bs.indexOf(e.bF.substr(2,1)))*9%(e.bs.length-1),1))&&setTimeout(function(){r.app.layout.ea()},100)}this.oW("successAddFolder");this.oW("afterAddFolder")}catch(d){this.oW("failedAddFolder");this.oW("afterAddFolder");throw e.ba(d)}})});t.bh("SelectFolder",["click","requestSelectFolder","requestSelectFolderRefresh"],function(n){var r=this,i=n.name=="click",s=i&&n.data.bK();if(this.tools.kg(n))return;var o=this.tools.cq(n);if(i&&s.hasClass("dropdown")){n.jN.oW("contextmenu",n.data);n.cancel();return}if(i||n.name=="requestSelectFolder"){if(i&&!o)return;if(i&&o.aNode()&&o.aNode().$!=s.$)return;var u=a.extend({jR:1,expand:0},n.data,{folder:o},!0);this.oW("beforeSelectFolder",u,function(n,s){if(n)return undefined;var o=s.folder;try{if(this.app.aV&&(!o||o!=this.app.aV)){var u=this.app.aV.liNode();u&&u.removeClass("selected");r.tools.hk().mc();this.app.aV=null}if(o){i&&this.tools.cT(o);s.expand&&r.oW("requestExpandFolder",{folder:o});o.liNode().addClass("selected");this.app.aV=o;r.tools.hk().select(o.aNode());if(s.jR){r.oW("requestProcessingFolder",{folder:o});r.tools.mV(o,1);r.app.oW("requestShowFolderFiles",{folder:o,mw:s.file},function(e,t){t.ib&&t.ib.on("afterShowFolderFiles",function(e){if(e.data.folder==o){e.removeListener();r.oW("requestRepaintFolder",{folder:o})}})})}this.oW("successSelectFolder");this.oW("afterSelectFolder");return o}this.oW("successSelectFolder");this.oW("afterSelectFolder");return undefined}catch(a){this.oW("failedSelectFolder");this.oW("afterSelectFolder");throw e.ba(a)}})}else n.name=="requestSelectFolderRefresh"&&this.oW("beforeSelectFolderRefresh",function(n){var r=this;if(n)return undefined;try{if(r.app.aV){var i=r.app.aV.aNode();if(i)r.tools.hk().select(i);else{r.tools.hk().mc();r.oW("failedSelectFolderRefresh")}}else r.oW("successSelectFolderRefresh");r.oW("afterSelectFolderRefresh"
);return o}catch(s){r.oW("failedSelectFolderRefresh");r.oW("afterSelectFolderRefresh");throw e.ba(s)}})});t.dT.push(function(e,t){t.on("afterExpandFolder",function(){t.oW("requestSelectFolderRefresh")},null,null,999);t.on("successRemoveFolder",function(){t.oW("requestSelectFolderRefresh")});t.on("successLoadingFolder",function(e){e.data.step==1&&t.oW("requestSelectFolderRefresh")})});t.bh("ExpandFolder",["click","requestExpandFolder"],function(n){var r=this,i=n.name=="click",s=i&&n.data.bK();if(this.tools.kg(n))return;if(i&&!s.hasClass("expander"))return;var o=this.tools.cq(n),u=a.extend({collapse:0},n.data,{folder:o,hE:i},!0);this.oW("beforeExpandFolder",u,function(n,i){if(n)return undefined;try{var s=i.folder,o=s.liNode(),u=s.expanderNode();if(!s.acl.folderView){r.app.msgDialog("",r.app.lang.Errors[104]);throw"[CKFINDER] No permissions to view folder."}if(s.hasChildren){var a=i.hE&&o.hasClass("openable"),f=!i.hE&&!i.collapse&&!o.hasClass("closable"),l=!i.hE&&!i.collapse&&o.hasClass("closable"),c=!i.collapse&&i.force;if(a||f||c){o.removeClass("openable");o.addClass("closable");u.setAttribute("aria-expanded","true");s.getChildren(function(e){if(e){r.oW("requestAddFolder",{folders:e,root:s});s.isOpened=!0}else{r.oW("requestRepaintFolder",{folder:s});s.isOpened=!1}i.step=2;r.oW("successExpandFolder",i);r.oW("afterExpandFolder",i)});i.step=1;r.oW("successExpandFolder",i)}else if(i.hE||!i.hE&&i.collapse){o.removeClass("closable");o.addClass("openable");u.setAttribute("aria-expanded","false");s.childrenRootNode().setHtml("");s.isOpened=!1;if(s.hm)s.getChildren(function(e){s.mapLoadedDescendants(function(e){e.releaseDomNodes()});r.oW("successExpandFolder",i);r.oW("afterExpandFolder",i)});else{this.oW("requestRepaintFolder",{folder:s});this.oW("failedExpandFolder");this.oW("afterExpandFolder")}}else if(l){r.oW("successExpandFolder",i);r.oW("afterExpandFolder",i)}}else{this.oW("failedExpandFolder");this.oW("afterExpandFolder")}return s}catch(h){this.oW("failedExpandFolder");this.oW("afterExpandFolder");throw e.ba(h)}})});t.dT.push(function(e,t){e.on("afterCommandExecDefered",function(e){e.data&&e.data.name=="CreateFolder"&&t.oW("requestExpandFolder",{folder:e.data.ip,force:1})})});t.tools.jL=function(t,n,r){var i=this.ib,s=this.ib.app.getResourceType(t).getRootFolder(),o=s,u=n=="/"?[]:n.split("/").slice(1);u[u.length-1]===""&&(u=u.slice(0,-1));if(u.length===0){r(s);return}i.on("successExpandFolder",function(e){if(e.data.step!=2)return;var t=e.data.folder;if(t!=o)return;var n=u.shift();for(var s=0;s<t.childFolders.length;s++){var a=t.childFolders[s];if(a.name==n){if(u.length===0){e.removeListener();r(a);return}o=a;i.oW("requestExpandFolder",{folder:a})}}});i.oW("requestExpandFolder",{folder:s})};t.tools.cq=function(t){var n=this,r,i=0;if(t.data&&t.data.folder instanceof l){t=t.data.folder;i=1}else if(t.data&&t.data.bK){t=t.data.bK();i=1}else t instanceof u.bi&&(i=1);if(i){var s=t;while(s&&!s.is("li")){if(s==n.ib.eh)break;s=s.getParent()}if(s&&s.is("li")){var o=s.dS();o&&(r=n.ib.app.folders[o.slice(1)])}}else typeof t=="number"?r=n.ib.app.folders[t]:typeof t=="string"?r=n.ib.app.folders[s.dS().slice(1)]:t.data&&t.data.folder instanceof e.aL.Folder?r=t.data.folder:t.data&&t.data.folders&&t.data.folders.length&&t.data.folders[0]instanceof e.aL.Folder?r=t.data.folders[0]:t instanceof e.aL.Folder&&(r=t);return r};t.tools.mV=function(e,t){var n=e.type,r=e.getPath(),i=this.ib.app.id;t=t===undefined?e.isOpened:!!t+1-1;a.setCookie(i?"CKFinder_Path_"+i:"CKFinder_Path",encodeURIComponent(n+":"+r+":"+t))};n.prototype={select:function(e){this.bi.setStyles({height:e.$.offsetHeight+"px",top:e.$.offsetTop+"px",display:"block"})},mc:function(e){this.bi.setStyles({display:"none"})},ie6FixParentNode:function(){var e=this;e.kv||(e.kv=e.ib.app.document.getById("folders_view").getChild(1));return e.kv}};t.tools.hk=function(){var e=this.ib.oE();e.la||(e.la=new n(this.ib));return e.la};t.tools.kI=function(){var e=this;e.kW||(e.kW=p(c(e.ib.bn().getChild(1).$.childNodes,"ul")));return e.kW};t.tools.cT=function(e){var t=this;if(e){t.ew?t.ew.blur():t.ib.bn().setAttribute("tabindex",-1);t.ew=e;e.focus()}else{delete t.ew;t.ib.bn().setAttribute("tabindex",0)}}}function r(){a.extend(e.aL.Folder.prototype,{liNode:function(){var e=this;if(e.iC===undefined){var t=e.app.document.getById("f"+e.index);t&&(e.iC=t)}return e.iC},aNode:function(){var e=this;if(e.dM===undefined){var t=e.liNode();t&&(e.dM=p(c(t.$.childNodes,"a")))}return e.dM},expanderNode:function(){var e=this;if(e.iR===undefined){var t=e.liNode();t&&(e.iR=p(c(t.$.childNodes,"span")))}return e.iR},childrenRootNode:function(){var e=this;if(e.iM===undefined){var t=e.liNode();t&&(e.iM=p(c(t.$.childNodes,"ul")))}return e.iM},releaseDomNodes:function(){var e=this;delete e.iC;delete e.dM;delete e.iR;delete e.iM},focus:function(){var e=this.aNode();if(e){e.setAttribute("tabindex",0);e.focus()}},blur:function(){var e=this.aNode();e&&this.aNode().setAttribute("tabindex",-1)}})}function i(e){var n=e.hasChildren?"":" nochildren",r="f"+e.index,i=e.hasChildren?' onclick="void(0)"':"";return'<li id="'+r+'" role="presentation" class="openable'+n+'">'+'<span role="presentation" class="expander"'+i+"></span>"+'<a tabindex="-1" role="treeitem" href="javascript:void(0)" aria-level="'+e.hU()+'">'+a.htmlEncode(e.name)+"</a>"+(e.isBasket?"":t)+"<ul></ul>"+"</li>"}function o(e,t){var n="";for(var r=0;r<e.length;r++)n+=t(e[r]);return n}function f(e,t){for(var n in e)if(t(e[n])!==undefined)return e[n];return undefined}function c(e,t,n){return f(e,function(e){if(e.tagName&&e.tagName.toLowerCase()==t&&!(n--))return e})}function p(e){return new l(e)}var t='<a href="javascript:void(0)" class="dropdown"></a>';h.add("foldertree",{bM:["folder"],onLoad:function(){n();r()},bz:function(r){var i=this;r.on("themeSpace",function(t){t.data.space=="sidebar"&&(t.data.html+="<div id='folders_view' class='view widget' tabindex='0'><h2 id='folders_view_label'>"+r.lang.FoldersTitle+"</h2>"+"<div class='folder_tree_wrapper wrapper'>"+"<div class='selection'></div>"+"<ul class='folder_tree no_list' role='tree navigation' aria-labelledby='folders_view_label'>"+"</ul>"+"</div>"+"</div>")});r.on("uiReady",function(o){r.config.showContextMenuArrow||(t="");var u=r.document.getById("folders_view");u.hX();s.opera&&u.on("dblclick",function(e){e.data.preventDefault()});var a=e.aG.bz(r,"foldertree",i,u);if(r.bj){r.bj.lX(u);r.bj.kh(function(n,i){if(n.dS()=="folders_view")return undefined;var s=!0;if(r.aV){var o=r.aV.liNode().dS();if(n.dS()===o||n.getParent().dS()===o)s=!1}if(s){r.oW("requestSelectFolder",{folder:null});r.oW("requestSelectFolder",{folder:n})}var u=r.aV;if(u&&!r.config.readOnly){var f=u.acl,l=u.isRoot,c={kl:f.folderCreate?e.aS:e.aY,lI:!l&&f.folderRename?e.aS:e.aY,removeFolder:!l&&f.folderDelete?e.aS:e.aY};a.oW("beforeContextMenu",{bj:c,folder:u});return c}},u)}});r.bD("foldertreeFocus",{exec:function(e){var t=e.layout.pS(),n=e.aG["foldertree.foldertree"],r=n.tools.ew;t.focus();r&&r.focus()}})}})})();(function(){function f(t){return e.bs.substr(t*9%32,1)}function d(e){var t=p.reverse().join(""),n=e.tools.of(),r=n.setHtml;r.call(n,e.qX());e.bn().addClass("files_"+p[0])}function v(t){var n=[e.bF.substr(6,1),e.bF.substr(8,1)];!!e.ed&&n[0]!=f(e.ed.length+e.bs.indexOf(n[1]))&&d(t)}function y(){return 1==e.bs.indexOf(e.bF.substr(1,1))%5&&window.top[e.nd+"cation"][e.jG+"st"].toLowerCase().replace(e.hf,"").replace(e.hg,"")!=e.lS(e.ed)||e.bF.substr(3,1)!=e.bs.substr((e.bs.indexOf(e.bF.substr(0,1))+e.bs.indexOf(e.bF.substr(2,1)))*9%(e.bs.length-1),1)}function b(){function d(){var e=this,t=a.getCookie("CKFinder_Settings");if(!t||t.length!=5){e.app.config.defaultViewType&&(e.data().dA=e.app.config.defaultViewType);e.app.config.defaultSortBy&&(e.data().cN=e.app.config.defaultSortBy);e.app.config.defaultDisplayFilename!==undefined&&(e.data().display.filename=e.app.config.defaultDisplayFilename);e.app.config.defaultDisplayDate!==undefined&&(e.data().display.date=e.app.config.defaultDisplayDate);e.app.config.defaultDisplayFilesize!==undefined&&(e.data().display.filesize=e.app.config.defaultDisplayFilesize);return}e.data().dA=t.substr(0,1)=="L"?"list":"thumbnails";e._.nV=!0;var n=t.substr(1,1);switch(n){case"D":e.data().cN="date";break;case"S":e.data().cN="size";break;case"E":e.data().cN="extension";break;default:e.data().cN="filename"}e.data().display.filename=t.substr(2,1)=="N";e.data().display.date=t.substr(3,1)=="D";e.data().display.filesize=t.substr(4,1)=="S"}var n=e.aG.hS("filesview","filesview",{dA:"thumbnails",display:{filename:1,date:1,filesize:1},cN:"filename",files:[],hA:null,pq:0}),f="Please visit the <a href='http://cksource.com/ckfinder' target='_blank'>CKFinder web site</a> to obtain a valid license.",h="This is the DEMO version of CKFinder. "+f,p="Product license has expired. "+f;n.qX=function(){return h};n.dT.push(d);n.dT.push(function(){a.mH(this.bn())});n.bh("SelectAction",["dblclick","click","requestSelectAction","requestSelectThumbnailAction"],function(n){var r=this,i=this.tools.bZ(n);if(!i)return;if(!o||s.version>=9){var u=r.data();if(n.name=="click"){u.nQ||(u.nQ=[null,null]);u.nQ[1]=u.nQ[0];u.nQ[0]=i.name;return}if(n.name=="dblclick"&&u.nQ[1]!=i.name)return}else if(n.name=="click")return;var f=a.extend({},n.data,{file:i,jw:n.name=="requestSelectThumbnailAction"},!0);r.oW("beforeSelectAction",f,function(n,u){if(n)return;try{var f,l=!0,c=i.getUrl(),h=i.getThumbnailUrl(),p=[];if(u.jw){f=r.app.config.selectThumbnailActionFunction;!f&&r.app.config.thumbsDirectAccess&&(f=r.app.config.selectActionFunction)}else f=r.app.config.selectActionFunction;if(f){var d=u.jw?h:c,v={fileUrl:c,fileSize:i.size,fileDate:i.date};if(u.jw){v.thumbnailUrl=h;r.app.config.selectThumbnailActionFunction?v.selectThumbnailActionData=r.app.config.selectThumbnailActionData:v.selectActionData=r.app.config.selectActionData}else v.selectActionData=r.app.config.selectActionData;var m=r.tools.oO(),y;for(var b=0,w=m.length;b<w;b++){y=m[b].getUrl();p[b]={url:u.jw&&m[b].isImage()?m[b].getThumbnailUrl():m[b].getUrl(),data:a.extend({fileUrl:y,fileSize:m[b].size,fileDate:m[b].date},v.selectThumbnailActionData?{selectThumbnailActionData:v.selectThumbnailActionData}:{selectActionData:v.selectActionData})}}var E;switch(r.app.config.selectActionType){case"fckeditor":E=f(d);break;case"ckeditor":E=f(d,v);break;case"js":E=f.call(r.app.cg,d,v,p)}l=E!==!1}else r.app.execCommand("ViewFile");var S=r.app.document.getWindow();if(l&&r.app.cg.inPopup&&(!o&&!s.opera||S.$.top.location.href.match(/ckfinder.html/)||S.$.top.name=="CKFinderpopup")){var x=S.$.top.opener;S.$.top.close();x&&x.focus()}r.oW("successSelectAction",u);r.oW("afterSelectAction",u)}catch(T){T=e.ba(T);r.oW("failedSelectAction",u);r.oW("afterSelectAction",u);throw T}})});n.bh("KeyboardNavigation",["keydown","requestKeyboardNavigation"],function(n){var r=this,i=0;if(n.data&&n.data.bK){var s=n.data.bK();i=s.$==r.bn().$}var o=this.tools.bZ(n);if(!o&&!i)return;var u=a.extend({},n.data,{file:o},!0);this.oW("beforeKeyboardNavigation",u,function(s,u){var a=this;if(s)return;try{var f,l,c,h=n.data.db();if(h>e.dy&&a.app.config.selectMultiple){h-=e.dy;c=1}else if(h==e.bP+65&&a.app.config.selectMultiple){r.tools.dH()&&r.tools.dH().deselect();var p=r.data().cP[r.data().cN]||r.data().files;for(var d=0;d<p.length;d++)if(!p[d].isDeleted){f=p[d].rowNode();break}do r.tools.bZ(f).select(!0);while((f=f.dG())&&f.ge());r.tools.cR(r.tools.bZ(f),!0);n.data.preventDefault()}if(i&&h>=37&&h<=40){var p=r.data().cP[r.data().cN]||r.data().files;for(var d=0;d<p.length;d++)if(!p[d].isDeleted){a.tools.cR(p[d],c);break}}else{if(r.data().dA=="list"){if(h==38){n.data.preventDefault();f=o.rowNode();f.gE()&&a.tools.cR(a.tools.bZ(a.cf()),c)}else if(h==40){n.data.preventDefault();f=o.rowNode();f.ge()&&a.tools.cR(a.tools.bZ(f.dG()),c)}}else if(h==38){n.data.preventDefault();f=o.rowNode();if(f.gE()){l=f.cf();while(l&&l.$.offsetLeft!=f.$.offsetLeft)l=l.cf();l&&a.tools.cR(a.tools.bZ(l),c)}}else if(h==(r.app.lang.dir=="rtl"?37:39)){n.data.preventDefault();f=o.rowNode();f.ge()&&a.tools.cR(a.tools.bZ(f.dG()),c)}else if(h==40){n.data.preventDefault();f=o.rowNode();if(f.ge()){l=f.dG();while(l&&l.$.offsetLeft!=f.$.offsetLeft)l=l.dG();l&&a.tools.cR(a.tools.bZ(l),c)}}else if(h==(r.app.lang.dir=="rtl"?39:37)){n.data.preventDefault();f=o.rowNode();f.gE()&&a.tools.cR(a.tools.bZ(f.cf()),c)}if(!i&&o){h==13&&r.oW("requestSelectAction",{file:o});h==46&&r.app.execCommand("DeleteFile");h==113&&r.app.execCommand("RenameFile")}}a.oW("successKeyboardNavigation",u);a.oW("afterKeyboardNavigation",u)}catch(v){v=e.ba(v);a.oW("failedKeyboardNavigation",u);a.oW("afterKeyboardNavigation",u);throw v}})});n.bh("ProcessingFile",["requestProcessingFile"],function(n){var r=this.tools.bZ(n),i=a.extend({},n.data,{file:r},!0);this.oW("beforeProcessingFile",i,function(n,r){if(n)return;try{var i=r.file;if(!i)this.oW("failedProcessingFile",r);else{var s=i.rowNode();s&&s.addClass("processing");this.on("afterProcessingFile",function(e){if(e.data.file!=i)return;r.step=2;this.oW("successProcessingFile",r);this.oW("afterProcessingFile",r);e.removeListener()});r.step=1;this.oW("successProcessingFile",r)}}catch(o){this.oW("failedProcessingFile",r);this.oW("afterProcessingFile",r);throw e.ba(o)}})});n.bh("RepaintFile",["requestRepaintFile"],function(n){var r=this.tools.bZ(n),i=a.extend({},n.data,{file:r},!0);this.oW("beforeRepaintFile",i,function(n,r){var i=this;if(n)return;try{var s=r.file;if(!s)i.oW("failedRepaintFile",r);else{var o=s.filenameNode();o&&o.getHtml()!=a.htmlEncode(s.name)&&o.setHtml(a.htmlEncode(s.name));var u=s.rowNode();u&&u.removeClass("processing");i.oW("successRepaintFile",r)}i.oW("afterRepaintFile",r)}catch(f){i.oW("failedRepaintFile",r);i.oW("afterRepaintFile",r);throw e.ba(f)}})});o&&s.ie6Compat&&!s.ie7Compat&&!s.ie8&&n.bh("HoverFile",["mouseover","mouseout"],function(n){if(this.data().dA!="list")return;var r=this.tools.bZ(n);if(!r)return;var i=a.extend({},n.data,{bi:r.rowNode()},!0);this.oW("beforeHoverFile",i,function(r,i){var s=this;if(r)return;try{if(n.name=="mouseover"){s.data().ho&&s.data().ho.removeClass("hover");i.bi.addClass("hover");s.data().ho=i.bi}else{s.data().ho.removeClass("hover");delete s.data().ho}s.oW("successHoverFile",i);s.oW("afterHoverFile",i)}catch(o){s.oW("failedHoverFile",i);s.oW("afterHoverFile",i);throw e.ba(o)}})});n.bh("RenderThumbnails",["requestRenderThumbnails"],function(t){var n=this.hF.files;if(!n[0])return;var r=function(e){var t=0;while(e){t+=e.offsetTop;e=e.offsetParent}return t},i=this.eh.$.offsetHeight,s=this.eh.$.scrollTop,o=r(this.eh.$),u=this.app.config.thumbnailDelay,a=this.app.config.showContextMenuArrow?1:0;for(var f=0,l=0,c=n.length;f<c;f++){var h=this.hF.files[f].aNode().getChild([a,0]);if(h.$.style.backgroundImage)continue;var p=r(h.$),d=h.$.offsetHeight;if(p<i+s+o&&p>=s){var v=this.hF.files[f].getThumbnailUrl(!0);v&&function(){var e=h,t=v;setTimeout(function(){try{e.$.style.backgroundImage='url("'+t+'")'}catch(n){}},u*l++)}()}}});n.bh("RenderFiles",["requestRenderFiles"],function(r){var i=this.data(),s,o=r.data&&(!!r.data.ma||!!r.data.lK),u=r.data&&r.data.ma,f;if(!h)return;if(r.data&&r.data.files){this.tools.kR();for(f=0;f<r.data.files.length;f++)i.files[f]=r.data.files[f];s=i.files;o=1;this.data().folder=r.data.folder}var l=this.data().folder;if(u&&u!=l)return;if(o||!i.cP||i.pq)i.cP={};d.call(this);var c=l.type;if(!this._.nV){this.app.config["defaultViewType_"+c]&&(i.dA=this.app.config["defaultViewType_"+c]);this.app.config["defaultSortBy_"+c]&&(i.cN=this.app.config["defaultSortBy_"+c]);this.app.config["defaultDisplayFilename_"+c]!==undefined&&(i.display.filename=this.app.config["defaultDisplayFilename_"+c]);this.app.config["defaultDisplayDate_"+c]!==undefined&&(i.display.date=this.app.config["defaultDisplayDate_"+c]);this.app.config["defaultDisplayFilesize_"+c]!==undefined&&(i.display.filesize=this.app.config["defaultDisplayFilesize_"+c])}if(!i.files.length)s=i.files;else if(i.cN=="date"&&i.cP.date)s=i.cP.date;else if(i.cN=="size"&&i.cP.size)s=i.cP.size;else if(i.cN=="extension"&&i.cP.extension)s=i.cP.extension;else if(i.cN=="filename"&&i.cP.filename)s=i.cP.filename;else{e.log("[FILES VIEW] Sorting files");var p=i.files;s=[];for(f=0;f<p.length;f++)if(!p[f].isDeleted){var v=s.length;p[f].index=v;s[v]=p[f]}i.files.length=0;for(f=0;f<s.length;f++)i.files[f]=s[f];s=[];for(f=0;f<i.files.length;f++){s[f]=i.files[f];s[f].releaseDomNodes()}var m=function(e,t){var n=e.name.toLowerCase(),r=t.name.toLowerCase();return n<r?-1:n>r?1:0};if(i.cN=="date"){s.sort(function(e,t){return e.date>t.date?-1:e.date<t.date?1:0});i.cP.date=s}else if(i.cN=="size"){s.sort(function(e,t){return e.size>t.size?-1:e.size<t.size?1:0});i.cP.size=s}else if(i.cN=="extension"){s.sort(function(e,t){return e.ext>t.ext?1:e.ext<t.ext?-1:m(e,t)});i.cP.extension=s}else{s.sort(m);i.cP.filename=s}}var g=a.extend({eu:1,dA:this.data().dA,display:this.data().display},r.data,{files:s},!0);this.oW("beforeRenderFiles",g,function(r,s){if(r||h.charAt(2<<2)!="t")return;t=e.bF.substr(7,1);try{for(var o=0;o<s.files.length;o++)s.files[o].releaseDomNodes();this.tools.cR();this.oW("requestAddFiles",s,function(e){e||(i.hA=s.dA)});this.oW("successRenderFiles",s);this.oW("afterRenderFiles",s)}catch(u){this.oW("failedRenderFiles",s);this.oW("afterRenderFiles",s);throw e.ba(u)}});if(!this._.initialized){var y=this.eh,b=this;y.on("scroll",function(){b.hF.dA=="thumbnails"&&this.oW("requestRenderThumbnails")},this);this.app.on("afterRepaintLayout",function(){b.hF.dA=="thumbnails"&&setTimeout(function(){b.oW("requestRenderThumbnails")},0)});this._.initialized=!0}else this.hF.dA=="thumbnails"&&this.oW("requestRenderThumbnails")});n.dT.push(function(e,t){t=this;e.on("afterCommandExecDefered",function(e){if(!e.data)return;var n=e.data.name,r;if(n=="RenameFile"){var i=e.data.file,s=t.tools.oO().length>1;r=i&&i.folder;if(t.tools.currentFolder()!=r)return;t.oW("requestRenderFiles",{folder:r,lK:1},function(n){if(n)return;i.deselect(!0);t.oW("requestSelectFile",{file:e.data.file,multiple:s},function(){if(n)return;i.focus(s)})})}else if(n=="RemoveFiles"){r=e.data.folder;if(t.tools.currentFolder()!=r)return;t.tools.cR();t.bn().focus();t.oW("requestRenderFiles",{folder:r,lK:1})}})});n.bh("SelectFile",["click","requestSelectFile"],function(n){var r=this.tools.bZ(n),i=n.name=="click",s=n.data&&n.data.multiple&&this.app.config.selectMultiple;if(!(h.length>>4))return;if(i&&n.data.db()>=e.bP){n.data.preventDefault();s=(n.data.$.ctrlKey||n.data.$.metaKey)&&this.app.config.selectMultiple}if(i&&n.data.bK().hasClass("dropdown")){n.jN.oW("contextmenu",n.data);n.cancel();return}var o=a.extend({},n.data,{file:r},!0);this.oW("beforeSelectFile",o,function(n,r){var o=this;if(n)return;var u=r.file;try{if(o.tools.dH()&&!s){var a=o.tools.oO();for(var f=0;f<a.length;f++)a[f].rowNode()&&a[f].rowNode().removeClass("selected");o.data().nY=[]}if(u&&s&&u.rowNode().hasClass("selected")&&o.tools.dH()){var a=o.tools.oO(),l=[];for(var f=0;f<a.length;f++)if(a[f].isSameFile(u))a[f].rowNode().removeClass("selected");else{a[f].rowNode().hasClass("selected")||a[f].rowNode().addClass("selected");l.push(a[f])}o.data().nY=l;o.data().cG.isSameFile(u)&&(o.data().cG=o.data().nY[l.length-1]);i&&o.tools.cR(o.tools.dH(),!0,l.length>1)}else if(u){u.rowNode().addClass("selected");o.data().nY||(o.data().nY=[]);o.data().cG=u;o.data().nY.push(u);i&&o.tools.cR(u,s,s)}else if(o.tools.dH()&&!s){o.data().cG=null;o.data().nY=[];o.tools.cR()}o.oW("successSelectFile",r);o.oW("afterSelectFile",r)}catch(c){o.oW("failedSelectFile",r);o.oW("afterSelectFile",r);throw e.ba(c)}})});n.bh("AddFiles",["requestAddFiles"],function(i){var s=a.extend({eu:0,view:"thumbnails",mj:null},i.data,{files:i.data.file?[i.data.file]:i.data.files},!0);this.oW("beforeAddFiles",s,function(i,s){if(i)return;try{var u=this,f=u.bn(),l=u.data().hA,d=0,v,m;f.removeClass("files_message");if(y()){s.files.length&&(s.mj=h);d=1}if(s.dA=="list"){this.data().kQ||(this.data().kQ=a.bind(this.tools.qc,this.tools));f.removeClass("files_thumbnails");f.addClass("files_details");v=C(s.files,this.data().kQ);m=this.tools.fF();var b=this.tools.kj();l&&l!="list"&&this.tools.lP().setHtml("");if(o){b&&l&&l=="list"&&!s.eu&&(v=b.getHtml()+v);m&&m.remove();if(v){var w=c[0]+this.tools.lz()+c[1]+v+c[2]+c[3];f.appendHtml(w)}this.tools.releaseDomNodes(["detailsContentNode","detailsRootNode"])}else v?s.eu?this.tools.fF().setHtml(this.tools.lz()+c[1]+v+c[2]):b.appendHtml(v):m.setHtml("")}else{f.removeClass("files_details");f.addClass("files_thumbnails");var E=this.data().display;v=C(s.files,function(e){var t="r"+e.index,n=[];n.push('<a id="',t);n.push('" class="file_entry" tabindex="-1" role="listiem presentation" href="javascript:void(0)" title="',a.htmlEncode(e.name).replace('"',"&quot;"),'" aria-labelledby="',t);n.push('_label" aria-describedby="',t,'_details" style="width: '+(u.app.config.thumbsWidth+10)+'px">');n.push(r,'<div class="image"><div role="img" style="width: '+u.app.config.thumbsWidth+"px; height: "+u.app.config.thumbsHeight+'px"></div></div>');E.filename&&n.push('<h5 id="',t,'_label">',a.htmlEncode(e.name),"</h5>");n.push('<span id="'+t+'_details" class="details" role="list presentation">');E.date&&n.push('<span role="listitem" class="extra">',e.dateF,"</span>");E.filesize&&n.push('<span role="listitem" aria-label="Size">',a.formatSize(e.size,u.app.lang,!0),"</span>");n.push("</span></a>");return n.join("")});m=this.tools.lP();if(l&&l=="list"){var S=this.tools.fF();S&&o?S.remove():S&&S.setHtml("")}s.eu?m.setHtml(v):m.appendHtml(v)}if(!d&&(!t||e.bs.indexOf(t)%8<5)){s.mj=p;d=1}if((s.eu&&!v||d)&&s.mj){f.addClass("files_message");this.tools.of().setHtml(s.mj)}!t&&!d&&m.setHtml("");this.oW("successAddFiles");this.oW("afterAddFiles")}catch(x){this.oW("failedAddFiles");this.oW("afterAddFiles");throw e.ba(x)}})});n.bh("ShowFolderFiles",["requestShowFolderFiles"],function(n){var r=this,i=e.aG.bX["foldertree.foldertree"].tools.cq(n),o=a.extend({},n.data,{folder:i},!0);this.oW("beforeShowFolderFiles",o,function(i,o){if(i)return;this.tools.dH()&&this.oW("requestSelectFile");this.app.cS("refresh").bR(e.aY);try{var u=o.folder,a;if(!u.acl.folderView){r.app.msgDialog("",r.app.lang.Errors[103]);throw"[CKFINDER] No permissions to view folder."}n.data.ib=this;this.data().folder=u;r.tools.kR();this.oW("requestRenderFiles",{eu:1,mj:r.app.lang.FilesLoading});this.app.connector.sendCommand("GetFiles",a,function(t){r.app.cS("refresh").bR(e.aS);if(r.app.aV!=u){r.oW("failedShowFolderFiles",o);r.oW("afterShowFolderFiles",o);return}if(t.checkError()||y.toString().length<200)return;r.tools.kR();var n,i=t.selectNodes("Connector/Files/File");for(var a=0;a<i.length;a++){var f=i[a].attributes.getNamedItem("date").value,l=i[a].attributes.getNamedItem("name").value,c=r.tools.rg(new e.aL.File(l,parseInt(i[a].attributes.getNamedItem("size").value,10),i[a].attributes.getNamedItem("thumb")?i[a].attributes.getNamedItem("thumb").value:!1,f,r.app.lB(f.substr(6,2),f.substr(4,2),f.substr(0,4),f.substr(8,2),f.substr(10,2)),u));o.mw&&l==o.mw&&(n=c)}r.oW("requestRenderFiles",{mj:r.app.lang.FilesEmpty});if(n){r.app.oW("requestSelectFile",{file:n,scrollTo:1});setTimeout(function(){n.aNode().$.scrollIntoView(1);r.app.layout.mB().getFirst().$.scrollIntoView(0)},s.opera?500:100)}r.oW("successShowFolderFiles",o);r.oW("afterShowFolderFiles",o);v(r)},u.type,u)}catch(f){this.oW("failedShowFolderFiles",o);this.oW("afterShowFolderFiles",o);throw e.ba(f)}})});n.tools.bZ=function(t){var n=this,r,i=0;if(t.data&&t.data.file instanceof l){t=t.data.file;i=1}else if(t.data&&t.data.bK){t=t.data.bK();i=1}else t instanceof u.bi&&(i=1);if(i){var s=t;while(s&&(!s.is("a")||!s.hasAttribute("id"))&&!s.is("tr")){if(s==n.ib.eh)break;s=s.getParent()}if(s){var o=s.dS();o&&(s.is("a")||s.is("tr"))&&(r=n.ib.data().files[s.dS().slice(1)])}}else typeof t=="number"?r=n.ib.data().files[t]:typeof t=="String"?r=n.ib.data().files[s.dS().slice(1)]:t.data&&t.data.file&&t.data.file instanceof e.aL.File?r=t.data.file:t.data&&t.data.files&&t.data.files.length&&t.data.files[0]&&t.data.files[0]instanceof e.aL.File?r=t.data.files[0]:t instanceof e.aL.File&&(r=t);return r};n.tools.kR=function(){var e=this.ib.data();e.files.length=0;e.cP={}};n.tools.oR=function(e,t){var n=e.thumb,r=e.name,i=this.ib.app,s=r.match(i.rQ.jf);return s&&(s=s[0])&&i.rQ.jh.test(s)?i.fh+"images/icons/"+(t?"32":"16")+"/"+s.toLowerCase()+".gif":i.fh+"images/icons/"+(t?"32":"16")+"/default.icon.gif"};n.tools.rg=function(e){var t=this.ib.data().files,n=t.push(e);e.index=--n;e.app=this.ib.app;return e};n.tools.lP=function(e){var t=this;t.jl||(t.jl=t.ib.bn().getChild(1));return t.jl};n.tools.kj=function(e){var t=this;if(t.iJ===undefined){var n=t.fF();t.iJ=n?O(A(n.$.childNodes,"tbody")):null}return t.iJ};n.tools.sn=function(e){var t=this;if(t.kT===undefined){var n=t.fF();t.kT=n?O(A(n.$.childNodes,"thead")):null}return t.kT};n.tools.fF=function(e){var t=this;t.iO===undefined&&(t.iO=O(A(t.ib.bn().$.childNodes,"table")));return t.iO};n.tools.of=function(e){var t=this;t.iF||(t.iF=t.ib.bn().getChild(0));return t.iF};n.tools.releaseDomNodes=function(e){var t=this;t.jl=undefined;t.iO=undefined;t.iJ=undefined;t.iF=undefined};n.tools.lz=function(){var e=this,t=e.ib.data().display,n=[];n.push('<td class="name">'+e.ib.app.lang.SetDisplayName+"</td>");t.filesize&&n.push("<td>"+e.ib.app.lang.SetDisplaySize+"</td>");t.date&&n.push("<td>"+e.ib.app.lang.SetDisplayDate+"</td>");var r=n.length-1;r?n[r]='<td class="last">'+n[r].substr(4):n[r]='<td class="last '+n[r].substr(11);return"<thead><tr><td>&nbsp;</td>"+n.join("")+"</tr>"+"</thead>"};n.tools.qc=function(e){var t=this.oR(e),n="r"+e.index,r=this.ib.data().display,s=[];s.push('<td class="name">'+i+'<a tabindex="-1">'+(r.filename?a.htmlEncode(e.name):"")+"</a>"+"</td>");r.filesize&&s.push("<td>"+a.formatSize(e.size,this.ib.app.lang,!0)+"</td>");r.date&&s.push("<td>"+e.dateF+"</td>");var o=s.length-1;o?s[o]='<td class="last">'+s[o].substr(4):s[o]='<td class="last '+s[o].substr(11);return'<tr id="'+n+'">'+'<td class="image">'+'<img src="'+t+'" alt="img alt" />'+"</td>"+s.join("")+"</tr>"};n.tools.dH=function(){var e=this.ib.data();if(e.cG)return e.cG.isDeleted?e.cG=null:e.cG};n.tools.oO=function(e){var t=this.ib.data(),n=[];if(t.nY){for(var r=0;r<t.nY.length;r++)t.nY[r]&&!t.nY[r].isDeleted&&n.push(t.nY[r]);if(e){var i=n,s={},n=[];for(r=0;r<i.length;r++)if(!(i[r].name in s)){n.push(i[r]);s[i[r].name]=1}}}return t.nY=n};n.tools.currentFolder=function(){return this.ib.data().folder};n.tools.cR=function(e,t,n){var r=this;if(e){r.iS?r.iS.blur():r.ib.bn().setAttribute("tabindex",-1);r.iS=e;e.focus(t,n)}else{delete r.iS;r.ib.bn().setAttribute("tabindex",0)}};n.tools.downloadFile=function(e,t){var n=e.getById("downloadIframe");if(!n){n=e.createElement("iframe");n.setAttribute("id","downloadIframe");n.setStyle("display","none");e.bH().append(n)}n.setAttribute("src",t)}}function w(e,t,n,r,i,s){var o={},u=0,f=t.files,l=[t.destination];for(var c=0,h=t.files.length;c<h;c++){if(t.destination==f[c].folder)continue;o["files["+u+"][name]"]=f[c].name;o["files["+u+"][type]"]=f[c].folder.type;o["files["+u+"][folder]"]=f[c].folder.getPath();o["files["+u+"][options]"]=i&&i[c]||"";u++;n&&!r&&l.push(f[c].folder)}if(!r){s||(s=function(){});s=a.override(s,function(t){return function(){var n=e.aG["filesview.filesview"],r=n.tools.currentFolder();for(var i=0,s=l.length;i<s;i++)if(l[i]==r){e.oW("requestSelectFolder",{folder:r});break}return t}})}if(!u){s&&s();return}var p=e.connector,d=0,v=n?"MoveFiles":"CopyFiles";p.sendCommandPost(v,null,o,function(o){var u=o.getErrorNumber(),l=[],c=[],h,v,m;for(h=0,v=f.length;h<v;h++)c.push(f[h]);if(u==p.ERROR_COPY_FAILED||u==p.ERROR_MOVE_FAILED){d=1;var g=o.selectNodes("Connector/Errors/Error"),y=parseInt(o.selectSingleNode("Connector/"+(n?"MoveFiles/@moved":"CopyFiles/@copied")).value,10),b=0,x=[],T,N,C,k;for(h=0,v=g.length;h<v;h++){T=g[h].getAttribute("code");T==p.ERROR_ALREADYEXIST?b=1:x.push([g[h].getAttribute("name"),e.lang.Errors[T]]);for(N=0,C=c.length;N<C;N++)if((k=c[N])&&k.name==g[h].getAttribute("name")&&k.folder.getPath()==g[h].getAttribute("folder")&&k.folder.type==g[h].getAttribute("type")){g[h].getAttribute("code")==p.ERROR_ALREADYEXIST&&l.push(k);delete c[N];break}}for(h=0,v=x.length;h<v;h++)x[h]=e.lang.FileError.replace("%s",x[h][0]).replace("%e",x[h][1]);if(!y&&!b)e.msgDialog("",e.lang.Errors[n?300:301]+"<br /><br />"+S(x),s||null);else if(x.length==c.length-y){m=e.lang.OperationCompletedErrors+" "+e.lang[n?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",y)+"<br /><br />";m+=e.lang[n?"MoveFailedList":"CopyFailedList"].replace("%s",S(x));e.msgDialog("",m,s||null)}var L=E(e,c,t.fileCallback);b&&e.cg.openDialog("moveFileExists",function(r){var i=arguments.callee;m="";x.length&&(m+=e.lang.OperationCompletedErrors+" ");m+=y?e.lang[n?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",y):"";x.length&&(m+=(m?"<br /><br />":"")+e.lang[n?"MoveFailedList":"CopyFailedList"].replace("%s",S(x)));m&&(m+="<br /><br />");var o=e.lang.ErrorMsg.FileExists;o=o.replace("%s",l[0]);m+="<strong>"+o+"</strong>";r.show();r.getContentElement("tab1","msg").getElement().setHtml(m);r.on("ok",function(u){u.removeListener();var f=r.getContentElement("tab1","option").getValue(),c=r.getContentElement("tab1","remember").getValue(),h;switch(f){case"autorename":case"overwrite":h=[f];break;case"skip":if(!c){l.shift();l.length&&setTimeout(function(){e.cg.openDialog("moveFileExists",i)},0)}else s&&s();return}if(c)for(var p=1,d=l.length;p<d;p++)h.push(h[0]);w(e,a.extend({files:l},t),n,1,h,s)})});if(r)return}else o.checkError()&&(d=1);if(d){t.errorCallback&&t.errorCallback();return}var L=E(e,c,t.fileCallback);if(L){m=e.lang.OperationCompletedSuccess+"<br />"+e.lang[n?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",L);e.msgDialog("",m,s||null)}else s&&s()},t.destination.type,t.destination)}function E(e,t,n){var r=0,i;for(var s=0,o=t.length;s<o;s++){if(!(i=t[s]))continue;r++;n&&n(e,i)}return r}function S(e){return'<ul class="cke_files_list'+(e.length>3?" cke_files_list_many":"")+'"><li>'+e.join("</li><li>")+"</li></ul>"}function x(t,r){if(!t||t.length===0)throw new e.dU("name_empty",r.lang.ErrorMsg.pg);if(n.iz.test(t))throw new e.dU("name_invalid_chars",r.lang.ErrorMsg.oP);return!0}function T(e,t){var n={},r=t[0].folder,i=r.getPath();for(var s=0,o=t.length;s<o;s++){n["files["+s+"][name]"]=t[s].name;n["files["+s+"][type]"]=r.type;n["files["+s+"][folder]"]=i;e.oW("requestProcessingFile",{file:t[s]})}e.connector.sendCommandPost("DeleteFiles",null,n,function(n){var i={},s,o;if(n.getErrorNumber()==302){var u=t.length-parseInt(n.selectSingleNode("Connector/DeleteFiles/@deleted").value,10);if(!u){n.checkError();return}var a=n.selectNodes("Connector/Errors/Error");for(s=0,o=a.length;s<o;s++)i[a[s].attributes.getNamedItem("name").value]=1;e.skippedFilesDialog(null,a)}else if(n.checkError())return;for(s=0,o=t.length;s<o;s++)if(!i[t[s]]){t[s].isDeleted=!0;t[s].releaseDomNodes()}e.oW("afterCommandExecDefered",{name:"RemoveFiles",folder:r})},r.type,r)}function N(){a.extend(e.aL.Folder.prototype,{getFiles:function(t){var n=this,r=this.app;r.connector.sendCommand("GetFiles",{},function(i){var s=[],o=i.selectNodes("Connector/Files/File");for(var u=0;u<o.length;u++){var a=o[u].attributes.getNamedItem("date").value;s.push(new e.aL.File(o[u].attributes.getNamedItem("name").value,parseInt(o[u].attributes.getNamedItem("size").value,10),o[u].attributes.getNamedItem("thumb")?o[u].attributes.getNamedItem("thumb").value:!1,a,r.lB(a.substr(6,2),a.substr(4,2),a.substr(0,4),a.substr(8,2),a.substr(10,2)),n))}t&&t.call(n,s)},n.type,n)},showFiles:function(e){this.app.oW("requestShowFolderFiles",{folder:this,mw:e})}})}function C(e,t){if(!e)return undefined;var n=[];for(var r=0;r<e.length;r++)n.push(t(e[r]));return n.join("")}function L(e,t){for(var n in e)if(t(e[n])!==undefined)return e[n];return undefined}function A(e,t,n){return L(e,function(e){if(e.tagName&&e.tagName.toLowerCase()==t&&!(n--))return e})}function O(e){return e?new l(e):null}var t,n={fX:/[^\.]+$/,iz:/[\\\/:\*\?"<>\|]/},r='<span class="dropdown"></span>',i='<a href="javascript:void(0)" class="dropdown"></a>',c=["<table class='files_details' role='region' aria-controls='status_view'>","<tbody>","</tbody>","</table>"],p=["Node","message"];h.add("filesview",{bM:["foldertree"],onLoad:function(){N();b();e.dialog.add("moveFileExists",function(e){return{title:e.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:"tab1",label:"",title:"",style:s.ie7Compat?"height:auto":"",expand:!0,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",widths:["70%","30%"],html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{type:"radio",id:"option",label:e.lang.common.makeDecision
,"default":"autorename",items:[[e.lang.FileAutorename,"autorename"],[e.lang.FileOverwrite,"overwrite"],[e.lang.common.skip,"skip"]]}]},{type:"hbox",className:"cke_dialog_remember_decision",children:[{type:"checkbox",id:"remember",label:e.lang.common.rememberDecision}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}})},bz:function(s){var u=this;s.rQ.jh=new RegExp("^("+s.config.fileIcons+")$","i");s.rQ.rO=/^(jpg|gif|png|bmp|jpeg)$/i;s.rQ.jf=n.fX;s.on("themeSpace",function(t){if(t.data.space=="mainMiddle"){var n="";o||(n=c[0]+c[3]);t.data.html+="<div id='files_view' class='view widget files_thumbnails' aria-live='polite' role='main' tabindex='0' aria-controls='status_view'><h4 class='message_content'></h4><div class='files_thumbnails fake no_list' role='list'></div>"+n+"</div>"}});s.on("uiReady",function(n){if(!s.config.showContextMenuArrow){r="";i=""}var o=s.document.getById("files_view");o.hX();var f=e.aG.bz(s,"filesview",u,o);s.config.selectMultiple&&o.on("click",function(e){if(!e.data.$.shiftKey)return;var t=f.tools.dH(),n=f.tools.bZ(e),r=!t;if(!n)return;t&&(t.rowNode().$.offsetTop<n.rowNode().$.offsetTop?r=1:f.data().dA!="list"&&t.rowNode().$.offsetTop==n.rowNode().$.offsetTop&&(r=t.rowNode().$.offsetLeft<n.rowNode().$.offsetLeft));var i=n.rowNode(),s;while(i=r?i.cf():i.dG()){s=f.tools.bZ(i);if(t&&s.isSameFile(t))break;s.select(!0)}f.tools.cR(n,!0);e.cancel();e.data.preventDefault()},null,null,1);s.bD("ViewFile",{exec:function(e){var t=f.data().cG;if(t){if(e.oW("launchGallery",{selected:t,files:f.data().files}).bx===!0)return;var n=window.screen.width*.8,r=window.screen.height*.7,i="menubar=no,location=no,status=no,toolbar=no,scrollbars=yes,resizable=yes";i+=",width="+n;i+=",height="+r;i+=",left="+(window.screen.width-n)/2;i+=",top="+(window.screen.height-r)/2;var s=e.cg.inPopup?e.document.getWindow().$.parent:window;s.open(t.folder.getUrl()+encodeURIComponent(t.name),"_blank",i)||e.msgDialog("",e.lang.ErrorMsg.oo)}}});s.bD("DownloadFile",{exec:function(e){var t=f.data().cG;if(t){var n;e.config.directDownload?n=t.folder.getUrl()+t.name+"?download":n=e.connector.composeUrl("DownloadFile",{FileName:t.name},t.folder.type,t.folder);f.tools.downloadFile(e.document,n)}}});s.bD("RenameFile",{readOnly:!1,exec:function(t){var n=function(n,i){try{r.rename(i)}catch(s){if(!(s instanceof e.dU))throw s;t.msgDialog("",s.message)}},r=f.data().cG;r&&r.folder.acl.fileRename&&t.hs(t.lang.RenameDlgTitle,t.lang.FileRename,r.name,function(e){e=a.trim(e);if(e){var i=e.match(t.rQ.jf)[0];i.toLowerCase()!=r.ext.toLowerCase()?t.fe("",t.lang.FileRenameExt,function(){n(r,e)}):n(r,e)}})}});s.bD("DeleteFile",{readOnly:!1,exec:function(e){var t=f.tools.oO(!0);if(!t||t.length==0||!t[0].folder.acl.fileDelete)return;e.fe("",t.length==1?e.lang.FileDelete.replace("%1",t[0].name):e.lang.FilesDelete.replace("%1",t.length),function(){T(e,t)})}});s.bD("copyFilesToFolder",{readOnly:!1,exec:function(e,t){t.files||(t.files=f.tools.oO());if(!t.files.length||!t.destination||!t.destination.acl.fileUpload)return;w(e,t,0,0,[],t.callback)}});s.bD("moveFilesToFolder",{readOnly:!1,exec:function(e,t){t.files||(t.files=f.tools.oO());if(!t.files.length||!t.destination||!t.destination.acl.fileUpload||!t.files[0].folder.acl.fileDelete)return;w(e,t,1,0,[],t.callback)}});if(s.eU){s.dZ("file0",90);s.dZ("file1",100);s.dZ("file2",110);s.dZ("file3",120);s.eU({selectFile:{label:s.lang.Select,onClick:function(){var e=s.aG["filesview.filesview"],t=e.tools.dH();t&&e.oW("requestSelectAction",{file:t})},group:"file0"},nA:{label:s.lang.SelectThumbnail,onClick:function(){var e=s.aG["filesview.filesview"],t=e.tools.dH();t&&e.oW("requestSelectThumbnailAction",{file:t})},group:"file0"},viewFile:{label:s.lang.View,command:"ViewFile",group:"file1"},downloadFile:{label:s.lang.Download,command:"DownloadFile",group:"file1"},renameFile:{label:s.lang.Rename,command:"RenameFile",group:"file2"},deleteFile:{label:s.lang.Delete,command:"DeleteFile",group:"file3"},deleteFiles:{label:s.lang.DeleteFiles,command:"DeleteFile",group:"file3"}})}if(s.bj){s.bj.lX(o);s.bj.kh(function(n,r){var i=f.tools.bZ(n);if(i){i.rowNode().hasClass("selected")?f.data().cG=i:s.oW("requestSelectFile",{file:i});var o=i.folder.acl,u={viewFile:o.fileView?e.aS:e.aY,downloadFile:o.fileView?e.aS:e.aY};if(!s.config.readOnly){u.renameFile=o.fileRename?e.aS:e.aY;u[f.tools.oO().length>1?"deleteFiles":"deleteFile"]=o.fileDelete?e.aS:e.aY}s.config.selectActionFunction&&(u.selectFile=o.fileView?e.aS:e.aY);i.isImage()&&!s.config.disableThumbnailSelection&&(s.config.selectThumbnailActionFunction||s.config.thumbsDirectAccess&&s.config.selectActionFunction)&&(u.nA=o.fileView?e.aS:e.aY);f.oW("beforeContextMenu",{bj:u,file:i,folder:f.data().folder});return u}},o)}});s.bD("filesviewFocus",{exec:function(e){var t=e.layout.pn(),n=e.aG["filesview.filesview"],r=n.tools.dH();t.focus();r&&r.focus()}})}});e.aL.File=function(e,t,r,i,s,o){var u=this;u.index=null;u.app=null;u.name=e;u.ext=e.match(n.fX)[0];u.nameL=e.toLowerCase();u.size=t;u.thumb=r;u.date=i;u.dateF=s;u.folder=o;u.isDeleted=!1};e.aL.File.prototype={rename:function(e){x(e,this.app);var t=this;if(t.name==e){t.app.oW("afterCommandExecDefered",{name:"RenameFile",file:t});return}t.app.oW("requestProcessingFile",{file:t});t.app.connector.sendCommandPost("RenameFile",{fileName:t.name,newFileName:e},null,function(e){if(e.checkError()){t.app.oW("requestRepaintFile",{file:t});return}t.name=e.selectSingleNode("Connector/RenamedFile/@newName").value;t.nameL=t.name.toLowerCase();t.ext=t.name.match(n.fX)[0];t.thumb=0;t.app.oW("afterCommandExecDefered",{name:"RenameFile",file:t})},t.folder.type,t.folder)},remove:function(){T(this.app,[this])},select:function(e){this.app.oW("requestSelectFile",{file:this,multiple:e})},deselect:function(e){e?this.select(!0):this.app.oW("requestSelectFile")},toString:function(){return this.name},isImage:function(){return this.app.rQ.rO.test(this.ext)},isSameFile:function(e){var t=this;return(t.name==e.name||t.index==e.index)&&t.folder.getPath()==e.folder.getPath()&&t.folder.type==e.folder.type},getUrl:function(){return this.folder.getUrl()+encodeURIComponent(this.name)},rowNode:function(){var e=this;e.je||(e.je=e.app.document.getById("r"+e.index));return e.je},getThumbnailUrl:function(e){var t=this,n=t.thumb,r=t.name,i=t.app,o=r.match(i.rQ.jf);if(o&&(o=o[0])){if(i.config.thumbsEnabled&&i.rQ.rO.test(o)){var u=encodeURIComponent(t.date+"-"+t.size);if(n&&i.config.thumbsDirectAccess)return i.config.thumbsUrl+t.folder.type+t.folder.getPath()+encodeURIComponent(r)+(e?"?hash="+i.getResourceType(t.folder.type).hash+"&fileHash="+u:"");var a={FileName:r};e&&(a.fileHash=u);return i.connector.composeUrl("Thumbnail",a,t.folder.type,t.folder)}if(i.config.useNativeIcons&&s.gecko)return"moz-icon://."+o.toLowerCase()+"?size=32";if(i.rQ.jh.test(o))return i.fh+"images/icons/32/"+o.toLowerCase()+".gif"}return i.fh+"images/icons/32/default.icon.gif"},filenameNode:function(){var e=this;if(e.ht===undefined){var t=e.rowNode();t&&(t.is("a")?e.ht=O(A(t.$.childNodes,"h5")):e.ht=O(A(e.aNode().$.childNodes,"h5")))}return e.ht},aNode:function(){var e=this;if(e.dM===undefined){var t=e.rowNode();if(t)if(t.is("a"))e.dM=t;else{var n=A(t.$.childNodes,"td",1);e.dM=O(A(n.childNodes,"a"))}}return e.dM},focusNode:function(){return this.aNode()},releaseDomNodes:function(){this.je=undefined;this.dM=undefined;this.ht=undefined},focus:function(e,t){!t&&this.select(e);var n=this.focusNode();n.setAttribute("tabindex",0);n.focus()},blur:function(){this.aNode().setAttribute("tabindex",-1)}}})();(function(){function t(e,t){var n=[];if(!t)return e;for(var r in t)n.push(r+"="+encodeURIComponent(t[r]));return e+(e.indexOf("?")!=-1?"&":"?")+n.join("&")}function n(e){e+="";var t=e.charAt(0).toUpperCase();return t+e.substr(1)}function r(e){var t=this,n=t.getDialog(),r=n.getParentApi();r._.rb=t;return n.getContentElement(t["for"][0],t["for"][1]).getInputElement().$.value?n.getContentElement(t["for"][0],t["for"][1]).vy()?!0:!1:!1}function i(e,n,r){var i=r.params||{};if(!r.url)return;i.CKFinderFuncNum=e._.ra;i.langCode||(i.langCode=e.langCode);n.action=t(r.url,i);n.filebrowser=r}function s(e,n,o,u){var a,f;for(var l in u){a=u[l];(a.type=="hbox"||a.type=="vbox")&&s(e,n,o,a.children);if(!a.filebrowser)continue;if(a.type=="fileButton"&&a["for"]){if(typeof a.filebrowser=="string"){var c={target:a.filebrowser};a.filebrowser=c}a.filebrowser.action="QuickUpload";var h=a.filebrowser.url;if(!h){var p=a.onShow;a.onShow=function(n){var r=n.jN;if(p&&p.call(r,n)===!1)return!1;var i=e.getSelectedFolder();i&&(h=i.getUploadUrl());if(!h)return!1;var s=a.filebrowser.params||{};s.CKFinderFuncNum=e._.ra;s.langCode||(s.langCode=e.langCode);h=t(h,s);var o=this.getDialog().getContentElement(a["for"][0],a["for"][1]);if(!o)return!1;o._.dg.action=h;o.reset();return!0}}else{a.filebrowser.url=h;a.hidden=!1;i(e,o.vz(a["for"][0]).eB(a["for"][1]),a.filebrowser)}var d=a.onClick;a.onClick=function(e){var t=e.jN;return d&&d.call(t,e)===!1?!1:r.call(t,e)}}}}function o(e,t){var n=t.getDialog(),r=t.filebrowser.target||"";if(r){var i=r.split(":"),s=n.getContentElement(i[0],i[1]);if(s){s.setValue(e);n.selectPage(i[0])}}}function u(e,t,n){if(n.indexOf(";")!==-1){var r=n.split(";");for(var i=0;i<r.length;i++)if(u(e,t,r[i]))return!0;return!1}var s=e.vz(t).eB(n).filebrowser;return s&&s.url}function f(e,t){var n=this,r=n._.rb.getDialog(),i=n._.rb["for"],s=n._.rb.filebrowser.onSelect;i&&r.getContentElement(i[0],i[1]).reset();if(typeof t=="function"&&t.call(n._.rb)===!1)return;if(s&&s.call(n._.rb,e,t)===!1)return;typeof t=="string"&&t&&alert(t);e&&o(e,n._.rb)}h.add("filebrowser",{bz:function(e){e.cg._.ra=a.addFunction(f,e.cg)}});e.on("dialogDefinition",function(e){var t=e.data.dg,n;for(var r in t.contents){n=t.contents[r];s(e.application.cg,e.data.name,t,n.elements);n.hidden&&n.filebrowser&&(n.hidden=!u(t,n.id,n.filebrowser))}})})();h.add("button",{eK:function(t){t.bY.kd(e.UI_BUTTON,p.button.dq)}});CKFinder._.UI_BUTTON=e.UI_BUTTON=1;p.button=function(e){a.extend(this,e,{title:e.label,className:e.className||e.command&&"cke_button_"+e.command||"",click:e.click||function(t){e.command?t.execCommand(e.command):e.onClick&&e.onClick(t)}});this._={}};p.button.dq={create:function(e){return new p.button(e)}};p.button.prototype={canGroup:!0,er:function(t,n){var r=s,i=this._.id="cke_"+a.getNextNumber();this._.app=t;var o={id:i,button:this,app:t,focus:function(){var e=t.document.getById(i);e&&e.focus()},lc:function(){this.button.click(t)}},u=a.addFunction(o.lc,o),f=p.button._.instances.push(o)-1,l="",c=this.command;if(this.iH)t.on("mode",function(){this.bR(this.iH[t.mode]?e.aS:e.aY)},this);else if(c){c=t.cS(c);if(c){c.on("bu",function(){this.bR(c.bu)},this);l+="cke_"+(c.bu==e.eV?"on":c.bu==e.aY?"disabled":"off")}}c||(l+="cke_off");this.className&&(l+=" "+this.className);n.push('<span class="cke_button">','<a id="',i,'" class="',l,'" href="javascript:void(\'',(this.title||"").replace("'",""),'\')" title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+i+'_label"'+(this.vZ?' aria-haspopup="true"':""));(r.opera||r.gecko&&r.mac)&&n.push(' onkeypress="return false;"');r.gecko&&n.push(' onblur="this.style.cssText = this.style.cssText;"');n.push(' onkeydown="window.parent.CKFinder._.uiButtonKeydown(',f,', event);" onfocus="window.parent.CKFinder._.uiButtonFocus(',f,', event);" onclick="window.parent.CKFinder._.callFunction(',u,', this); return false;">');this.icon!==!1&&n.push('<span class="cke_icon"');if(this.icon){var h=(this.rD||0)*-16;n.push(' style="background-image:url(',e.getUrl(this.icon),");background-position:0 "+h+'px;"')}this.icon!==!1&&n.push("></span>");n.push('<span id="',i,'_label" class="cke_label">',this.label,"</span>");this.vZ&&n.push('<span class="cke_buttonarrow"></span>');n.push("</a>","</span>");this.onRender&&this.onRender();return o},bR:function(t){var n=this;if(n._.bu==t)return!1;n._.bu=t;var r=n._.app.document.getById(n._.id);if(r){r.bR(t);t==e.aY?r.setAttribute("aria-disabled",!0):r.removeAttribute("aria-disabled");t==e.eV?r.setAttribute("aria-pressed",!0):r.removeAttribute("aria-pressed");var i=n.title,s=n._.app.lang.common.unavailable,o=r.getChild(1);t==e.aY&&(i=s.replace("%1",n.title));o.setHtml(i);return!0}return!1}};p.button._={instances:[],keydown:function(e,t){var n=p.button._.instances[e];if(n.onkey){t=new u.event(t);return n.onkey(n,t.db())!==!1}},focus:function(e,t){var n=p.button._.instances[e],r;n.onfocus&&(r=n.onfocus(n,new u.event(t))!==!1);s.gecko&&s.version<10900&&t.preventBubble();return r}};CKFinder._.uiButtonKeydown=p.button._.keydown;CKFinder._.uiButtonFocus=p.button._.focus;p.prototype.qW=function(t,n){this.add(t,e.UI_BUTTON,n)};(function(){h.add("container",{bM:[],bz:function(e){var t=this;e.on("themeAvailable",function(){t.pV(e)})},pV:function(t){function d(n){n&&n.removeListener();var r=p.getFrameDocument().$;r.open();c&&(r.domain=document.domain);t.document=new f(r);t.theme.dQ(t);r.close();(r.defaultView||r.parentWindow).CKFinder=CKFinder;e.skins.load(t,"application",function(){var e=t.dJ;e&&e.oA(t.document)});if(!p.isVisible()&&o&&s.version>=8)var i=setInterval(function(){if(p.isVisible()){t.layout.ea(!0);i=clearInterval(i)}},500)}var n=t.config.height,r=t.config.tabIndex||t.element.getAttribute("tabindex")||0;if(!isNaN(n)){n=Math.max(n,200);n+="px"}var i="",u=t.config.width;if(u){isNaN(u)||(u+="px");i+="width: "+u+";"}var a=t.config.className?'class="'+t.config.className+'"':"",c=s.isCustomDomain(),h="document.open();"+(c?'document.domain="'+window.document.domain+'";':"")+"document.close();",p=l.kE('<iframe style="'+i+"height:"+n+'"'+a+' frameBorder="0"'+' src="'+(o?"javascript:void(function(){"+encodeURIComponent(h)+"}())":"")+'"'+' tabIndex="'+r+'"'+' allowTransparency="true"'+(o&&s.version>=9&&t.cg.inPopup?' onload="typeof ckfinder !== "undefined" && ckfinder();"':"")+"></iframe>",t.element.getDocument());o&&s.version>=9&&t.cg.inPopup&&(t.element.getDocument().getWindow().$.ckfinder=function(){t.element.getDocument().getWindow().$.ckfinder=undefined;d()});p.on("load",d);var v=t.lang.appTitle.replace("%1",t.name);if(s.gecko){p.on("load",function(e){e.removeListener()});t.element.setAttributes({role:"region",title:v});p.setAttributes({role:"region",title:" "})}else if(s.webkit){p.setAttribute("title",v);p.setAttribute("name",v)}else o&&p.appendTo(t.element);o||t.element.append(p);t.container=p}});e.application.prototype.focus=function(){var e=this;if(e._.oO&&e._.oO.length>1){e.oW("requestSelectFile");for(var t=0,n=e._.oO.length;t<n;t++)e.oW("requestSelectFile",{file:e._.oO[t],multiple:!0})}(e._.activeElement?l.eB(e._.activeElement):e.document.getWindow()).focus()}})();h.add("contextmenu",{bM:["menu"],eK:function(e){e.bj=new h.bj(e);e.bD("bj",{exec:function(){var t=e.layout.pn(),n,r,i;if(t.hasClass("focus_inside")){i=e.aG["filesview.filesview"];var s=i.tools.dH();if(s){n=s.dM;r=n.ir();e.bj.show(e.document.bH().getParent(),null,r.x+5,r.y+5,n,t);e._.activeElement=n;e._.oO=i.tools.oO();return}}t=e.layout.pS();if(t.hasClass("focus_inside")){i=e.aG["foldertree.foldertree"];var o=i.tools.ew;if(o){n=o.dM;r=n.ir();e.bj.show(e.document.bH().getParent(),null,r.x+5,r.y+5,n,t);e._.activeElement=n;e._.oO=[];return}}}})}});h.bj=a.createClass({$:function(e){this.id="cke_"+a.getNextNumber();this.app=e;this._.dF=[];this._.vx=a.addFunction(function(t){this._.panel.hide();e.focus&&e.focus()},this)},_:{onMenu:function(t,n,r,i,s,u){var f=this._.menu,l=this.app;if(f){f.hide();f.ih()}else{f=this._.menu=new e.menu(l);f.onClick=a.bind(function(e){var t=!0;f.hide();o&&l.focus&&l.focus();e.onClick?e.onClick():e.command&&l.execCommand(e.command);t=!1},this)}f.onEscape=function(){l.focus&&l.focus();s.focus&&s.focus();l._.activeElement=null};var c=this._.dF,h=[];f.onHide=a.bind(function(){f.onHide=null;this.onHide&&this.onHide()},this);for(var p=0;p<c.length;p++){var d=c[p];if(d[1]&&d[1].$!=u.$)continue;var v=c[p][0](s);if(v)for(var m in v){var y=this.app.mh(m);if(y){y.bu=v[m];f.add(y)}}}f.items.length&&f.show(t,n||(l.lang.dir=="rtl"?2:1),r,i)}},ej:{lX:function(t,n){if(s.opera&&!("oncontextmenu"in document.body)){var r;t.on("mousedown",function(i){i=i.data;if(i.$.button!=2){i.db()==e.bP+1&&t.oW("contextmenu",i);return}if(n&&(i.$.ctrlKey||i.$.metaKey))return;var s=i.bK();if(!r){var o=s.getDocument();r=o.createElement("input");r.$.type="button";o.bH().append(r)}r.setAttribute("style","position:absolute;top:"+(i.$.clientY-2)+"px;left:"+(i.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01")});t.on("mouseup",function(e){if(r){r.remove();r=undefined;t.oW("contextmenu",e.data)}})}t.on("contextmenu",function(e){var r=e.data;if(n&&(s.webkit?i:r.$.ctrlKey||r.$.metaKey))return;r.preventDefault();var o=r.bK(),u=r.bK().getDocument().gT(),f=r.$.clientX,l=r.$.clientY;a.setTimeout(function(){this._.onMenu(u,null,f,l,o,t)},0,this)},this);s.opera&&t.on("keypress",function(e){var t=e.data;t.$.keyCode===0&&t.preventDefault()});if(s.webkit){var i,o=function(e){i=e.data.$.ctrlKey||e.data.$.metaKey},u=function(){i=0};t.on("keydown",o);t.on("keyup",u);t.on("contextmenu",u)}},kh:function(e,t){this._.dF.push([e,t])},show:function(t,n,r,i,s,o){this.app.focus();this._.onMenu(t||e.document.gT(),n,r||0,i||0,s,o)}}});(function(){function t(e){var t=this;t.jr=null;t.kP=null;t.nK=null;t.app=e}function n(e,t){var n=!0,r=t[0].ext.toLowerCase();for(var i=1,s=t.length;i<s;i++)if(t[i].ext.toLowerCase()!=r){n=!1;break}return'<div style="background-image: url('+(n?e.tools.oR(t[0],!0):e.app.fh+"images/icons/32/default.icon.gif")+')"><span>'+t.length+"</span></div>"}h.add("dragdrop",{bM:["foldertree","filesview","contextmenu","dialog"],readOnly:!1,gr:function(i){i.cK=new t(i);var s,o;i.on("themeSpace",function(t){t.data.space=="mainBottom"&&(t.data.html+='<div id="dragged_container" style="display: none; position: absolute;"></div>')});i.on("uiReady",function(e){i.document.on("dragstart",function(e){e.data.preventDefault(!0)});i.document.on("drag",function(e){e.data.preventDefault(!0)});var t;i.aG["filesview.filesview"].gA("Draggable");i.aG["foldertree.foldertree"].ke("Droppable")});e.aG.bX["filesview.filesview"].bh("Draggable",["mousedown"],function(t){var r=this,o=r.tools.bZ(t),u=r.tools.oO(!0);if(!o)return;if(!t.data.ov())return;t.data.preventDefault();o.rowNode().hasClass("selected")||((t.data.$.ctrlKey||t.data.$.metaKey)&&i.config.selectMultiple?u.push(o):u=[o]);var f=a.extend({},{file:o,files:u,step:1},!0);r.oW("beforeDraggable",f,function(t,a){function h(e){s.setStyles({left:e.data.$.clientX-(i.lang.dir=="rtl"?s.hR("width"):-1)+"px",top:e.data.$.clientY+"px"});l===0&&(l=e.data.$.clientY+e.data.$.clientX);if(c)return;if(Math.abs(e.data.$.clientY+e.data.$.clientX-l)<20)return;r.app.cK.kG(f);r.app.cK.kz(u);for(var t=0,o=u.length;t<o;t++)u[t].rowNode().addClass("dragged_source");if(u.length==1){s.setStyle("width",f.rd("width"));s.addClass("file_entry")}else s.addClass("drag_multiple");s.show();var h;if(u.length==1){h=f.getHtml();h=h.replace(/url\(&quot;(.+?)&quot;\);?"/,'url($1);"');h=h.replace(/url\(([^'].+?[^'])\);?"/,"url('$1');\"")}else h=n(r,u);s.setHtml(h);c=1;r.app.document.bH().addClass("dragging");r.app.aG["foldertree.foldertree"].gA("Droppable");a.step=1;r.oW("successDraggable",a)}function p(e){s.hide();s.removeClass("drag_multiple");s.removeClass("file_entry");s.setStyle("width","auto");s.setHtml("");for(var t=0,n=u.length;t<n;t++)u[t].rowNode().removeClass("dragged_source");r.app.cK.kG(null);r.app.cK.kz(null);i.document.removeListener("mousemove",h);e?e.removeListener():i.document.removeListener("mouseup",p);r.app.aG["foldertree.foldertree"].ke("Droppable");r.app.document.bH().removeClass("dragging");a.step=2;r.oW("successDraggable",a);r.oW("afterDraggable",a)}if(t)return;var f=o.rowNode(),l=0,c=0;s=s||i.document.getById("dragged_container");s.hide();i.document.on("mousemove",h);i.document.on("mouseup",p,999);var d=i.document.bH().$;i.document.on("mouseout",function(e){i.cK.qp()&&e.data.bK().$==d&&p()})})});e.aG.bX["foldertree.foldertree"].bh("Droppable",["mouseup","mouseover","mouseout"],function(n){var r=n.data.bK(),s=this,u=n.name,f=!!s.app.cK.qp();if(!f||r.is("ul"))return;var l=s.tools.cq(r);if(!l)return;if(u=="mouseup"){s.app.cK.iW(0);s.app.cK.nz(l);var c=s.app.cK.pe(),h=a.extend({},{target:l,source:c},!0);s.oW("beforeDroppable",h,function(n,r){if(n)return;try{var u=r.target,f=r.source,l=new e.iD(s.app,"copyFilesToFolderDrop",{label:s.app.lang.CopyDragDrop,bu:u!=f[0].folder&&u.acl.fileUpload?e.aS:e.aY,onClick:function(){s.oW("successDroppable",{hH:f,hC:u,step:2});s.app.execCommand("copyFilesToFolder",{files:f,destination:u,callback:function(){s.oW("successDroppable",{hH:f,hC:u,step:3});s.oW("afterDroppable",r)},errorCallback:function(){s.oW("failedDroppable",r);s.oW("afterDroppable",r)}})}}),c=window.top[e.nd+"cation"][e.jG+"st"],h=new e.iD(s.app,"moveFilesToFolderDrop",{label:s.app.lang.MoveDragDrop,bu:u!=f[0].folder&&u.acl.fileUpload&&f[0].folder.acl.fileDelete?e.aS:e.aY,onClick:function(){s.oW("successDroppable",{hH:f,hC:u,step:2});e.bF&&1==e.bs.indexOf(e.bF.substr(1,1))%5&&e.lS(c)!=e.lS(e.ed)||e.bF&&e.bF.substr(3,1)!=e.bs.substr((e.bs.indexOf(e.bF.substr(0,1))+e.bs.indexOf(e.bF.substr(2,1)))*9%(e.bs.length-1),1)?s.app.msgDialog("","This function is disabled in the demo version of CKFinder.<br />Please visit the <a href='http://cksource.com/ckfinder'>CKFinder web site</a> to obtain a valid license."):s.app.execCommand("moveFilesToFolder",{files:f,destination:u,callback:function(){s.oW("successDroppable",{hH:f,hC:u,step:3});s.oW("afterDroppable",r)},errorCallback:function(){s.oW("failedDroppable",r);s.oW("afterDroppable",r)}})}}),p={copyFilesToFolder:l,moveFilesToFolder:h};s.oW("beforeDropMenu",{iG:p,folder:u});if(!o){o=new e.menu(s.app);o.onClick=a.bind(function(e){var t=!0;o.hide();e.onClick?e.onClick():e.command&&i.execCommand(e.command);t=!1},this)}o.ih();for(var d in p)p.hasOwnProperty(d)&&o.add(p[d]);o.items.length&&o.show(u.aNode(),i.lang.dir=="rtl"?2:1,0,u.aNode().$.offsetHeight);s.oW("successDroppable",{hH:f,hC:u,step:1})}catch(v){v=e.ba(v);s.oW("failedDroppable",r);s.oW("afterDroppable",r);throw v}})}else u=="mouseover"?s.app.cK.fZ||s.app.cK.iW(l.liNode()):u=="mouseout"&&s.app.cK.fZ&&s.app.cK.iW(0)})}});t.prototype={iW:function(e){var t=this,n=!!e;if(n&&!t.fZ){t.app.document.bH().addClass("drop_accepted");e.addClass("drop_target")}else if(!n&&t.fZ){t.app.document.bH().removeClass("drop_accepted");t.fZ.removeClass("drop_target")}t.fZ=n?e:null},kG:function(e){this.jr=e;this.jr instanceof l&&this.jr.focus()},vE:function(){return this.jr},kz:function(e){this.kP=e},pe:function(){return this.kP},qp:function(){return!!this.jr},nz:function(e){this.nK=e},oa:function(){return this.nK}}})();h.add("floatpanel",{bM:["panel"]});(function(){function r(e,n,r,i,s){var o=n.iY()+"-"+r.iY()+"-"+e.gd+"-"+e.lang.dir+(e.uiColor&&"-"+e.uiColor||"")+(i.css&&"-"+i.css||"")+(s&&"-"+s||""),u=t[o];if(!u){u=t[o]=new p.panel(n,i,e.gd);u.element=r.append(l.kE(u.nt(e),r.getDocument()));u.element.setStyles({display:"none",position:"absolute"})}return u}var t={},n=!1;p.pY=a.createClass({$:function(e,t,n,i){n.lE=!0;var s=t.getDocument(),o=r(e,s,t,n,i||0),u=o.element,a=u.getFirst().getFirst();this.element=u;e.ia?e.ia.push(u):e.ia=[u];this._={panel:o,parentElement:t,dg:n,document:s,iframe:a,children:[],dir:e.lang.dir}},ej:{qq:function(e,t){return this._.panel.qq(e,t)},re:function(e,t){return this._.panel.re(e,t)},iv:function(e){return this._.panel.iv(e)},gf:function(t,r,i,f,l){var c=this._.panel,h=c.gf(t);this.fj(!1);n=!0;var p=this.element,d=this._.iframe,v=this._.dg,m=r.ir(p.getDocument()),y=this._.dir=="rtl",b=m.x+(f||0),w=m.y+(l||0);!y||i!=1&&i!=4?!y&&(i==2||i==3)&&(b+=r.$.offsetWidth-1):b+=r.$.offsetWidth;if(i==3||i==4)w+=r.$.offsetHeight-1;this._.panel._.nr=r.dS();p.setStyles({top:w+"px",left:"-3000px",visibility:"hidden",opacity:"0",display:""});p.getFirst().removeStyle("width");if(!this._.qa){var E=o?d:new u.window(d.$.contentWindow);e.event.jP=!0;E.on("blur",function(e){if(o&&!this.fj())return;var t=e.data.bK(),r=t.getWindow&&t.getWindow();if(r&&r.equals(E))return;this.visible&&!this._.gF&&!n&&(s.webkit&&s.isMobile?a.setTimeout(function(){this.hide()},500,this):this.hide())},this);E.on("focus",function(){this._.lG=!0;this.gU();this.fj(!0)},this);e.event.jP=!1;this._.qa=1}c.onEscape=a.bind(function(){this.onEscape&&this.onEscape()},this);a.setTimeout(function(){y&&(b-=p.$.offsetWidth);p.setStyles({left:b+"px",visibility:"",opacity:"1"});var e=p.getFirst();if(h.oz){function t(){var e=p.getFirst(),t=0,n=h.element.$;if(s.gecko||s.opera)n=n.parentNode;var r=n.scrollWidth;if(o&&s.version<10){n=n.document.body;var i=n.getElementsByTagName("a");for(var u=0;u<i.length;u++){var a=i[u].children[1],f=a.scrollWidth+a.offsetLeft-r;f>0&&f>t&&(t=f)}}r+=t;o&&s.quirks&&r>0&&(r+=(e.$.offsetWidth||0)-(e.$.clientWidth||0));r+=4;e.setStyle("width",r+"px");h.element.addClass("cke_frameLoaded");var l=h.element.$.scrollHeight;o&&s.quirks&&l>0&&(l+=(e.$.offsetHeight||0)-(e.$.clientHeight||0));e.setStyle("height",l+"px");c._.iL.element.setStyle("display","none").removeStyle("display")}c.hm?t():c.onLoad=t}else e.removeStyle("height");var n=c.element,r=n.getWindow(),i=r.hV(),u=r.eR(),f={height:n.$.offsetHeight,width:n.$.offsetWidth};if(y?b<0:b+f.width>u.width+i.x)b+=f.width*(y?1:-1);w+f.height>u.height+i.y&&(w-=f.height);p.setStyles({top:w+"px",left:b+"px",opacity:"1"});a.setTimeout(function(){if(v.ny&&s.gecko){var e=d.getParent();e.setAttribute("role","region");e.setAttribute("title",v.ny);d.setAttribute("role","region");d.setAttribute("title"," ")}o&&s.quirks?d.focus():d.$.contentWindow.focus();o&&!s.quirks&&this.fj(!0)},0,this)},0,this);this.visible=1;this.onShow&&this.onShow.call(this);(s.ie7Compat||s.ie8&&s.ie6Compat)&&a.setTimeout(function(){this._.parentElement.$.style.cssText+=""},0,this);n=!1},hide:function(){var e=this;if(e.visible&&(!e.onHide||e.onHide.call(e)!==!0)){e.gU();e.element.setStyle("display","none");e.visible=0}},fj:function(e){var t=this._.panel;e!=undefined&&(t.fj=e);return t.fj},rA:function(e,t,n,r,i,o){if(this._.gF==e&&e._.panel._.nr==n.dS())return;this.gU();e.onHide=a.bind(function(){a.setTimeout(function(){this._.lG||this.hide()},0,this)},this);this._.gF=e;this._.lG=!1;e.gf(t,n,r,i,o);(s.ie7Compat||s.ie8&&s.ie6Compat)&&setTimeout(function(){e.element.getChild(0).$.style.cssText+=""},100)},gU:function(){var e=this._.gF;if(e){delete e.onHide;delete this._.gF;e.hide()}}}})})();(function(){function t(){var t=e.aG.hS("formpanel","formpanel",{dc:null});t.dT.push(function(){a.mH(this.bn())});t.bh("UnloadForm",["submit","requestUnloadForm"],function(n){if(n.name=="submit"&&!this.data().gM)return;n.result=this.oW("beforeUnloadForm",function(n,r){var i=this;if(n)return;try{i.bn().getParent().setStyle("display","none");i.app.layout.ea(!0);if(i.data().dc){var s=i.app.cS(i.data().dc);s&&s.bR(e.aS);i.data().dc=null}var o=i.tools.ij();if(o){o.mF();o.remove()}i.tools.releaseDomNodes();i.oW("successUnloadForm",r)}catch(u){i.oW("failedUnloadForm",r);i.oW("afterUnloadForm",r);throw e.ba(u)}})});t.bh("LoadForm",["requestLoadForm"],function(n){var r=this,s=a.extend({html:null,dq:null,cC:null,cancelSubmit:1,gM:1,command:null},n.data,!0);n.result=this.oW("beforeLoadForm",s,function(n,s){if(n)return;try{var o=this.bn();o.setHtml(s.html);o.getParent().removeStyle("display");this.app.layout.ea(!0);var u=this.tools.ij();if(u){if(s.dq)if(s.cC)for(var a in s.cC)u.on(s.cC[a],s.dq);else u.on("submit",s.dq);s.cancelSubmit&&u.on("submit",i);var f=u.eG("input");for(var a=0;a<f.count();a++)if(f.getItem(a).getAttribute("name")=="cancel"){f.getItem(a).on("click",function(e){r.oW("requestUnloadForm");e.removeListener()});break}s.cancelSubmit&&u.on("submit",i)}this.data().gM=s.gM;if(s.command){var l=this.app.cS(s.command);l&&l.bR(e.eV);this.data().dc=s.command}this.oW("successLoadForm",s)}catch(c){this.oW("failedLoadForm",s);throw e.ba(c)}this.oW("afterLoadForm",s)})});t.bh("FilesViewSettingsForm",["requestFilesViewSettingsForm"],function(i){i.result=this.oW("beforeFilesViewSettingsForm",{},function(i,s){if(i)return;try{if(this.data().dc=="settings")this.oW("requestUnloadForm",function(){this.oW("successFilesViewSettingsForm",s);this.oW("afterFilesViewSettingsForm",s)});else{this.data().dc&&this.oW("requestUnloadForm");var o=this.app.aG["filesview.filesview"].data(),u=r(this.app.lang,o.dA,o.display,o.cN);this.oW("requestLoadForm",{html:u,dq:a.bind(n,this),cC:["click","submit"],command:"settings"},function(){this.eh.addClass("show_border");this.app.cg.resizeFormPanel();this.oW("successFilesViewSettingsForm",s)})}}catch(f){this.oW("failedFilesViewSettingsForm",s);this.oW("afterFilesViewSettingsForm",s);throw e.ba(f)}})});t.tools={ij:function(){var e=this;e.iP===undefined&&e.ib.bn().$.childNodes.length&&(e.iP=u(o(e.ib.bn().$.childNodes,"form")));return e.iP},releaseDomNodes:function(){delete this.iP}}}function n(e){if(e.name=="submit"){var t=this.app.aG["formpanel.formpanel"],n=t.data();this.oW("requestUnloadForm");this.oW("afterFilesViewSettingsForm",n);return}var r=e.data.bK(),i=r.getAttribute("name"),s=r.getAttribute("value"),o=r.$.checked;r.getName()=="input"&&a.setTimeout(function(){var e=this.app.aG["filesview.filesview"],t=e.data(),n={dA:t.dA,cN:t.cN,display:CKFinder.tools.clone(t.display)};if(i=="sortby")t.cN=s;else if(i=="view_type"){t.dA=s;var r=this.app.document.getById("fs_display_filename");if(s=="list"){t.display.filename=!0;r.$.checked=!0;r.$.disabled=!0}else r.$.disabled=!1}else i=="display_filename"?t.dA!="list"&&(t.display.filename=!!o):i=="display_date"?t.display.date=!!o:i=="display_filesize"&&(t.display.filesize=!!o);var u=(t.dA=="list"?"L":"T")+(t.cN=="size"?"S":t.cN=="date"?"D":t.cN=="extension"?"E":"N")+(t.display.filename?"N":"_")+(t.display.date?"D":"_")+(t.display.filesize?"S":"_");a.setCookie("CKFinder_Settings",u,!1);(n.display.filename!=t.display.filename||n.display.date!=t.display.date||n.display.filesize!=t.display.filesize||n.cN!=t.cN||n.dA!=t.dA)&&e.oW("requestRenderFiles",{mj:e.app.lang.FilesEmpty,lastView:n})},0,this)}function r(e,t,n,r){var i='checked="checked"',s="",o="",u="",a="",f="",l="",c="",h="",p="";t=="list"?s=i:o=i;n.filename&&(u=i);n.date&&(a=i);n.filesize&&(f=i);r=="date"?c=i:r=="size"?h=i:r=="extension"?p=i:l=i;var d=s?' disabled="true"':"";return'<form id="files_settings" role="region" aria-controls="files_view" action="#" method="POST"><h2 role="heading">'+e.SetTitle+"</h2>"+'<table role="presentation">'+"<tr>"+"<td>"+'<dl role="group" aria-labelledby="files_settings_type">'+'<dt id="files_settings_type">'+e.SetView+"</dt>"+'<dd><input type="radio" name="view_type" value="thumbnails" '+o+' id="fs_type_thumbnails" /> <label for="fs_type_thumbnails">'+e.SetViewThumb+"</label></dd>"+'<dd><input type="radio" name="view_type" value="list" '+s+' id="fs_type_details" /> <label for="fs_type_details">'+e.SetViewList+"</label></dd>"+"</dl>"+"</td>"+"<td>"+'<dl role="group" aria-labelledby="files_settings_display">'+'<dt id="files_settings_display">'+e.SetDisplay+"</dt>"+'<dd><input type="checkbox" name="display_filename" value="1" '+u+d+' id="fs_display_filename" /> <label for="fs_display_filename">'+e.SetDisplayName+"</label></dd>"+'<dd><input type="checkbox" name="display_date" value="1" '+a+' id="fs_display_date" /> <label for="fs_display_date">'+e.SetDisplayDate+"</label></dd>"+'<dd><input type="checkbox" name="display_filesize" value="1" '+f+' id="fs_display_filesize" /> <label for="fs_display_filesize">'+e.SetDisplaySize+"</label></dd>"+"</dl>"+"</td>"+"<td>"+'<dl role="group" aria-labelledby="files_settings_sorting">'+'<dt id="files_settings_sorting">'+e.SetSort+"</dt>"+'<dd><input type="radio" name="sortby" value="filename" '+l+' id="fs_sortby_filename" /> <label for="fs_sortby_filename">'+e.SetSortName+"</label></dd>"+'<dd><input type="radio" name="sortby" value="date" '+c+' id="fs_sortby_date" /> <label for="fs_sortby_date">'+e.SetSortDate+"</label></dd>"+'<dd><input type="radio" name="sortby" value="size" '+h+' id="fs_sortby_size" /> <label for="fs_sortby_size">'+e.SetSortSize+"</label></dd>"+'<dd><input type="radio" name="sortby" value="extension" '+p+' id="fs_sortby_extension" /> <label for="fs_sortby_extension">'+e.SetSortExtension+"</label></dd>"+"</dl>"+"</td>"+"</tr>"+"</table>"+'<div class="buttons_wrapper"><div class="buttons"><input type="submit" value="'+e.CloseBtn+'" /></div></div>'+"</form>"}function i(e){e.data.preventDefault()}function s(e,t){for(var n in e)if(t(e[n])!==undefined)return e[n];return undefined}function o(e,t,n){return s(e,function(e){if(e.tagName&&e.tagName.toLowerCase()==t&&!(n--))return e})}function u(e){return e?new l(e):null}h.add("formpanel",{bM:["button"],onLoad:function(){t()},gr:function(n){var r=this;n.on("themeSpace",function(
t){t.data.space=="mainTop"&&(t.data.html+='<div id="panel_view" class="view" role="region" aria-live="polite" style="display: none;"><div id="panel_widget" class="panel_widget ib" tabindex="-1"></div></div>')});n.on("uiReady",function(i){var s=n.document.getById("panel_view").getChild(0);e.aG.bz(n,"formpanel",r,s)});n.bD("settings",{exec:function(t){t.oW("requestFilesViewSettingsForm",null,function(){t.cS("settings").bu==e.eV&&setTimeout(function(){t.aG["formpanel.formpanel"].tools.ij().eG("input").getItem(0).focus()},0)})}});n.bD("refresh",{exec:function(e){var t=e.aV;t&&e.oW("requestShowFolderFiles",{folder:t},function(){setTimeout(function(){e.aG["filesview.filesview"].bn().focus()},0)})}});n.bY.add("Settings",e.UI_BUTTON,{label:n.lang.Settings,command:"settings"});n.bY.add("Refresh",e.UI_BUTTON,{label:n.lang.Refresh,command:"refresh"});n.cS("refresh").bR(e.aY)}})})();h.add("keystrokes",{eK:function(t){t.dJ=new e.dJ(t);t.oX={}},bz:function(e){var t=e.config.keystrokes,n=e.config.gN,r=e.dJ.keystrokes,i=e.dJ.gN;for(var s=0;s<t.length;s++)r[t[s][0]]=t[s][1];for(s=0;s<n.length;s++)i[n[s]]=1}});e.dJ=function(e){var t=this;if(e.dJ)return e.dJ;t.keystrokes={};t.gN={};t._={app:e};return t};(function(){var t,n=function(e){e=e.data;var n=e.db(),r=this.keystrokes[n],i=this._.app;t=i.oW("iK",{keyCode:n})===!0;if(!t){if(r){var s={gJ:"dJ"};t=i.execCommand(r,s)!==!1}if(!t){var o=i.oX[n];t=o&&o(i)===!0;t||(t=!!this.gN[n])}}t&&e.preventDefault(!0);return!t},r=function(e){if(t){t=!1;e.data.preventDefault(!0)}};e.dJ.prototype={oA:function(e){e.on("keydown",n,this);(s.opera||s.gecko&&s.mac)&&e.on("keypress",r,this)}}})();c.gN=[];c.keystrokes=[[e.eJ+119,"foldertreeFocus"],[e.eJ+120,"filesviewFocus"],[e.eJ+121,"hW"],[e.eJ+85,"upload"],[e.dy+121,"bj"],[e.bP+e.dy+121,"bj"]];h.add("menu",{eK:function(e){var t=e.config.nj.split(","),n={};for(var r=0;r<t.length;r++)n[t[r]]=r+1;e._.iA=n;e._.iG={}},bM:["floatpanel"]});a.extend(e.application.prototype,{dZ:function(e,t){this._.iA[e]=t||100},gp:function(t,n){this._.iA[n.group]&&(this._.iG[t]=new e.iD(this,t,n))},eU:function(e){for(var t in e)this.gp(t,e[t])},mh:function(e){return this._.iG[e]}});(function(){function t(e){e.sort(function(e,t){return e.group<t.group?-1:e.group>t.group?1:e.fE<t.fE?-1:e.fE>t.fE?1:0})}e.menu=a.createClass({$:function(e,t){var n=this;n.id="cke_"+a.getNextNumber();n.app=e;n.items=[];n._.hx=t||1},_:{jK:function(t){var n=this,r=n._.oM,i=n.items[t],s=i.hQ&&i.hQ();if(!s){n._.panel.gU();return}if(r)r.ih();else{r=n._.oM=new e.menu(n.app,n._.hx+1);r.parent=n;r.onClick=a.bind(n.onClick,n)}for(var o in s)r.add(n.app.mh(o));var u=n._.panel.iv(n.id).element.getDocument().getById(n.id+String(t));r.show(u,2)}},ej:{add:function(e){e.fE||(e.fE=this.items.length);this.items.push(e)},ih:function(){this.items=[]},show:function(n,r,i,s){var o=this.items,u=this.app,f=this._.panel,l=this._.element;if(!f){f=this._.panel=new p.pY(this.app,this.app.document.bH(),{css:[],hx:this._.hx-1,className:u.iy+" cke_contextmenu"},this._.hx);f.onEscape=a.bind(function(){this.onEscape&&this.onEscape();this.hide()},this);f.onHide=a.bind(function(){this.onHide&&this.onHide()},this);var c=f.qq(this.id);c.oz=!0;var h=c.jQ;h[40]="next";h[9]="next";h[38]="prev";h[e.dy+9]="prev";h[32]="click";h[39]="click";l=this._.element=c.element;l.addClass(u.iy);var d=l.getDocument();d.bH().setStyle("overflow","hidden");d.eG("html").getItem(0).setStyle("overflow","hidden");this._.qz=a.addFunction(function(e){var t=this;clearTimeout(t._.jI);t._.jI=a.setTimeout(t._.jK,u.config.ob,t,[e])},this);this._.qm=a.addFunction(function(e){clearTimeout(this._.jI)},this);this._.ql=a.addFunction(function(t){var n=this,r=n.items[t];if(r.bu==e.aY){n.hide();return}r.hQ?n._.jK(t):n.onClick&&n.onClick(r)},this)}t(o);var v=['<div class="cke_menu">'],m=o.length,g=m&&o[0].group;for(var y=0;y<m;y++){var b=o[y];if(g!=b.group){v.push('<div class="cke_menuseparator"></div>');g=b.group}b.er(this,y,v)}v.push("</div>");l.setHtml(v.join(""));this.parent?this.parent._.panel.rA(f,this.id,n,r,i,s):f.gf(this.id,n,r,i,s);u.oW("menuShow",[f])},hide:function(){this._.panel&&this._.panel.hide()}}})})();e.iD=a.createClass({$:function(e,t,n){var r=this;a.extend(r,n,{fE:0,className:"cke_button_"+t});r.group=e._.iA[r.group];r.app=e;r.name=t},ej:{er:function(t,n,r){var i=this,o=t.id+String(n),u=typeof i.bu=="undefined"?e.aS:i.bu,a=" cke_"+(u==e.eV?"on":u==e.aY?"disabled":"off"),f=i.label;u==e.aY&&(f=i.app.lang.common.unavailable.replace("%1",f));i.className&&(a+=" "+i.className);var l=i.hQ;r.push('<span class="cke_menuitem"><a id="',o,'" class="',a,'" href="javascript:void(\'',(i.label||"").replace("'",""),'\')" title="',i.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(l?'aria-haspopup="true"':"")+(u==e.aY?'aria-disabled="true"':"")+(u==e.eV?'aria-pressed="true"':""));(s.opera||s.gecko&&s.mac)&&r.push(' onkeypress="return false;"');s.gecko&&r.push(' onblur="this.style.cssText = this.style.cssText;"');var c=(i.rD||0)*-16;r.push(' onmouseover="CKFinder.tools.callFunction(',t._.qz,",",n,');" onmouseout="CKFinder.tools.callFunction(',t._.qm,",",n,');" onclick="CKFinder.tools.callFunction(',t._.ql,",",n,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(i.icon?' style="background-image:url('+e.getUrl(i.icon)+");background-position:0 "+c+'px;"':"")+"></span></span>"+'<span class="cke_label">');i.hQ&&r.push('<span class="cke_menuarrow"></span>');r.push(f,"</span></a></span>")}}});c.ob=400;c.nj="";(function(){function e(e){s.opera&&e.setStyle("overflow","hidden");e.on("touchstart",function(t){var n=t.data.$.touches[0];if(e.interval){window.clearInterval(e.interval);delete e.interval}e.lL=e.$.scrollTop;e.nx=e.$.scrollLeft;e.mP=n.pageY;e.na=n.pageX;e.mO=new Date});e.on("touchmove",function(n){var r=n.data,i=r.$.touches[0];t(e,i.pageX,i.pageY)&&r.preventDefault()});e.on("touchend",function(r){var i=r.data,s=i.$.changedTouches[0];if(t(e,s.pageX,s.pageY)){i.preventDefault();var o=(new Date-e.mO)/100,u=s.pageX-e.na,a=s.pageY-e.mP;e.mK=u/o;e.nu=a/o;e.jy=s.pageX;e.mv=s.pageY;e.nf=0;e.interval=window.setInterval(function(){n(e)},100)}})}function t(e,t,n){var r=Math.round(t-e.na),i=Math.round(n-e.mP),s=e.nx-r,o=e.lL-i;if(e.$.scrollLeft==s&&e.$.scrollTop==o)return!1;e.$.scrollLeft=s;e.$.scrollTop=o;return Math.abs(r)>Math.abs(i)?e.$.scrollLeft==s:e.$.scrollTop==o}function n(e){var n=7,r=Math.cos(e.nf/n*Math.PI/2);e.jy+=e.mK*r;e.mv+=e.nu*r;if(e.nf++>n||!t(e,e.jy,e.mv)){window.clearInterval(e.interval);delete e.interval;return}}h.add("mobile",{bM:["foldertree","filesview"],bz:function(n){var r="ontouchstart"in window;if(!s.isMobile&&!r)return;n.config.showContextMenuArrow=!0;if(!s.isMobile)return;n.on("uiReady",function(r){if(s.webkit&&s.version<534||s.opera){e(n.layout.pS());e(n.layout.pn())}n.hs=function(e,t,n,r){var i=window.prompt(t,n);i!==null&&r(i)};n.msgDialog=function(e,t,n){window.alert(t);n&&n()};n.fe=function(e,t,n){window.confirm(t)&&n()}},null,null,20)}})})();h.add("panel",{eK:function(t){t.bY.kd(e.UI_PANEL,p.panel.dq)}});e.UI_PANEL=2;p.panel=function(t,n,r){var i=this;n&&a.extend(i,n);a.extend(i,{className:""});var s=e.basePath;a.extend(i.css,[s+"skins/"+r+"/uipanel.css"]);i.id=a.getNextNumber();i.document=t;i._={iq:{}}};p.panel.dq={create:function(e){return new p.panel(e)}};p.panel.prototype={nt:function(e){var t=[];this.er(e,t);return t.join("")},er:function(e,t){var n=this,r="cke_"+n.id;t.push('<div class="',e.iy,' cke_compatibility" lang="',e.langCode,'" role="presentation" style="display:none;z-index:'+(e.config.baseFloatZIndex+1)+'">'+"<div"+' id="',r,'"',' dir="',e.lang.dir,'"',' role="presentation" class="cke_panel cke_',e.lang.dir);n.className&&t.push(" ",n.className);t.push('">');if(n.lE||n.css.length){t.push('<iframe id="',r,'_frame" frameborder="0" src="');var i=s.isCustomDomain(),u="document.open();"+(i?'document.domain="'+window.document.domain+'";':"")+"document.close();";t.push(o?"javascript:void(function(){"+encodeURIComponent(u)+"}())":"");t.push('"></iframe>')}t.push("</div></div>");return r},oU:function(){var e=this._.rE;if(!e){if(this.lE||this.css.length){var t=this.document.getById("cke_"+this.id+"_frame"),n=t.getParent(),r=n.getAttribute("dir"),i=n.getParent().getAttribute("class").split(" ")[0],o=n.getParent().getAttribute("lang"),u=t.getFrameDocument();u.$.open();s.isCustomDomain()&&(u.$.domain=document.domain);var f=a.addFunction(a.bind(function(e){this.hm=!0;this.onLoad&&this.onLoad()},this)),l=u.getWindow();l.$.CKFinder=CKFinder;var c=s.cssClass.replace(/browser_quirks|browser_iequirks/g,"");u.$.write("<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'><html dir=\""+r+'" class="'+i+'_container" lang="'+o+'">'+"<head>"+"<style>."+i+"_container{visibility:hidden}</style>"+"</head>"+'<body class="cke_'+r+" cke_panel_frame "+c+' cke_compatibility" style="margin:0;padding:0"'+' onload="var ckfinder = window.CKFinder || window.parent.CKFinder; ckfinder && ckfinder.tools.callFunction('+f+');">'+"</body>"+'<link type="text/css" rel=stylesheet href="'+this.css.join('"><link type="text/css" rel="stylesheet" href="')+'">'+"</html>");u.$.close();l.$.CKFinder=CKFinder;u.on("keydown",function(e){var t=this,n=e.data.db();if(t._.onKeyDown&&t._.onKeyDown(n)===!1){e.data.preventDefault();return}n==27&&t.onEscape&&t.onEscape()},this);e=u.bH()}else e=this.document.getById("cke_"+this.id);this._.rE=e}return e},qq:function(e,t){var n=this;t=n._.iq[e]=t||new p.panel.block(n.oU());n._.iL||n.gf(e);return t},iv:function(e){return this._.iq[e]},gf:function(e){var t=this,n=t._.iq,r=n[e],i=t._.iL;i&&i.hide();t._.iL=r;r._.cQ=-1;t._.onKeyDown=r.onKeyDown&&a.bind(r.onKeyDown,r);r.show();return r}};p.panel.block=a.createClass({$:function(e){var t=this;t.element=e.append(e.getDocument().createElement("div",{attributes:{"class":"cke_panel_block",role:"presentation"},gS:{display:"none"}}));t.jQ={};t._.cQ=-1;t.element.hX()},_:{},ej:{show:function(){this.element.setStyle("display","")},hide:function(){var e=this;(!e.onHide||e.onHide.call(e)!==!0)&&e.element.setStyle("display","none")},onKeyDown:function(e){var t=this,n=t.jQ[e];switch(n){case"next":var r=t._.cQ,i=t.element.eG("a"),s;while(s=i.getItem(++r))if(s.getAttribute("_cke_focus")&&s.$.offsetWidth){t._.cQ=r;s.focus();break}return!1;case"prev":r=t._.cQ;i=t.element.eG("a");while(r>0&&(s=i.getItem(--r)))if(s.getAttribute("_cke_focus")&&s.$.offsetWidth){t._.cQ=r;s.focus();break}return!1;case"click":r=t._.cQ;s=r>=0&&t.element.eG("a").getItem(r);s&&(s.$.click?s.$.click():s.$.onclick());return!1}return!0}}});h.add("resize",{bz:function(t){var n=t.config;n.nB&&t.on("uiReady",function(){function o(e){t.document.bH().addClass("during_sidebar_resize");var r=e.data.$.screenX-i.x,o=s.width+r*(t.lang.dir=="rtl"?-1:1);t.nJ(Math.max(n.nN,Math.min(o,n.nC)))}function u(n){t.document.bH().removeClass("during_sidebar_resize");e.document.removeListener("mousemove",o);e.document.removeListener("mouseup",u);if(t.document){t.document.removeListener("mousemove",o);t.document.removeListener("mouseup",u)}}var r=null,i,s;t.layout.dV().on("mousedown",function(n){r||(r=t.layout.dV());if(n.data.bK().$!=r.$)return;s={width:r.$.offsetWidth||0};i={x:n.data.$.screenX};e.document.on("mousemove",o);e.document.on("mouseup",u);if(t.document){t.document.on("mousemove",o);t.document.on("mouseup",u)}})})}});c.nN=120;c.nC=500;c.nB=!0;(function(){function t(){var t=e.aG.hS("status","status");t.bh("ShowFileInfo",["requestShowFileInfo"],function(r){r.result=this.oW("beforeShowFileInfo",r.data,function(r,i){var s=this;if(r)return;var o=i.file;try{var u=o?n(o,s.app.lang):"";s.bn().setHtml(u);s.oW("successShowFileInfo",i)}catch(a){s.oW("failedShowFileInfo",i);throw e.ba(a)}s.oW("afterShowFileInfo",i)})});t.bh("ShowFolderInfo",["requestShowFolderInfo"],function(n){n.result=this.oW("beforeShowFolderInfo",n.data,function(i,s){var o=this;if(i)return;var u=s.folder;try{var a=r(n.data.ib.data().files.length,o.app.lang);o.bn().setHtml(a);o.oW("successShowFolderInfo",s)}catch(f){o.oW("failedShowFolderInfo",s);throw e.ba(f)}o.oW("afterShowFolderInfo",s)})})}function n(e,t){return"<p>"+e.name+" ("+a.formatSize(e.size,t,!0)+", "+e.dateF+")</p>"}function r(e,t){var n;e===0?n=t.FilesCountEmpty:e==1?n=t.FilesCountOne:n=t.FilesCountMany.replace("%1",e);return"<p>"+a.htmlEncode(n)+"</p>"}h.add("status",{bM:["filesview"],onLoad:function(){t()},gr:function(n){var r=this;n.on("themeSpace",function(t){t.data.space=="mainBottom"&&(t.data.html+='<div id="status_view" class="view" role="status"></div>')});n.on("uiReady",function(i){var s=n.document.getById("status_view"),o=n.aG["filesview.filesview"],u=e.aG.bz(n,"status",r,s,{parent:o});if(o.app==n){o.on("successSelectFile",function(t){u.oW("requestShowFileInfo",t.data)});o.on("successShowFolderFiles",function(t){t.data.ib=this;u.oW("requestShowFolderInfo",t.data)})}n.on("afterCommandExecDefered",function(t){if(t.data.name=="RemoveFile"){var n={folder:t.data.folder,ib:o};u.oW("requestShowFolderInfo",n)}});u.on("afterShowFileInfo",function(t){if(this.bn().getText())return;u.oW("requestShowFolderInfo",{ib:o,folder:o.data().folder})})})}})})();(function(){var e=function(){this.fk=[];this.pZ=!1};e.prototype.focus=function(){for(var e=0,t;t=this.fk[e++];)for(var n=0,r;r=t.items[n++];)if(r.focus){r.focus();return}};var t={hW:{iH:{qt:1,source:1},exec:function(e){if(e.dh){e.dh.pZ=!0;o?setTimeout(function(){e.dh.focus()},100):e.dh.focus()}}}};h.add("toolbar",{bM:["formpanel"],bz:function(n){var r=function(e,t){switch(t){case n.lang.dir=="rtl"?37:39:while((e=e.next||e.toolbar.next&&e.toolbar.next.items[0])&&!e.focus);e?e.focus():n.dh.focus();return!1;case n.lang.dir=="rtl"?39:37:while((e=e.previous||e.toolbar.previous&&e.toolbar.previous.items[e.toolbar.previous.items.length-1])&&!e.focus);if(e)e.focus();else{var r=n.dh.fk[n.dh.fk.length-1].items;r[r.length-1].focus()}return!1;case 27:n.focus();return!1;case 13:case 32:e.lc();return!1}return!0};n.on("themeSpace",function(t){if(t.data.space=="mainTop"){n.dh=new e;var i="cke_"+a.getNextNumber(),s=['<div id="toolbar_view" class="view"><div class="cke_toolbox cke_compatibility" role="toolbar" aria-labelledby="',i,'"'],o;s.push(">");s.push('<span id="',i,'" class="cke_voice_label">',n.lang.toolbar,"</span>");var u=n.dh.fk,f=n.config.toolbar instanceof Array?n.config.toolbar:n.config["toolbar_"+n.config.toolbar];for(var l=0;l<f.length;l++){var c=f[l];if(!c)continue;var h="cke_"+a.getNextNumber(),d={id:h,items:[]};if(o){s.push("</div>");o=0}if(c==="/"){s.push('<div class="cke_break"></div>');continue}s.push('<span id="',h,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>');var v=u.push(d)-1;if(v>0){d.previous=u[v-1];d.previous.next=d}for(var m=0;m<c.length;m++){var g,y=c[m];y=="-"?g=p.separator:g=n.bY.create(y);if(g){if(g.canGroup){if(!o){s.push('<span class="cke_toolgroup">');o=1}}else if(o){s.push("</span>");o=0}var b=g.er(n,s);v=d.items.push(b)-1;if(v>0){b.previous=d.items[v-1];b.previous.next=b}b.toolbar=d;b.onkey=r}}if(o){s.push("</span>");o=0}s.push('<span class="cke_toolbar_end"></span></span>')}s.push("</div></div>");t.data.html+=s.join("")}});n.bD("hW",t.hW)}})})();p.separator={er:function(e,t){t.push('<span class="cke_separator"></span>');return{}}};c.toolbar_Basic=[["Upload","Refresh"]];c.toolbar_Full=[["Upload","Refresh","Settings","Maximize","Help"]];c.toolbar="Full";(function(){h.add("tools",{eK:function(t){this.app=t},addTool:function(e,t){var n="tool_"+a.getNextNumber();e=t?'<div id="'+n+'" class="view tool_panel" tabindex="0" style="display: none;">'+e+"</div>":'<div id="'+n+'" class="tool" style="display: none;">'+e+"</div>";this.app.layout.dV().getChild(0).appendHtml(e);return n},addToolPanel:function(e){e=e||"";var t=this.addTool(e,1),n=this.app.layout.dV().getChild(0).dB();a.mH(n);return t},hideTool:function(e){this.app.document.getById(e).setStyle("display","none");this.app.layout.ea(!0)},showTool:function(e){this.app.document.getById(e).removeStyle("display");this.app.layout.ea(!0)},removeTool:function(e){this.hideTool(e);this.app.document.getById(e).remove()}})})();(function(){function t(){function n(){var t="RMRHY5Q4S,GGYXTSBLA,QS8F4ZFUJ";return e.bF.length>0&&t.indexOf(e.bF.substr(0,9))!=-1}function r(t,n){var r=this,i=r.data(),s=1,o=this.tools.qO(),u=o&&o.$.value;if(!u.length){t.data.preventDefault(!0);this.oW("failedUploadFileForm");this.oW("afterUploadFileForm");return!1}var a=u.match(/\.([^\.]+)\s*$/)[1];if(!a||!n.getResourceType().isExtensionAllowed(a)){t.data.preventDefault();r.app.msgDialog("",r.app.lang.UploadExtIncorrect)}else s=0;if(s){t.data.preventDefault(!0);this.oW("failedUploadFileForm");this.oW("afterUploadFileForm");return!1}var f=r.app.document.getWindow().$;f.OnUploadCompleted=function(e,t){var i={step:3,filename:e,folder:n};if(t&&!e){r.app.msgDialog("",t);var s=r.tools.qB();s.setStyle("display","none");s.getChild(1).setText("");s.getChild(2).setText("");r.oW("failedUploadFileForm",i)}else{t&&r.app.msgDialog("",t);r.app.aV==n&&r.app.oW("requestShowFolderFiles",{folder:n,mw:e});r.oW("requestUnloadForm");r.oW("successUploadFileForm",i)}r.oW("afterUploadFileForm",i);try{delete f.OnUploadCompleted}catch(o){f.OnUploadCompleted=undefined}};e.log("[UPLOADFORM] Starting IFRAME file upload.");this.oW("successUploadFileForm",{step:2});return!0}function i(e,t,n){return'<form enctype="multipart/form-data" id="upload_form" role="region" action="'+n+'" method="POST" target="'+t+'">'+'<h2 role="heading">'+e.lang.UploadTitle+"</h2>"+'<p><input type="file" name="upload" /></p>'+'<div class="buttons_wrapper"><div class="buttons">'+'<input type="submit" value="'+e.lang.UploadBtn+'" />'+'<input type="button" name="cancel" value="'+e.lang.UploadBtnCancel+'" />'+"</div></div>"+"</form>"}var t=e.aG.bX["formpanel.formpanel"];if(!t)return;t.bh("UploadFileForm",["requestUploadFileForm"],function(s){var o=this.app.aV,u=this;this.oW("beforeUploadFileForm",{folder:o,step:1},function(s,o){if(s||n())return;var f=this.data(),l=o.folder,c=0;if(!l){this.app.msgDialog("",this.app.lang.UploadNoFolder);c=1}if(!c&&!l.acl.fileUpload){this.app.msgDialog("",this.app.lang.UploadNoPerms);c=1}if(c){this.oW("failedUploadFileForm");this.oW("afterUploadFileForm");return}this.oW("beforeUploadFileForm",{folder:l,step:2},function(n,s){try{if(f.dc=="upload")this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(e.aS);this.oW("successUploadFileForm",s);this.oW("afterUploadFileForm",s)});else{f.dc&&this.oW("requestUnloadForm");var o=this.tools.qL(),c=this.app.connector.composeUrl("FileUpload",{},l.type,l),h=i(this.app,o.$.id,c),p=this;this.oW("requestLoadForm",{html:h,dq:a.bind(function(e){return r.call(p,e,l)}),cC:["submit"],cancelSubmit:0,gM:0,command:"upload"},function(){this.eh.addClass("show_border");s.step=1;this.oW("successUploadFileForm",s)});function d(e){if(e.data.folder&&e.data.folder.acl.fileUpload){var t=u.tools.qO();u.oW("requestUnloadForm");u.oW("requestUploadFileForm",function(){var n=u.tools.qO();t.kB(n);n.remove();delete u.tools.jj})}}var v=this.app.aG["filesview.filesview"];v.on("successShowFolderFiles",d);this.on("requestUnloadForm",function(t){t.removeListener();v.removeListener("successShowFolderFiles",d)})}}catch(m){this.oW("failedUploadFileForm",s);this.oW("afterUploadFileForm",s);throw e.ba(m)}})})});t.tools.releaseDomNodes=a.override(t.tools.releaseDomNodes,function(e){return function(){var t=this;e.apply(t,arguments);delete t.jj;delete t.jc;if(t.gq!==undefined){t.gq.remove();delete t.gq}}});t.tools.qB=function(){var e=this;e.jc===undefined&&(e.jc=e.ib.bn().getChild([0,2]));return e.jc};t.tools.qO=function(){var e=this;e.jj===undefined&&(e.jj=e.ib.bn().getChild([0,1,0]));return e.jj};t.tools.qL=function(){var e=this;if(e.gq===undefined){var t=s.isCustomDomain(),n="ckf_"+a.getNextNumber(),r='<iframe id="'+n+'"'+' name="'+n+'"'+' style="display:none"'+' frameBorder="0"'+(t?" src=\"javascript:void((function(){document.open();document.domain='"+document.domain+"';"+"document.close();"+'})())"':"")+' tabIndex="-1"'+' allowTransparency="true"'+"></iframe>",i=e.ib.app.document.bH();i.appendHtml(r);e.gq=i.dB()}return e.gq}}h.add("uploadform",{bM:["formpanel","button"],readOnly:!1,md:function(){if(!s.webkit)return!0;var e=document.createElement("input");e.setAttribute("type","file");return e.disabled===!1},onLoad:function(){if(!this.md())return;t()},gr:function(n){if(!this.md())return;n.bD("upload",{exec:function(t){t.oW("requestUploadFileForm",null,function(){t.cS("upload").bu==e.eV&&setTimeout(function(){var e=t.aG["formpanel.formpanel"].tools.ij();if(e){var n=e.eG("input").getItem(0);n.on("change",function(){if(n.getValue())for(var t=0;t<e.$.elements.length;t++){var r=e.$.elements[t];r.nodeName=="INPUT"&&r.type=="submit"&&r.click()}});n.$.click?n.$.click():n.focus()}},0)})}});n.bY.add("Upload",e.UI_BUTTON,{label:n.lang.Upload,command:"upload"});n.on("appReady",function(t){n.aG["filesview.filesview"].on("successShowFolderFiles",function(r){var i=this.tools.currentFolder(),s=this.app.cS("upload");if(i&&i.acl.fileUpload)s.bu==e.aY&&s.bR(e.aS);else{var o=n.aG["formpanel.formpanel"];o.data().dc=="upload"&&o.oW("requestUnloadForm");s.bR(e.aY)}})})}})})();(function(){function e(e,t){function L(){if(E)return;try{var e=l.getElementsByTagName("body")[0].appendChild(W("span"));e.parentNode.removeChild(e)}catch(t){return}E=!0;var n=p.length;for(var r=0;r<n;r++)p[r]()}function A(e){E?e():p[p.length]=e}function O(e){if(typeof f.addEventListener!=n)f.addEventListener("load",e,!1);else if(typeof l.addEventListener!=n)l.addEventListener("load",e,!1);else if(typeof f.attachEvent!=n)X(f,"onload",e);else if(typeof f.onload=="function"){var t=f.onload;f.onload=function(){t();e()}}else f.onload=e}function M(){h?_():D()}function _(){var e=l.getElementsByTagName("body")[0],t=W(r);t.setAttribute("type",o);var i=e.appendChild(t);if(i){var s=0;(function(){if(typeof i.GetVariable!=n){var r=i.GetVariable("$version");if(r){r=r.split(" ")[1].split(",");C.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]}}else if(s<10){s++;setTimeout(arguments.callee,10);return}e.removeChild(t);i=null;D()})()}else D()}function D(){var e=d.length;if(e>0)for(var t=0;t<e;t++){var r=d[t].id,i=d[t].callbackFn,s={success:!1,id:r};if(C.pv[0]>0){var o=z(r);if(o)if(V(d[t].swfVersion)&&!(C.wk&&C.wk<312)){J(r,!0);if(i){s.success=!0;s.ref=P(r);i(s)}}else if(d[t].ln&&H()){var u={};u.data=d[t].ln;u.width=o.getAttribute("width")||"0";u.height=o.getAttribute("height")||"0";o.getAttribute("class")&&(u.styleclass=o.getAttribute("class"));o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));B(u,a,r,i)}else{j(o);i&&i(s)}}else{J(r,!0);if(i){var h=P(r);if(h&&typeof h.SetVariable!=n){s.success=!0;s.ref=h}i(s)}}}}function P(e){var t=null,i=z(e);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=n)t=i;else{var s=i.getElementsByTagName(r)[0];s&&(t=s)}return t}function H(){return!S&&V("6.0.65")&&(C.win||C.mac)&&!(C.wk&&C.wk<312)}function B(e,t,r,i){S=!0;b=i||null;w={success:!1,id:r};var s=z(r);if(s){if(s.nodeName=="OBJECT"){g=F(s);y=null}else{g=s;y=r}e.id=u;if(typeof e.width==n||!/%$/.test(e.width)&&parseInt(e.width,10)<310)e.width="310";if(typeof e.height==n||!/%$/.test(e.height)&&parseInt(e.height,10)<137)e.height="137";l.title=l.title.slice(0,47)+" - Flash Player Installation";var o=C.ie&&C.win?"ActiveX":"PlugIn",a="MMredirectURL="+f.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+l.title;typeof t.flashvars!=n?t.flashvars+="&"+a:t.flashvars=a;if(C.ie&&C.win&&s.readyState!=4){var c=W("div");r+="SWFObjectNew";c.setAttribute("id",r);s.parentNode.insertBefore(c,s);s.style.display="none";(function(){s.readyState==4?s.parentNode.removeChild(s):setTimeout(arguments.callee,10)})()}I(e,t,r)}}function j(e){if(C.ie&&C.win&&e.readyState!=4){var t=W("div");e.parentNode.insertBefore(t,e);t.parentNode.replaceChild(F(e),t);e.style.display="none";(function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)})()}else e.parentNode.replaceChild(F(e),e)}function F(e){var t=W("div");if(C.win&&C.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(r)[0];if(n){var i=n.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&t.appendChild(i[o].cloneNode(!0))}}}return t}function I(e,t,i){var s,u=z(i);if(C.wk&&C.wk<312)return s;if(u){typeof e.id==n&&(e.id=i);if(C.ie&&C.win){var a="";for(var f in e)e[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?t.movie=e[f]:f.toLowerCase()=="styleclass"?a+=' class="'+e[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+e[f]+'"'));var l="";for(var c in t)t[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+t[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>";v[v.length]=e.id;s=z(e.id)}else{var h=W(r);h.setAttribute("type",o);for(var p in e)e[p]!=Object.prototype[p]&&(p.toLowerCase()=="styleclass"?h.setAttribute("class",e[p]):p.toLowerCase()!="classid"&&h.setAttribute(p,e[p]));for(var d in t)t[d]!=Object.prototype[d]&&d.toLowerCase()!="movie"&&q(h,d,t[d]);u.parentNode.replaceChild(h,u);s=h}}return s}function q(e,t,n){var r=W("param");r.setAttribute("name",t);r.setAttribute("value",n);e.appendChild(r)}function R(e){var t=z(e);if(t&&t.nodeName=="OBJECT")if(C.ie&&C.win){t.style.display="none";(function(){t.readyState==4?U(e):setTimeout(arguments.callee,10)})()}else t.parentNode.removeChild(t)}function U(e){var t=z(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function z(e){var t=null;try{t=l.getElementById(e)}catch(n){}return t}function W(e){return l.createElement(e)}function X(e,t,n){e.attachEvent(t,n);m[m.length]=[e,t,n]}function V(e){var t=C.pv,n=e.split(".");n[0]=parseInt(n[0],10);n[1]=parseInt(n[1],10)||0;n[2]=parseInt(n[2],10)||0;return t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function $(e,t,i,s){if(C.ie&&C.mac)return;var o=l.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";if(s){x=null;T=null}if(!x||T!=u){var a=W("style");a.setAttribute("type","text/css");a.setAttribute("media",u);x=o.appendChild(a);C.ie&&C.win&&typeof l.styleSheets!=n&&l.styleSheets.length>0&&(x=l.styleSheets[l.styleSheets.length-1]);T=u}C.ie&&C.win?x&&typeof x.addRule==r&&x.addRule(e,t):x&&typeof l.createTextNode!=n&&x.appendChild(l.createTextNode(e+" {"+t+"}"))}function J(e,t){if(!N)return;var n=t?"visible":"hidden";E&&z(e)?z(e).style.visibility=n:$("#"+e,"visibility:"+n)}function K(e){var t=/[\\\"<>\.;]/,r=t.exec(e)!=null;return r&&typeof encodeURIComponent!=n?encodeURIComponent(e):e}var n="undefined",r="object",i="Shockwave Flash",s="ShockwaveFlash.ShockwaveFlash",o="application/x-shockwave-flash",u="SWFObjectExprInst",a="onreadystatechange",f=e,l=t,c=navigator,h=!1,p=[M],d=[],v=[],m=[],g,y,b,w,E=!1,S=!1,x,T,N=!0,C=function(){var e=typeof l.getElementById!=n&&typeof l.getElementsByTagName!=n&&typeof l.createElement!=n,t=c.userAgent.toLowerCase(),u=c.platform.toLowerCase(),a=u?/win/.test(u):/win/.test(t),p=u?/mac/.test(u):/mac/.test(t),d=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof c.plugins!=n&&typeof c.plugins[i]==r){g=c.plugins[i].description;if(g&&(typeof c.mimeTypes==n||!c.mimeTypes[o]||!!c.mimeTypes[o].enabledPlugin)){h=!0;v=!1;g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1");m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10);m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10);m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof f.ActiveXObject!=n)try{var y=new ActiveXObject(s);if(y){g=y.GetVariable("$version");if(g){v=!0;g=g.split(" ")[1].split(",");m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}}}catch(b){}return{w3:e,pv:m,wk:d,ie:v,win:a,mac:p}}(),k=function(){if(!C.w3)return;(typeof l.readyState!=n&&l.readyState=="complete"||typeof l.readyState==n&&(l.getElementsByTagName("body")[0]||l.body))&&L();if(!E){typeof l.addEventListener!=n&&l.addEventListener("DOMContentLoaded",L,!1);if(C.ie&&C.win){l.attachEvent(a,function(){if(l.readyState=="complete"){l.detachEvent(a,arguments.callee);L()}});f==top&&function(){if(E)return;try{l.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}L()}()}C.wk&&function(){if(E)return;if(!/loaded|complete/.test(l.readyState)){setTimeout(arguments.callee,0);return}L()}();O(L)}}();setTimeout(function(){L()},100);var Q=function(){C.ie&&C.win&&e.attachEvent("onunload",function(){var e=m.length;for(var t=0;t<e;t++)m[t][0].detachEvent(m[t][1],m[t][2]);var n=v.length;for(var r=0;r<n;r++)R(v[r]);for(var i in C)C[i]=null;C=null;if(typeof swfobject!="undefined"){for(var s in swfobject)swfobject[s]=null;swfobject=null}})}();return{gH:function(e,t,n,r){if(C.w3&&e&&t){var i={};i.id=e;i.swfVersion=t;i.ln=n;i.callbackFn=r;d[d.length]=i;J(e,!1)}else r&&r({success:!1,id:e})},lp:function(e){if(C.w3)return P(e)},embedSWF:function(e,t,i,s,o,u,a,f,l,c){var h={success:!1,id:t};if(C.w3&&!(C.wk&&C.wk<312)&&e&&t&&i&&s&&o){J(t,!1);A(function(){i+="";s+="";var p={};if(l&&typeof l===r)for(var d in l)p[d]=l[d];p.data=e;p.width=i;p.height=s;var v={};if(f&&typeof f===r)for(var m in f)v[m]=f[m];if(a&&typeof a===r)for(var g in a)typeof v.flashvars!=n?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(V(o)){var y=I(p,v,t);p.id==t&&J(t,!0);h.success=!0;h.ref=y}else{if(u&&H()){p.data=u;B(p,v,t,c);return}J(t,!0)}c&&c(h)})}else c&&c(h)},switchOffAutoHideShow:function(){N=!1},ua:C,kL:function(){return{major:C.pv[0],minor:C.pv[1],release:C.pv[2]}},kf:V,iV:function(e,t,n){return C.w3?I(e,t,n):undefined},jS:function(e,t,n,r){C.w3&&H()&&B(e,t,n,r)},jv:function(e){C.w3&&R(e)},ik:function(e,t,n,r){C.w3&&$(e,t,n,r)},cz:A,jC:O,kY:function(e){var t=l.location.search||l.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return K(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return K(n[r].substring(n[r].indexOf("=")+1))}return""},lq:function(){if(S){var e=z(u);if(e&&g){e.parentNode.replaceChild(g,e);if(y){J(y,!0);C.ie&&C.win&&(g.style.display="block")}b&&b(w)}S=!1}}}}CKFinder.addPlugin("flashupload",{readOnly:!1,appReady:function(t){if(t.config.connectorLanguage=="asp"&&!CKFinder.env.ie)return;var n=t.document,r=n.defaultView||n.parentWindow,i=e(r,n);if(!i.kf("10.2.0"))return;setTimeout(function(){t.replaceUploadForm('<iframe src="'+CKFinder.getPluginPath("flashupload")+"Uploader.html"+'" style="width: 100%; height: 98%;" frameBorder="0"></iframe>',function(){t.resizeFormPanel(100);r.api=t;r.create_swfobject=e;r.sessionIdentifiers={CFID:"CFID",CFTOKEN:"CFTOKEN",JSESSIONID:"jsessionid"};!CKFinder.env.ie&&!r.flash_cookies&&t.connector.sendCommandPost("LoadCookies",null,null,function(e){if(e.checkError())return!1;var t=e.selectSingleNode("Connector/Cookies");if(t){var n=t.attributes.getNamedItem("sessionCookieName"),i=t.attributes.getNamedItem("sessionParameterName");n&&n.value&&i&&i.value&&(r.sessionIdentifiers[n.value]=i.value)}var s=e.selectNodes("Connector/Cookies/Cookie");if(s&&s.length){r.flash_cookies={};for(var o=0;o<s.length;o++){var u=s[o].attributes.getNamedItem("value").value,a=s[o].attributes.getNamedItem("name").value;r.flash_cookies[a]=u}}})},!1,12)},100)}})})();(function(){function i(t,n){var i=t.aG["formpanel.formpanel"],s=t.cS("upload"),o;if(s.bu==e.aY)return;if(s.bu==e.eV)for(o=0;o<n.length;o++)a(i,n[o]);else{for(o=0;o<n.length;o++)r.push(n[o]);s.exec()}}function o(e,t){e=e.getChild([0,0]);var n=e.getChild(0),r=e.getChild(1),i=e.getChild([2,0]),s=e.getChild(3),o=e.getChild(4),u={},a=0,f=0,l=e.getDocument().getById("ckf_cancelUpload"),c=!1,h=0,p=[],d=t.config.maxSimultaneousUploads,v=0,m=0,g=0;this.ns=function(){p=[];for(var e in u){var t=u[e];t.close&&t.close()}y();return!0};this.ld=function(e){u[e.id]=e;f++;if(f==1){l.getFirst().setHtml(t.lang.UploadBtnCancel);l.addClass("cke_dialog_ui_button_cancel");l.removeClass("cke_dialog_ui_button_ok")}};this.lQ=function(e){a--;f===0&&a===0&&l.oW("click")};this.mU=function(e,n,r){a++;n&&t.aV==n.folder&&(c=n);f--;delete u[e.id];if(r){g+=e.size;h--;if(p.length>0){h++;p.shift().mW()}}if(f===0){l.getFirst().setHtml(t.lang.CloseBtn);l.addClass("cke_dialog_ui_button_ok");l.removeClass("cke_dialog_ui_button_cancel");y()}or();nU()};this.mE=function(e,t){v--;m-=e.size;b();if(t)for(var n=0;n<p.length;n++)if(p[n]==e){p.splice(n,1);return}};var y=function(){if(c){t.aV==c.folder&&t.oW("requestShowFolderFiles",{folder:c.folder,mw:c.filename});c=null}};this.nU=function(){var e=0;for(var n in 
u){var r=u[n];r.speed&&(e+=r.speed)}o.setText(CKFinder.tools.formatSpeed(e,t.lang))};this.or=function(){var e=g;for(var n in u){var r=u[n];r.lT&&(e+=r.lT)}var o=m===0?0:e/m*100;o<0&&(o=0);o>100&&(o=100);i.setStyle("width",o+"%");o!==0&&o!=100&&(o=o.toFixed(1));s.setText(t.lang.UploadUploaded.replace("!n",o)+" - "+CKFinder.tools.formatSize(e/1024,t.lang))};var b=function(){n.setText(t.lang.UploadTotalFiles+" "+v+" ");r.setText(t.lang.UploadTotalSize+" "+CKFinder.tools.formatSize(m/1024,t.lang))};this.nv=function(e){v++;m+=e.size;b();if(h<d||!d){h++;e.mW();return}p.push(e)};b();return this}function u(e,r){var i=e.bn(),s=i.getDocument(),o=e.app,u=new l("div",s),a="";this.ib=e;this.id=t++;this.speed=0;this.lT=0;this.nZ=0;u.setAttribute("class","ckf_upload_info");u.setHtml('<div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span>'+r+" </span>"+"<span></span>"+'<div class="ckf_progress_bar_container"><div></div></div>'+'<span class="ckf_status"></span>'+'<span class="ckf_speed"></span>'+'<div class="ckf_outcome"></div>'+"</div></div>"+'<div class="ckf_uploadButtons">'+'<a class="cke_dialog_ui_button cke_dialog_ui_button_cancel" name="cancel"><span class="cke_dialog_ui_button">'+o.lang.UploadBtnCancel+"</span></a>"+"</div>");i.dB().append(u);o.cg.resizeFormPanel();this.container=u;var f=this.container.getChild([0,0]);this.mx=f.getChild(1);this.ni=f.getChild([2,0]);this.mz=f.getChild(3);this.np=f.getChild(4);this.mI=f.getChild(5);var c=this;this.button=this.container.getChild([1,0]);this.button.on("click",function(){c.close()});n.ld(this);return this}function a(e,t){var n=e.app,r=n.aV,i=t.size,s=t.name;if(!s.length){e.oW("failedUploadFile");return}var o=new u(e,s);if(i===0){o.mD(n.lang.Errors[202]);return}var a=s.match(/\.([^\.]+)\s*$/),f=a&&a[1];if(!f||!r.getResourceType().isExtensionAllowed(f)){o.mD(e.app.lang.UploadExtIncorrect);return}var l=parseInt(n.config.uploadMaxSize,10);if(l&&i>l){o.mD(n.lang.Errors[203]);return}var c=parseInt(n.cg.getSelectedFolder().getResourceType().maxSize,10);if(c&&i>c&&(n.config.uploadCheckImages||!f.match(/^(jpg|jpeg|gif|png|bmp)$/i))){o.mD(n.lang.Errors[203]);return}var h=new XMLHttpRequest,p=function(t,i){var s={step:3,filename:t,folder:r};if(i&&!t)o.mD(i,s);else{var u={filename:t,folder:r};i?o.mC("",i,u):o.mC(n.lang.UploadUploaded.replace("!n%",t),"",u);e.oW("successUploadFile",s)}e.oW("afterUploadFile",s)};h.addEventListener("error",function(e){form.removeClass("progress_visible");p("",n.lang.UploadUnknError)},!1);h.addEventListener("load",function(e){var t=/(.*)\|(.*)/,n=e.target.responseText,r=n.match(t);if(!r){p("",n);return}p(r[1].replace(/\\'/g,"'"),r[2].replace(/\\'/g,"'"))},!1);h.open("POST",n.connector.composeUrl("FileUpload",{response_type:"txt"},r.type,r));o.lN(h,t)}var t=0,n,r=[];h.add("html5upload",{bM:["uploadform"],bz:function(t){if(typeof FormData=="undefined")return;var u='<div id="ckf_upload_form"><div class="ckf_upload_info" id="ckf_globalUploads"><div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span></span><span></span><div class="ckf_progress_bar_container"><div></div></div><span class="ckf_status"></span><span class="ckf_speed"></span></div></div><div class="ckf_uploadButtons"><input type="file"'+(s.safari&&!s.mac?"":" multiple")+' id="ckf_fileInput">'+'<a class="cke_dialog_ui_button"><span class="cke_dialog_ui_button" id="ckf_addFiles">'+t.lang.UploadAddFiles+"</span></a><br>"+'<a class="cke_dialog_ui_button cke_dialog_ui_button_ok" id="ckf_cancelUpload"><span class="cke_dialog_ui_button">'+t.lang.CloseBtn+"</span></a>"+"</div>"+"</div></div>";setTimeout(function(){t.cg.replaceUploadForm(u,function(){var e=t.aG["formpanel.formpanel"],s=e.bn(),u=s.getDocument(),l=u.getById("ckf_fileInput");n=o(u.getById("ckf_globalUploads"),t);l.on("change",function(e){i(t,e.jN.$.files)});if(r.length==0)window.setTimeout(function(){l.$.click()},100);else{for(var c=0;c<r.length;c++)a(e,r[c]);r=[]}u.getById("ckf_addFiles").on("click",function(e){l.$.click()});u.getById("ckf_cancelUpload").on("click",function(t){n.ns()&&e.oW("requestUnloadForm")});u.getById("ckf_upload_form").on("dragover",f)},!0,11);var e=t.layout.pn();e.getDocument().on("dragover",function(e){var t=e.data.$.dataTransfer;if(!t)return;t.dropEffect="none";s.webkit&&e.data.preventDefault()});var f=function(e){var t=e.data.$.dataTransfer;if(!t)return;if(t.files&&t.files.length||t.types&&(t.types.contains&&t.types.contains("Files")||t.types.indexOf&&t.types.indexOf("Files")!=-1)){t.dropEffect="copy";e.data.stopPropagation();e.data.preventDefault()}else{t.dropEffect="none";e.data.preventDefault()}};e.on("dragover",f);e.getDocument().on("drop",function(e){var n=e.data.$.dataTransfer;if(n&&n.files&&n.files.length>0){i(t,n.files);e.data.preventDefault()}})},500)}});u.prototype.mC=function(e,t,r){var i=this,s=i.ib.app;i.mI.setText(t);i.ni.getParent().hide();i.mz.hide();i.np.hide();n.mU(i,r,!!i.bT);delete i.bT;if(!t)i.close();else{i.button.getFirst().setHtml(s.lang.CloseBtn);i.button.addClass("cke_dialog_ui_button_ok");i.button.removeClass("cke_dialog_ui_button_cancel")}s.cg.resizeFormPanel()};u.prototype.mD=function(e,t){this.ib.oW("failedUploadFile",t);this.container.addClass("ckf_FileError");this.mC("",e)};u.prototype.close=function(){var e=this;if(e.bT&&e.bT.abort){e.bT.abort();n.mE(e,e.file);e.size=0;n.mU(e,null,!e.file);delete e.bT;delete e.file}e.container.remove();n.lQ(e)};u.prototype.nR=function(e){var t=this;t.speed=e/1024;t.np.setText(CKFinder.tools.formatSpeed(t.speed,t.ib.app.lang));n.nU()};u.prototype.or=function(e){var t=this;t.lT=e;var r=e/t.size*100;r<0&&(r=0);r>100&&(r=100);t.ni.setStyle("width",r+"%");r!==0&&r!=100&&(r=r.toFixed(1));t.mz.setText(t.ib.app.lang.UploadUploaded.replace("!n",r));n.or()};u.prototype.lN=function(e,t){var r=this;r.bT=e;r.file=t;r.size=t.size;r.mx.setText(" - "+CKFinder.tools.formatSize(t.size/1024,r.ib.app.lang));n.nv(r)};u.prototype.mW=function(){e.log("[UPLOADFORM] Starting XHR file upload.");var t=this.bT.upload;if(t){t.oS=(new Date).getTime();var n=function(e,t){var n=((new Date).getTime()-e.oS)/1e3;t.nR(e.kC/n)};t.interval=window.setInterval(n,1e3,t,this);t.onload=function(e){window.clearInterval(e.target.interval)};var r=this;t.kC=0;t.onprogress=function(e){if(e.lengthComputable){e.target.kC=e.loaded;r.or(e.loaded);n(e.target,r)}}}var i=new FormData;i.append("upload",this.file);this.bT.send(i);delete this.file}})();(function(){function t(e,t,n,r){e.execCommand(r?"moveFilesToFolder":"copyFilesToFolder",{files:n,destination:t,fileCallback:function(e,t){var n=a.indexOf(e.basketFiles,t),r=1,i=e.basketFiles.length-1;for(var s=n;s<i;s++){if(!e.basketFiles[s]){r++;continue}e.basketFiles[s]=e.basketFiles[s+r]}e.basketFiles.length=Math.max(i,0)}})}h.add("basket",{bM:["foldertree","filesview","contextmenu"],readOnly:!1,basketToolbar:[["clearBasket",{label:"BasketClear",command:"TruncateBasket",disableEmpty:!0}]],basketFileContextMenu:[["mu",{label:"BasketRemove",command:"RemoveFileFromBasket",group:"file3"}],["hN",{label:"BasketOpenFolder",command:"OpenFileFolder",group:"file1"}]],bz:function(r){var i=window.top[e.nd+"cation"][e.jG+"st"],s=[],o=function(){var t=r.basketFiles.length?e.aS:e.aY;for(var n=0,i=s.length;n<i;n++)r.cS(s[n]).bR(t)};r.bD("FolderPasteCopyBasket",{exec:function(e){var n=e.aV;if(!n)return;t(e,n,e.basketFiles)}});r.bD("FolderPasteMoveBasket",{exec:function(n){if(e.bF&&1==e.bs.indexOf(e.bF.substr(1,1))%5&&e.lS(i)!=e.lS(e.ed)||e.bF&&e.bF.substr(3,1)!=e.bs.substr((e.bs.indexOf(e.bF.substr(0,1))+e.bs.indexOf(e.bF.substr(2,1)))*9%(e.bs.length-1),1))n.msgDialog("","This function is disabled in the demo version of CKFinder.<br />Please visit the <a href='http://cksource.com/ckfinder'>CKFinder web site</a> to obtain a valid license.");else{var r=n.aV;if(!r)return;t(n,r,n.basketFiles,!0);o()}}});r.eU({folderPasteMoveBasket:{label:r.lang.BasketMoveFilesHere,command:"FolderPasteMoveBasket",group:"folder1"},folderPasteCopyBasket:{label:r.lang.BasketCopyFilesHere,command:"FolderPasteCopyBasket",group:"folder1"}});var u=r.basket=new e.aL.BasketFolder(r);r.basketFiles=[];r.on("uiReady",function(n){function h(e){for(var t in e.plugins){if(!e.plugins.hasOwnProperty(t))continue;t=e.plugins[t];if(!t.basketToolbar)continue;for(var n=0;n<t.basketToolbar.length;n++){var r=t.basketToolbar[n];if(e.bY._.items[r[0]])continue;var i=a.deepCopy(r[1]),o=i.command;if(!i.command){var u=r[1].onClick;o="BasketToolbar_"+r[0];e.bD(o,{exec:function(e){u(e.cg)}});i.command=o}var f=a.capitalize(t.name);typeof i.label=="function"?i.label=i.label.call(t,e.cg):e.lang[t.name]&&e.lang[t.name][i.label]?i.label=e.lang[t.name][i.label]:e.lang[f]&&e.lang[f][i.label]?i.label=e.lang[f][i.label]:e.lang[i.label]&&(i.label=e.lang[i.label]);i.basketToolbar=1;i.disableEmpty&&s.push(o);e.bY.add(r[0],CKFinder._.UI_BUTTON,i)}}}function p(e){if(!e.eU)return;for(var t in e.plugins){if(!e.plugins.hasOwnProperty(t))continue;t=e.plugins[t];if(!t.basketFileContextMenu)continue;for(var n=0;n<t.basketFileContextMenu.length;n++){var r=t.basketFileContextMenu[n];if(e._.iG[r[0]])continue;var i=a.deepCopy(r[1]);if(!i.command){var o="BasketContextMenu_"+r[0],u=r[1].onClick;e.bD("BasketContextMenu_"+r[0],{exec:function(e){u(e.cg)}});i.command=o}var f=a.capitalize(t.name);typeof i.label=="function"?i.label=i.label.call(t,e.cg):e.lang[t.name]&&e.lang[t.name][i.label]?i.label=e.lang[t.name][i.label]:e.lang[f]&&e.lang[f][i.label]?i.label=e.lang[f][i.label]:e.lang[i.label]&&(i.label=e.lang[i.label]);i.disableEmpty&&s.push(o);e.gp(r[0],i);c.push(r[0])}}}var i=r.aG["foldertree.foldertree"];i.on("beforeAddFolder",function(t){t.removeListener();t.data.folders.push(u)});i.on("beforeDroppable",function(n){if(!(n.data.target instanceof e.aL.BasketFolder))return;n.data.source instanceof e.aL.File&&(n.data.source=[n.data.source]);if(!a.isArray(n.data.source)||!n.data.source.length||!(n.data.source[0]instanceof e.aL.File))return;var i=n.data.source,s=0;for(var o=0,u=i.length,f,l;o<u;o++){for(f=0,l=r.basketFiles.length;f<l;f++)if(i[o].isSameFile(r.basketFiles[f])){s=1;break}s||r.basketFiles.push(i[o])}n.cancel(1)});i.on("beforeContextMenu",function(n){var i;if(n.data.folder instanceof e.aL.BasketFolder){i=n.data.bj;delete i.lI;delete i.removeFolder;delete i.kl;i.qT=r.basketFiles.length?e.aS:e.aY}else{i=n.data.bj;i.folderPasteCopyBasket=r.basketFiles.length?e.aS:e.aY;i.folderPasteMoveBasket=r.basketFiles.length?e.aS:e.aY}});i.on("beforeKeyboardNavigation",function(n){if(n.data.folder instanceof e.aL.BasketFolder){var r=n.data.db();(r==46||r==113)&&n.cancel()}});r.bD("TruncateBasket",{exec:function(e){e.basketFiles.length&&e.fe("",e.lang.BasketTruncateConfirm,function(){e.basketFiles.length=0;e.oW("requestSelectFolder",{folder:e.basket})})}});r.bD("RemoveFileFromBasket",{exec:function(e){var t=e.aG["filesview.filesview"].tools.oO();t&&t.length&&e.fe("",t.length==1?e.lang.BasketRemoveConfirm.replace("%1",t[0].name):e.lang.BasketRemoveConfirmMultiple.replace("%1",t.length),function(){for(var n=0,r=t.length,i;n<r;n++)for(i=0;i<e.basketFiles.length;i++)if(t[n].isSameFile(e.basketFiles[i])){e.basketFiles.splice(i,1);break}e.oW("requestSelectFolder",{folder:e.basket});o()})}});r.bD("OpenFileFolder",{exec:function(e){var t=e.aG["filesview.filesview"].data().cG;t&&e.oW("requestSelectFolder",{folder:t.folder})}});r.eU&&r.gp("truncateBasket",{label:r.lang.BasketClear,command:"TruncateBasket",group:"folder"});var f=[],l=r.aG["filesview.filesview"],c=[];l.on("beforeContextMenu",function(t){if(!(t.data.folder instanceof e.aL.BasketFolder))return;var n=t.data.bj;delete n.renameFile;delete n.deleteFile;delete n.deleteFiles;n.mu=e.aS;n.hN=e.aS;for(var r=0;r<c.length;r++)n[c[r]]=e.aS});l.on("beforeShowFolderFiles",function(n){if(!(n.data.folder instanceof e.aL.BasketFolder))return;n.cancel(1);this.app.oW("requestRenderFiles",{files:r.basketFiles,mj:r.lang.BasketEmpty,eu:1,folder:n.data.folder});this.app.oW("requestRepaintFolder",n.data);h(this.app);p(this.app);o();var i=this.app.dh.fk;for(var s=0;s<i.length;s++){var u=this.app.document.getById(i[s].id),a=['<span class="cke_toolgroup" id="basket">'];for(var l in this.app.bY._.items){if(!this.app.bY._.items.hasOwnProperty(l))continue;var c=r.bY._.items[l];if(!c.mp[0].basketToolbar)continue;c=r.bY.create(l);var d=c.er(r,a),v=i[s].items.push(d)-1;if(v>0){d.previous=i[s].items[v-1];d.previous.next=d}f[s]||(f[s]=[]);f[s].push(v)}a.push("</span>");u.appendHtml(a.join(""))}this.on("beforeShowFolderFiles",function(e){this.app.document.getById("basket").remove();var t=this.app.dh.fk;for(var n=0;n<t.length;n++)for(var r=0;r<t[n].items.length;r++)f[n][r]&&delete t[n].items[r];e.removeListener()},null,null,1);this.oW("successShowFolderFiles",n.data);this.oW("afterShowFolderFiles",n.data)});l.on("beforeKeyboardNavigation",function(n){var i=r.aV;if(i&&i instanceof e.aL.BasketFolder){var s=n.data.db();if(s==46){n.cancel();r.execCommand("RemoveFileFromBasket")}s==113&&n.cancel()}})},null,null,20)}});e.aL.BasketFolder=a.createClass({$:function(t){var n=this;e.aL.Folder.call(n,t,null,t.lang.BasketFolder);n.hasChildren=0;n.acl=new e.aL.Acl("1111111");n.isBasket=!0},base:e.aL.Folder,ej:{createNewFolder:function(){},getChildren:function(e){e.apply(this,null)},rename:function(){},remove:function(){},getUrl:function(){return"ckfinder://basketFolder"},getUploadUrl:function(){return null},getPath:function(){return"/"},copyFiles:function(e){},moveFiles:function(e){}}})})();e.DIALOG_RESIZE_NONE=0;e.DIALOG_RESIZE_WIDTH=1;e.DIALOG_RESIZE_HEIGHT=2;e.DIALOG_RESIZE_BOTH=3;(function(){function t(e){return!!this._.tabs[e][0].$.offsetHeight}function n(){var e=this,n=e._.gx,r=e._.cU.length,i=a.indexOf(e._.cU,n)+r;for(var s=i-1;s>i-r;s--)if(t.call(e,e._.cU[s%r]))return e._.cU[s%r];return null}function r(){var e=this,n=e._.gx,r=e._.cU.length,i=a.indexOf(e._.cU,n);for(var s=i+1;s<i+r;s++)if(t.call(e,e._.cU[s%r]))return e._.cU[s%r];return null}function i(e,t,n){this.element=t;this.cQ=n;this.fM=function(){return!t.getAttribute("disabled")&&t.isVisible()};this.focus=function(){e._.aW=this.cQ;this.element.focus()};t.on("keydown",function(e){e.data.db()in{32:1,13:1}&&this.oW("click")});t.on("focus",function(){this.oW("mouseover")});t.on("blur",function(){this.oW("mouseout")})}function b(e,t){this._={dialog:e};a.extend(this,t)}function w(t){function f(i){var s=t.hR(),o=e.document.getWindow().eR(),f=i.data.$.screenX,l=i.data.$.screenY,c=f-n.x,h=l-n.y,p,d;n={x:f,y:l};r.x+=c;r.y+=h;r.x+a[3]<u?p=-a[3]:r.x-a[1]>o.width-s.width-u?p=o.width-s.width+a[1]:p=r.x;r.y+a[0]<u?d=-a[0]:r.y-a[2]>o.height-s.height-u?d=o.height-s.height+a[2]:d=r.y;t.move(p,d,1);i.data.preventDefault()}function l(t){e.document.removeListener("mousemove",f);e.document.removeListener("mouseup",l);if(s.ie6Compat){var n=x.getChild(0).getFrameDocument();n.removeListener("mousemove",f);n.removeListener("mouseup",l)}}var n=null,r=null,i=t.getElement().getFirst(),o=t.eY(),u=o.config.dialog_magnetDistance,a=o.skin.margins||[0,0,0,0];typeof u=="undefined"&&(u=20);t.bO.title.on("mousedown",function(i){n={x:i.data.$.screenX,y:i.data.$.screenY};e.document.on("mousemove",f);e.document.on("mouseup",l);r=t.gz();if(s.ie6Compat){var o=x.getChild(0).getFrameDocument();o.on("mousemove",f);o.on("mouseup",l)}i.data.preventDefault()},t)}function E(t){function v(e){if(t._.moved&&i.lang.dir=="rtl"){var n=t._.element.getFirst();n.setStyle("right",e+"px");n.removeStyle("left")}else t._.moved||t.layout()}function m(n){p=t.hR();n=n.data.$;var r=t.bO.contents,i=r.$.getElementsByTagName("iframe").length;if(i){d=l.kE('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>');r.append(d)}f=p.height-t.bO.contents.hR("height",!(s.gecko||s.opera||o&&s.quirks));u=p.width-t.bO.contents.hR("width",1);h={x:n.screenX,y:n.screenY};c=e.document.getWindow().eR();e.document.on("mousemove",y);e.document.on("mouseup",b);if(s.ie6Compat){var a=x.getChild(0).getFrameDocument();a.on("mousemove",y);a.on("mouseup",b)}n.preventDefault&&n.preventDefault()}function y(s){var o=i.lang.dir=="rtl",a=(s.data.$.screenX-h.x)*(o?-1:1),l=s.data.$.screenY-h.y,d=p.width,m=p.height,g=d+a*(t._.moved?1:2),y=m+l*(t._.moved?1:2),b=t._.element.getFirst(),w=o&&b.getComputedStyle("right"),E=t.gz();w&&(w=w=="auto"?c.width-(E.x||0)-b.hR("width"):parseInt(w,10));E.y+y>c.height&&(y=c.height-E.y);(o?w:E.x)+g>c.width&&(g=c.width-(o?w:E.x));(r==e.DIALOG_RESIZE_WIDTH||r==e.DIALOG_RESIZE_BOTH)&&!(o&&a>0&&!E.x)&&(d=Math.max(n.minWidth||0,g-u));if(r==e.DIALOG_RESIZE_HEIGHT||r==e.DIALOG_RESIZE_BOTH)m=Math.max(n.minHeight||0,y-f);t.resize(d,m);v(w);s.data.preventDefault()}function b(){e.document.removeListener("mouseup",b);e.document.removeListener("mousemove",y);if(d){d.remove();d=null}if(s.ie6Compat){var n=x.getChild(0).getFrameDocument();n.removeListener("mouseup",b);n.removeListener("mousemove",y)}if(i.lang.dir=="rtl"){var r=t._.element.getFirst(),o=r.getComputedStyle("left");o=="auto"?o=c.width-parseInt(r.rd("right"),10)-t.hR().width:o=parseInt(o,10);r.removeStyle("right");t._.position.x+=1;t.move(o,t._.position.y)}}var n=t.dg,r=n.resizable;if(r==e.DIALOG_RESIZE_NONE)return;var i=t.eY(),u,f,c,h,p,d;t.on("load",function(){var n="";r==e.DIALOG_RESIZE_WIDTH?n=" cke_resizer_horizontal":r==e.DIALOG_RESIZE_HEIGHT&&(n=" cke_resizer_vertical");var s=l.kE('<div class="cke_resizer'+n+'"'+' title="'+a.htmlEncode(i.lang.resize)+'"></div>');s.on("mousedown",m);t.bO.footer.append(s,1)});i.on("destroy",function(){a.removeFunction(m)})}function B(e,t){var n=function(){i(this);t(this)},r=function(){i(this)},i=function(e){e.removeListener("ok",n);e.removeListener("cancel",r)};e.on("ok",n);e.on("cancel",r)}e.dialog=function(t,i){function d(e){var t=h._.eO,n=e?1:-1;if(t.length<1)return;var r=(h._.aW+n+t.length)%t.length,i=r;while(!t[i].fM()){i=(i+n+t.length)%t.length;if(i==r)break}t[i].focus();t[i].type=="text"&&t[i].select()}function m(t){if(h!=e.dialog._.dL)return;var i=t.data.db();v=0;if(i==9||i==e.dy+9){var s=i==e.dy+9;if(h._.eC){var o=s?n.call(h):r.call(h);h.selectPage(o);h._.tabs[o][0].focus()}else d(!s);v=1}else if(i==e.eJ+121&&!h._.eC){h._.eC=!0;h._.tabs[h._.gx][0].focus();v=1}else if((i==37||i==39)&&h._.eC){o=i==37?n.call(h):r.call(h);h.selectPage(o);h._.tabs[o][0].focus();v=1}if(v){t.stop();t.data.preventDefault()}}function g(e){v&&e.data.preventDefault()}var o=e.dialog._.ev[i];o=a.extend(o(t),u);o=a.clone(o);o=new y(this,o);var l=e.document,c=t.theme.pu(t);this._={app:t,element:c.element,name:i,hB:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},iX:{},tabs:{},cU:[],gx:null,nM:null,gV:0,qF:null,eC:!1,eO:[],aW:0,hasFocus:!1};this.bO=c.bO;this.bO.dialog.setStyles({position:s.ie6Compat?"absolute":"fixed",top:0,left:0,visibility:"hidden"});e.event.call(this);this.dg=o=e.oW("dialogDefinition",{name:i,dg:o},t).dg;o.onLoad&&this.on("load",o.onLoad);o.onShow&&this.on("show",o.onShow);o.onHide&&this.on("hide",o.onHide);o.onOk&&this.on("ok",function(e){o.onOk.call(this,e)===!1&&(e.data.hide=!1)});o.onCancel&&this.on("cancel",function(e){o.onCancel.call(this,e)===!1&&(e.data.hide=!1)});var h=this,p=function(e){var t=h._.contents,n=!1;for(var r in t)for(var i in t[r]){n=e.call(this,t[r][i]);if(n)return}};this.on("ok",function(e){p(function(n){if(n.validate){var r=n.validate(this);if(typeof r=="string"){t.document.getWindow().$.alert(r);r=!1}if(r===!1){n.select?n.select():n.focus();e.data.hide=!1;e.stop();return!0}}})},this,null,0);this.on("cancel",function(e){p(function(n){if(n.isChanged()){t.document.getWindow().$.confirm(t.lang.common.confirmCancel)||(e.data.hide=!1);return!0}})},this,null,0);this.bO.close.on("click",function(e){this.oW("cancel",{hide:!0}).hide!==!1&&this.hide()},this);var v;this.on("show",function(){e.document.on("keydown",m,this,null,0);(s.opera||s.gecko&&s.mac)&&e.document.on("keypress",g,this);if(s.ie6Compat){var t=x.getChild(0).getFrameDocument();t.on("keydown",m,this,null,0)}});this.on("hide",function(){e.document.removeListener("keydown",m);(s.opera||s.gecko&&s.mac)&&e.document.removeListener("keypress",g)});this.on("iframeAdded",function(e){var t=new f(e.data.iframe.$.contentWindow.document);t.on("keydown",m,this,null,0)});this.on("show",function(){if(!this._.hasFocus){this._.aW=-1;d(!0)}},this,null,4294967295);s.ie6Compat&&this.on("load",function(e){var t=this.getElement(),n=t.getFirst();n.remove();n.appendTo(t)},this);w(this);E(this);this.bO.title.setText(o.title);for(var b=0;b<o.contents.length;b++)this.addPage(o.contents[b]);var S=/cke_dialog_tab(\s|$|_)/,T=/cke_dialog_tab(\s|$)/;this.bO.tabs.on("click",function(e){var t=this,n=e.data.bK(),r=n,i,s;if(!S.test(n.$.className)&&n.getName()!="a")return;i=n.$.id.substr(0,n.$.id.lastIndexOf("_"));t.selectPage(i);if(t._.eC){t._.eC=!1;t._.aW=-1;d(!0)}e.data.preventDefault()},this);var N=[],C=e.dialog._.gv.hbox.dQ(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:o.buttons},N).getChild();this.bO.footer.setHtml(N.join(""));for(b=0;b<C.length;b++)this._.buttons[C[b].id]=C[b];e.skins.load(t,"dialog")};e.dialog.prototype={resize:function(){return function(t,n){var r=this;if(r._.hB&&r._.hB.width==t&&r._.hB.height==n)return;e.dialog.oW("resize",{dialog:r,skin:r._.app.gd,width:t,height:n},r._.app);r._.hB={width:t,height:n}}}(),hR:function(){var e=this._.element.getFirst();return{width:e.$.offsetWidth||0,height:e.$.offsetHeight||0}},mn:function(){var e=this.hR();e.height=e.height-(this.bO.title.$.offsetHeight||0)-(this.bO.footer.$.offsetHeight||0);return e},move:function(){var t;return function(n,r,i){var s=this,o=s._.element.getFirst();t===undefined&&(t=o.getComputedStyle("position")=="fixed");if(t&&s._.position&&s._.position.x==n&&s._.position.y==r)return;s._.position={x:n,y:r};if(!t){var u=e.document.getWindow().hV();n+=u.x;r+=u.y}o.setStyles({left:(n>0?n:0)+"px",top:(r>0?r:0)+"px"});i&&(s._.moved=1)}}(),gz:function(){return a.extend({},this._.position)},show:function(){var t=this._.app;if(t.mode=="qt"&&o){var n=t.getSelection();n&&n.up()}var r=this._.element,i=this.dg;if(!!r.getParent()&&!!r.getParent().equals(e.document.bH()))return;r.appendTo(e.document.bH());if(s.gecko&&s.version<10900){var u=this.bO.dialog;u.setStyle("position","absolute");setTimeout(function(){u.setStyle("position","fixed")},0)}this.resize(this._.hB&&this._.hB.width||i.minWidth,this._.hB&&this._.hB.height||i.minHeight);this.selectPage(this.dg.contents[0].id);this.reset();e.dialog._.gw===null&&(e.dialog._.gw=this._.app.config.baseFloatZIndex);this._.element.getFirst().setStyle("z-index",e.dialog._.gw+=10);if(e.dialog._.dL===null){e.dialog._.dL=this;this._.ep=null;T(this._.app);r.on("keydown",L);r.on(s.opera?"keypress":"keyup",A);for(var f in{keyup:1,keydown:1,keypress:1})r.on(f,H)}else{this._.ep=e.dialog._.dL;var l=this._.ep.getElement().getFirst();l.$.style.zIndex-=Math.floor(this._.app.config.baseFloatZIndex/2);e.dialog._.dL=this}O(this,this,"",null,function(){var e=this.getButton("cancel");e?e.click():this.oW("cancel",{hide:!0}).hide!==!1&&this.hide()});this._.hasFocus=!1;a.setTimeout(function(){this.layout();this.bO.dialog.setStyle("visibility","");this.cr("load",{});this.oW("show",{});this._.app.oW("dialogShow",this);this.gh(function(e){e.jW&&e.jW()})},100,this)},layout:function(){var t=this,n=e.document.getWindow().eR(),r=t.hR();t.move(t._.moved?t._.position.x:(n.width-r.width)/2,t._.moved?t._.position.y:(n.height-r.height)/2)},gh:function(e){var t=this;for(var n in t._.contents)for(var r in t._.contents[n])e(t._.contents[n][r]);return t},reset:function(){var e=function(e){e.reset&&e.reset()};return function(){this.gh(e);return this}}(),rN:function(){var e=arguments;this.gh(function(t){t.qi&&t.qi.apply(t,e)})},sI:function(){var e=arguments;this.gh(function(t){t.rx&&t.rx.apply(t,e)})},hide:function(){this.oW("hide",{});this._.app.oW("dialogHide",this);var t=this._.element;if(!t.getParent())return;t.remove();this.bO.dialog.setStyle("visibility","hidden");M(this);if(!this._.ep)N();else{var n=this._.ep.getElement().getFirst();n.setStyle("z-index",parseInt(n.$.style.zIndex,10)+Math.floor(this._.app.config.baseFloatZIndex/2))}e.dialog._.dL=this._.ep;if(!this._.ep){e.dialog._.gw=null;t.removeListener("keydown",L);t.removeListener(s.opera?"keypress":"keyup",A);for(var r in{keyup:1,keydown:1,keypress:1})t.removeListener(r,H);var i=this._.app;i.focus();i._.activeElement=null;i._.oO=[];if(i.mode=="qt"&&o){var u=i.getSelection();u&&u.sd(!0)}}else e.dialog._.gw-=10;this.gh(function(e){e.ki&&e.ki()})},addPage:function(t){var n=this,r=[],i=t.label?' title="'+a.htmlEncode(t.label)+'"':"",s=t.elements,o=e.dialog._.gv.vbox.dQ(n,{type:"vbox",className:"cke_dialog_page_contents",children:t.elements,expand:!!t.expand,padding:t.padding,style:t.style||"width: 100%; height: 100%;"},r),u=l.kE(r.join(""),e.document),f=l.kE(['<a class="cke_dialog_tab"',n._.gV>0?" cke_last":"cke_first",i,t.hidden?' style="display:none"':"",' id="',t.id+"_",a.getNextNumber(),'" href="javascript:void(0)"',' hp="true">',t.label,"</a>"].join(""),e.document);n._.gV===0?n.bO.dialog.addClass("cke_single_page"):n.bO.dialog.removeClass("cke_single_page");n._.tabs[t.id]=[f,u];n._.cU.push(t.id);n._.gV++;n._.qF=f;var c=n._.contents[t.id]={},h,p=o.getChild();while(h=p.shift()){c[h.id]=h;typeof h.getChild=="function"&&p.push.apply(p,h.getChild())}u.setAttribute("name",t.id);u.appendTo(n.bO.contents);f.unselectable();n.bO.tabs.append(f);if(t.accessKey){O(n,n,"bP+"+t.accessKey,D,_);n._.iX["bP+"+t.accessKey]=t.id}},selectPage:function(e){var t=this;for(var n in t._.tabs){var r=t._.tabs[n][0],i=t._.tabs[n][1];if(n!=e){r.removeClass("cke_dialog_tab_selected");i.hide()}}var s=t._.tabs[e];s[0].addClass("cke_dialog_tab_selected");s[1].show();t._.gx=e;t._.nM=a.indexOf(t._.cU,e)},vJ:function(e){var t=this._.tabs[e]&&this._.tabs[e][0];if(!t)return;t.hide()},showPage:function(e){var t=this._.tabs[e]&&this._.tabs[e][0];if(!t)return;t.show()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(e,t){return this._.contents[e][t]},getValueOf:function(e,t){return this.getContentElement(e,t).getValue()},setValueOf:function(e,t,n){return this.getContentElement(e,t).setValue(n)},getButton:function(e){return this._.buttons[e]},click:function(e){return this._.buttons[e].click()},disableButton:function(e){return this._.buttons[e].disable()},enableButton:function(e){return this._.buttons[e].enable()},vj:function(){return this._.gV},getParentApi:function(){return this._.app.cg},eY:function(){return this._.app},rf:function(){return this.eY().getSelection().rf()},tQ:function(e,t){var n=this;if(typeof t=="undefined"){t=n._.eO.length;n._.eO.push(new i(n,e,t))}else{n._.eO.splice(t,0,new i(n,e,t));for(var r=t+1;r<n._.eO.length;r++)n._.eO[r].cQ++}},setTitle:function(e){this.bO.title.setText(e)}};a.extend(e.dialog,{add:function(e,t){if(!this._.ev[e]||typeof t=="function")this._.ev[e]=t},exists:function(e){return!!this._.ev[e]},getCurrent:function(){return e.dialog._.dL},okButton:function(){var e=function(e,t){t=t||{};return a.extend({id:"ok",type:"button",label:e.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(e){var t=e.data.dialog;t.oW("ok",{hide:!0}).hide!==!1&&t.hide()}},t,!0)};e.type="button";e.override=function(t){return a.extend(function(n){return e(n,t)},{type:"button"},!0)};return e}(),cancelButton:function(){var e=function(e,t){t=t||{};return a.extend({id:"cancel",type:"button",label:e.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(e){var t=e.data.dialog;t.oW("cancel",{hide:!0}).hide!==!1&&t.hide()}},t,!0)};e.type="button";e.override=function(t){return a.extend(function(n){return e(n,t)},{type:"button"},!0)};return e}(),addUIElement:function(e,t){this._.gv[e]=t}});e.dialog._={gv:{},ev:{},dL:null,gw:null};e.event.du(e.dialog);e.event.du(e.dialog.prototype,!0);var u={resizable:e.DIALOG_RESIZE_NONE,minWidth:600,minHeight:400,buttons:[e.dialog.okButton,e.dialog.cancelButton]},c=function(e,t,n){for(var r=0,i;i=e[r];r++){if(i.id==t)return i;if(n&&i[n]){var s=c(i[n],t,n);if(s)return s}}return null},d=function(e,t,n,r,i){if(n){for(var s=0,o;o=e[s];s++){if(o.id==n){e.splice(s,0,t);return t}if(r&&o[r]){var u=d(o[r],t,n,r,!0);if(u)return u}}if(i)return null}e.push(t);return t},v=function(e,t,n){for(var r=0,i;i=e[r];r++){if(i.id==t)return e.splice(r,1);if(n&&i[n]){var s=v(i[n],t,n);if(s)return s}}return null},y=function(e,t){this.dialog=e;var n=t.contents;for(var r=0,i;i=n[r];r++)n[r]=new b(e,i);a.extend(this,t)};y.prototype={vz:function(e){return c(this.contents,e)},getButton:function(e){return c(this.buttons,e)},uh:function(e,t){return d(this.contents,e,t)},qW:function(e,t){return d(this.buttons,e,t)},uP:function(e){v(this.contents,e)},uO:function(e){v(this.buttons,e)}};b.prototype={eB:function(e){return c(this.elements,e,"children")},add:function(e,t){return d(this.elements,e,t,"children")},remove:function(e){v(this.elements,e,"children")}};var S,x,T=function(t){var n=e.document.getWindow();if(!x){var r=t.config.dialog_backgroundCoverColor||"white",i=['<div style="position: ',s.ie6Compat?"absolute":"fixed","; z-index: ",t.config.baseFloatZIndex,"; top: 0px; left: 0px; ",s.ie6Compat?"":"background-color: "+r,'" id="cke_dialog_background_cover">'];if(s.ie6Compat){var o=s.isCustomDomain(),u="<html><body style=\\'background-color:"+r+";\\'></body></html>";i.push('<iframe hp="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:');i.push("void((function(){document.open();"+(o?"document.domain='"+document.domain+"';":"")+"document.write( '"+u+"' );"+"document.close();"+"})())");i.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')}i.push("</div>");x=l.kE(i.join(""),e.document)}var a=x,f=function(){var e=n.eR();a.setStyles({width:e.width+"px",height:e.height+"px"})},c=function(){var t=n.hV(),r=e.dialog._.dL;a.setStyles({left:t.x+"px",top:t.y+"px"});do{var i=r.gz();r.move(i.x,i.y)}while(r=r._.ep)};S=f;n.on("resize",f);f();if(s.ie6Compat){var h=function(){c();arguments.callee.lw.apply(this,arguments)};n.$.setTimeout(function(){h.lw=window.onscroll||function(){};window.onscroll=h},0);c()}var p=t.config.dialog_backgroundCoverOpacity;a.setOpacity(typeof p!="undefined"?p:.5);a.appendTo(e.document.bH())},N=function(){if(!x)return;var t=e.document.getWindow();x.remove();t.removeListener("resize",S);s.ie6Compat&&t.$.setTimeout(function(){var e=window.onscroll&&window.onscroll.lw;window.onscroll=e||null},0);S=null},C={},L=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,r=e.data.$.shiftKey,i=String.fromCharCode(e.data.$.keyCode),s=C[(t?"bP+":"")+(n?"eJ+":"")+(r?"dy+":"")+i];if(!s||!s.length)return;s=s[s.length-1];s.keydown&&s.keydown.call(s.bf,s.dialog,s.iK);e.data.preventDefault()},A=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,r=e.data.$.shiftKey,i=String.fromCharCode(e.data.$.keyCode),s=C[(t?"bP+":"")+(n?"eJ+":"")+(r?"dy+":"")+i];if(!s||!s.length)return;s=s[s.length-1];if(s.keyup){s.keyup.call(s.bf,s.dialog,s.iK);e.data.preventDefault()}},O=function(e,t,n,r,i){var s=C[n]||(C[n]=[]);s.push({bf:e,dialog:t,iK:n,keyup:i||e.eZ,keydown:r||e.iU})},M=function(e){for(var t in C){var n=C[t];for(var r=n.length-1;r>=0;r--)(n[r].dialog==e||n[r].bf==e)&&n.splice(r,1);n.length===0&&delete C[t]}},_=function(e,t){e._.iX[t]&&e.selectPage(e._.iX[t])},D=function(e,t){},P={27:1,13:1},H=function(e){e.data.db()in P&&e.data.stopPropagation()};(function(){p.dialog={bf:function(t,n,r,i,s,o,u){if(arguments.length<4)return;var f=(i.call?i(n):i)||"div",l=["<",f," "],c=(s&&s.call?s(n):s)||{},h=(o&&o.call?o(n):o)||{},p=(u&&u.call?u(t,n):u)||"",d=this.oJ=h.id||a.getNextNumber()+"_uiElement",v=this.id=n.id,m;h.id=d;var g={};n.type&&(g["cke_dialog_ui_"+n.type]=1);n.className&&(g[n.className]=1);var y=h["class"]&&h["class"].split?h["class"].split(" "):[];for(m=0;m<y.length;m++)y[m]&&(g[y[m]]=1);var b=[];for(m in g)b.push(m);h["class"]=b.join(" ");n.title&&(h.title=n.title);var w=(n.style||"").split(";");for(m in c)w.push(m+":"+c[m]);n.hidden&&w.push("display:none");for(m=w.length-1;m>=0;m--)w[m]===""&&w.splice(m,1);w.length>0&&(h.style=(h.style?h.style+"; ":"")+w.join("; "));for(m in h)l.push(m+'="'+a.htmlEncode(h[m])+'" ');l.push(">",p,"</",f,">");r.push(l.join(""));(this._||(this._={})).dialog=t;typeof n.isChanged=="boolean"&&(this.isChanged=function(){return n.isChanged});typeof n.isChanged=="function"&&(this.isChanged=n.isChanged);e.event.du(this);this.nc(n);this.eZ&&this.iU&&n.accessKey&&O(this,t,"bP+"+n.accessKey);var E=this;t.on("load",function(){E.getInputElement()&&E.getInputElement().on("focus",function(){t._.eC=!1;t._.hasFocus=!0;E.oW("focus")},E)});if(this.eA){this.cQ=t._.eO.push(this)-1;this.on("focus",function(){t._.aW=E.cQ})}a.extend(this,
n)},hbox:function(e,t,n,r,i){if(arguments.length<4)return;this._||(this._={});var s=this._.children=t,o=i&&i.widths||null,u=i&&i.height||null,f={},l,c=function(){var e=['<tbody><tr class="cke_dialog_ui_hbox">'];for(l=0;l<n.length;l++){var t="cke_dialog_ui_hbox_child",r=[];l===0&&(t="cke_dialog_ui_hbox_first");l==n.length-1&&(t="cke_dialog_ui_hbox_last");e.push('<td class="',t,'" ');o?o[l]&&r.push("width:"+a.cssLength(o[l])):r.push("width:"+Math.floor(100/n.length)+"%");u&&r.push("height:"+a.cssLength(u));i&&i.padding!=undefined&&r.push("padding:"+a.cssLength(i.padding));r.length>0&&e.push('style="'+r.join("; ")+'" ');e.push(">",n[l],"</td>")}e.push("</tr></tbody>");return e.join("")};p.dialog.bf.call(this,e,i||{type:"hbox"},r,"table",f,i&&i.align&&{align:i.align}||null,c)},vbox:function(e,t,n,r,i){if(arguments.length<3)return;this._||(this._={});var s=this._.children=t,o=i&&i.width||null,u=i&&i.vY||null,f=function(){var t=['<table cellspacing="0" border="0" '];t.push('style="');i&&i.expand&&t.push("height:100%;");t.push("width:"+a.cssLength(o||"100%"),";");t.push('"');t.push('align="',a.htmlEncode(i&&i.align||(e.eY().lang.dir=="ltr"?"left":"right")),'" ');t.push("><tbody>");for(var r=0;r<n.length;r++){var s=[];t.push("<tr><td ");o&&s.push("width:"+a.cssLength(o||"100%"));u?s.push("height:"+a.cssLength(u[r])):i&&i.expand&&s.push("height:"+Math.floor(100/n.length)+"%");i&&i.padding!=undefined&&s.push("padding:"+a.cssLength(i.padding));s.length>0&&t.push('style="',s.join("; "),'" ');t.push(' class="cke_dialog_ui_vbox_child">',n[r],"</td></tr>")}t.push("</tbody></table>");return t.join("")};p.dialog.bf.call(this,e,i||{type:"vbox"},r,"div",null,null,f)}}})();p.dialog.bf.prototype={getElement:function(){return e.document.getById(this.oJ)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(e){this.getInputElement().setValue(e);this.oW("change",{value:e});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){var e=this,t=e.getInputElement(),n=t,r;while((n=n.getParent())&&n.$.className.search("cke_dialog_page_contents")==-1);if(!n)return e;r=n.getAttribute("name");e._.dialog._.gx!=r&&e._.dialog.selectPage(r);return e},focus:function(){this.selectParentTab().getInputElement().focus();return this},nc:function(e){var t=/^on([A-Z]\w+)/,n,r=function(e,t,n,r){t.on("load",function(){e.getInputElement().on(n,r,e)})};for(var i in e){if(!(n=i.match(t)))continue;this.dm[i]?this.dm[i].call(this,this._.dialog,e[i]):r(this,this._.dialog,n[1].toLowerCase(),e[i])}return this},dm:{onLoad:function(e,t){e.on("load",t,this)},onShow:function(e,t){e.on("show",t,this)},onHide:function(e,t){e.on("hide",t,this)}},iU:function(e,t){this.focus()},eZ:function(e,t){},disable:function(){var e=this.getInputElement();e.setAttribute("disabled","true");e.addClass("cke_disabled")},enable:function(){var e=this.getInputElement();e.removeAttribute("disabled");e.removeClass("cke_disabled")},isEnabled:function(){return!this.getInputElement().getAttribute("disabled")},isVisible:function(){return this.getInputElement().isVisible()},fM:function(){return!this.isEnabled()||!this.isVisible()?!1:!0}};p.dialog.hbox.prototype=a.extend(new p.dialog.bf,{getChild:function(e){var t=this;if(arguments.length<1)return t._.children.concat();e.splice||(e=[e]);return e.length<2?t._.children[e[0]]:t._.children[e[0]]&&t._.children[e[0]].getChild?t._.children[e[0]].getChild(e.slice(1,e.length)):null}},!0);p.dialog.vbox.prototype=new p.dialog.hbox;(function(){var t={dQ:function(t,n,r){var i=n.children,s,o=[],u=[];for(var a=0;a<i.length&&(s=i[a]);a++){var f=[];o.push(f);u.push(e.dialog._.gv[s.type].dQ(t,s,f))}return new p.dialog[n.type](t,u,o,r,n)}};e.dialog.addUIElement("hbox",t);e.dialog.addUIElement("vbox",t)})();e.rB=function(e){this.ry=e};e.rB.prototype={exec:function(e){e.openDialog(this.ry)},sG:!1};(function(){var t=/^([a]|[^a])+$/,n=/^\d*$/,r=/^\d*(?:\.\d+)?$/;e.sg=1;e.jb=2;e.dialog.validate={functions:function(){return function(){var t=this,n=t&&t.getValue?t.getValue():arguments[0],r=undefined,i=e.jb,s=[],o;for(o=0;o<arguments.length;o++){if(typeof arguments[o]!="function")break;s.push(arguments[o])}if(o<arguments.length&&typeof arguments[o]=="string"){r=arguments[o];o++}o<arguments.length&&typeof arguments[o]=="number"&&(i=arguments[o]);var u=i==e.jb?!0:!1;for(o=0;o<s.length;o++)i==e.jb?u=u&&s[o](n):u=u||s[o](n);if(!u){r!==undefined&&alert(r);t&&(t.select||t.focus)&&(t.select||t.focus());return!1}return!0}},regex:function(e,t){return function(){var n=this,r=n&&n.getValue?n.getValue():arguments[0];if(!e.test(r)){t!==undefined&&alert(t);n&&(n.select||n.focus)&&(n.select?n.select():n.focus());return!1}return!0}},notEmpty:function(e){return this.regex(t,e)},integer:function(e){return this.regex(n,e)},number:function(e){return this.regex(r,e)},equals:function(e,t){return this.functions(function(t){return t==e},t)},notEqual:function(e,t){return this.functions(function(t){return t!=e},t)}}})();a.extend(e.application.prototype,{openDialog:function(t,n,r){var i=e.dialog._.ev[t];if(typeof i=="function"){var s=this._.oB||(this._.oB={}),o=s[t]||(s[t]=new e.dialog(this,t));n&&n.call(o,o);!this._.activeElement&&(this._.activeElement=this.document.$.activeElement);!this._.oO&&(this._.oO=this.aG["filesview.filesview"].tools.oO());o.show();return o}if(i=="failed")throw new Error('[CKFINDER.dialog.openDialog] Dialog "'+t+'" failed when loading dg.');var u=e.document.bH(),a=u.$.style.cursor,f=this;u.setStyle("cursor","wait");e.scriptLoader.load(e.getUrl(i),function(){typeof e.dialog._.ev[t]!="function"&&(e.dialog._.ev[t]="failed");f.openDialog(t,n);u.setStyle("cursor",a)},null,null,r);return null},hs:function(e,t,n,r){var i=this;setTimeout(function(){i.cg.openDialog("Input",function(s){s.show();s.setTitle(e||i.lang.common.inputTitle);s.getContentElement("tab1","msg").getElement().setHtml(t);s.getContentElement("tab1","input").setValue(n);B(s,function(e){var t=e.getContentElement("tab1","input").getValue();r(t)})})},0)},msgDialog:function(e,t,n){var r=this;setTimeout(function(){r.cg.openDialog("Msg",function(i){i.show();i.setTitle(e||r.lang.common.messageTitle);i.getContentElement("tab1","msg").getElement().setHtml(t);n&&B(i,function(e){n()})})},0)},fe:function(e,t,n){var r=this;setTimeout(function(){r.cg.openDialog("Confirm",function(i){i.show();i.setTitle(e||r.lang.common.confirmationTitle);i.getContentElement("tab1","msg").getElement().setHtml(t);B(i,function(e){n()})})},0)},skippedFilesDialog:function(e,t,n,r){var i=this;setTimeout(function(){i.cg.openDialog("SkippedFiles",function(s){s.show();s.setTitle(e||i.lang.common.messageTitle);if(n){s.getContentElement("tab1","msg").getElement().show();s.getContentElement("tab1","msg").getElement().setHtml(n)}else s.getContentElement("tab1","msg").getElement().hide();var o="",u="cke_files_list",a="",f=t.length;if(f>3){u+=" cke_files_list_many";a=' style="height: '+Math.min(f+.1,20)+'em"'}for(var l=0;l<f;l++)o+="<li>"+(typeof t[l]=="string"?t[l]:t[l].getAttribute("name"))+"</li>";s.getContentElement("tab1","skippedList").getElement().setHtml('<ul class="'+u+'"'+a+">"+o+"</ul>");r&&B(s,function(){r()})})},0)}});h.add("dialog",{bM:["dialogui"],onLoad:function(){e.dialog.add("Confirm",function(e){return{title:e.lang.common.confirmationTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});e.dialog.add("Msg",function(e){return{title:e.lang.common.messageTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton]}});e.dialog.add("Input",function(e){return{title:e.lang.common.inputTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"},{type:"text",id:"input"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});e.dialog.add("SkippedFiles",function(e){return{title:e.lang.common.messageTitle,minWidth:400,minHeight:100,contents:[{id:"tab1",style:s.ie7Compat?"height: auto":"",expand:!0,padding:0,elements:[{type:"vbox",expand:!0,children:[{type:"html",className:"cke_dialog_msg",html:"",id:"msg"},{type:"html",id:"skippedDescription",className:"cke_dialog_msg",html:e.lang.SkippedFiles},{type:"html",id:"skippedList",className:"cke_dialog_msg",html:""}]}]}],buttons:[CKFinder.dialog.okButton]}})}})})();h.add("dialogui");(function(){var t=function(e){var t=this;t._||(t._={});t._["default"]=t._.hq=e["default"]||"";var n=[t._];for(var r=1;r<arguments.length;r++)n.push(arguments[r]);n.push(!0);a.extend.apply(a,n);return t._},n={dQ:function(e,t,n){return new p.dialog.ju(e,t,n)}},r={dQ:function(e,t,n){return new p.dialog[t.type](e,t,n)}},i={isChanged:function(){return this.getValue()!=this.lu()},reset:function(){this.setValue(this.lu())},jW:function(){this._.hq=this.getValue()},ki:function(){this._.hq=this._["default"]},lu:function(){return this._.hq}},f=a.extend({},p.dialog.bf.prototype.dm,{onChange:function(e,t){if(!this._.pL){e.on("load",function(){this.getInputElement().on("change",function(){this.oW("change",{value:this.getValue()})},this)},this);this._.pL=!0}this.on("change",t)}},!0),c=/^on([A-Z]\w+)/,h=function(e){for(var t in e)(c.test(t)||t=="title"||t=="type")&&delete e[t];return e};a.extend(p.dialog,{dD:function(n,r,i,s){if(arguments.length<4)return;var o=t.call(this,r);o.hz=a.getNextNumber()+"_label";var u=this._.children=[],f=function(){var t=[];if(r.uC!="horizontal")t.push('<div class="cke_dialog_ui_labeled_label" id="',o.hz,'" >',r.label,"</div>",'<div class="cke_dialog_ui_labeled_content">',s(n,r),"</div>");else{var i={type:"hbox",widths:r.widths,padding:0,children:[{type:"html",html:'<span class="cke_dialog_ui_labeled_label" id="'+o.hz+'">'+a.htmlEncode(r.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content">'+s(n,r)+"</span>"}]};e.dialog._.gv.hbox.dQ(n,i,t)}return t.join("")};p.dialog.bf.call(this,n,r,i,"div",null,null,f)},ju:function(e,n,r){if(arguments.length<3)return;t.call(this,n);var i=this._.le=a.getNextNumber()+"_textInput",s={"class":"cke_dialog_ui_input_"+n.type,id:i,type:"text"},o;n.validate&&(this.validate=n.validate);n.maxLength&&(s.uy=n.maxLength);n.size&&(s.size=n.size);var u=this,f=!1;e.on("load",function(){u.getInputElement().on("keydown",function(e){e.data.db()==13&&(f=!0)});u.getInputElement().on("keyup",function(t){if(t.data.db()==13&&f){e.getButton("ok")&&setTimeout(function(){e.getButton("ok").click()},0);f=!1}},null,null,1e3)});var l=function(){var e=['<div class="cke_dialog_ui_input_',n.type,'"'];n.width&&e.push('style="width:'+n.width+'" ');e.push("><input ");for(var t in s)e.push(t+'="'+s[t]+'" ');e.push(" /></div>");return e.join("")};p.dialog.dD.call(this,e,n,r,l)},textarea:function(e,n,r){if(arguments.length<3)return;t.call(this,n);var i=this,s=this._.le=a.getNextNumber()+"_textarea",o={};n.validate&&(this.validate=n.validate);o.rows=n.rows||5;o.cols=n.cols||20;var u=function(){var e=['<div class="cke_dialog_ui_input_textarea"><textarea class="cke_dialog_ui_input_textarea" id="',s,'" '];for(var t in o)e.push(t+'="'+a.htmlEncode(o[t])+'" ');e.push(">",a.htmlEncode(i._["default"]),"</textarea></div>");return e.join("")};p.dialog.dD.call(this,e,n,r,u)},checkbox:function(e,n,r){if(arguments.length<3)return;var i=t.call(this,n,{"default":!!n["default"]});n.validate&&(this.validate=n.validate);var s=function(){var t=a.extend({},n,{id:n.id?n.id+"_checkbox":a.getNextNumber()+"_checkbox"},!0),r=[],s={"class":"cke_dialog_ui_checkbox_input",type:"checkbox"};h(t);n["default"]&&(s.checked="checked");i.checkbox=new p.dialog.bf(e,t,r,"input",null,s);r.push(' <label for="',s.id,'">',a.htmlEncode(n.label),"</label>");return r.join("")};p.dialog.bf.call(this,e,n,r,"span",null,null,s)},radio:function(e,n,r){if(arguments.length<3)return;t.call(this,n);this._["default"]||(this._["default"]=this._.hq=n.items[0][1]);n.validate&&(this.validate=n.sh);var i=[],s=this,o=function(){var t=[],r=[],o={"class":"cke_dialog_ui_radio_item"},u=n.id?n.id+"_radio":a.getNextNumber()+"_radio";for(var f=0;f<n.items.length;f++){var l=n.items[f],c=l[2]!==undefined?l[2]:l[0],d=l[1]!==undefined?l[1]:l[0],m=a.extend({},n,{id:a.getNextNumber()+"_radio_input",title:null,type:null},!0),g=a.extend({},m,{id:null,title:c},!0),y={type:"radio","class":"cke_dialog_ui_radio_input",name:u,value:d},b=[];s._["default"]==d&&(y.checked="checked");h(m);h(g);i.push(new p.dialog.bf(e,m,b,"input",null,y));b.push(" ");new p.dialog.bf(e,g,b,"label",null,{"for":y.id},l[0]);t.push(b.join(""))}new p.dialog.hbox(e,[],t,r);return r.join("")};p.dialog.dD.call(this,e,n,r,o);this._.children=i},button:function(n,r,i){if(!arguments.length)return;typeof r=="function"&&(r=r(n.eY()));t.call(this,r,{disabled:r.disabled||!1});e.event.du(this);var s=this;n.on("load",function(e){var t=this.getElement();(function(){t.on("click",function(e){s.oW("click",{dialog:s.getDialog()});e.data.preventDefault()})})();t.unselectable()},this);var o=a.extend({},r);delete o.style;p.dialog.bf.call(this,n,o,i,"a",null,{style:r.style,href:"javascript:void(0)",title:r.label,hp:"true","class":r["class"]},'<span class="cke_dialog_ui_button">'+a.htmlEncode(r.label)+"</span>")},select:function(e,n,r){if(arguments.length<3)return;var i=t.call(this,n);n.validate&&(this.validate=n.validate);var s=function(){var t=a.extend({},n,{id:n.id?n.id+"_select":a.getNextNumber()+"_select"},!0),r=[],s=[],o={"class":"cke_dialog_ui_input_select"};n.size!=undefined&&(o.size=n.size);n.multiple!=undefined&&(o.multiple=n.multiple);h(t);for(var u=0,f;u<n.items.length&&(f=n.items[u]);u++)s.push('<option value="',a.htmlEncode(f[1]!==undefined?f[1]:f[0]),'" /> ',a.htmlEncode(f[0]));i.select=new p.dialog.bf(e,t,r,"select",null,o,s.join(""));return r.join("")};p.dialog.dD.call(this,e,n,r,s)},file:function(n,r,i){if(arguments.length<3)return;r["default"]===undefined&&(r["default"]="");var o=a.extend(t.call(this,r),{dg:r,buttons:[]});r.validate&&(this.validate=r.validate);var u=function(){o.gL=a.getNextNumber()+"_fileInput";var e=s.isCustomDomain(),t=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',o.gL,'" title="',r.label,'" src="javascript:void('];t.push(e?"(function(){document.open();document.domain='"+document.domain+"';"+"document.close();"+"})()":"0");t.push(')"></iframe>');return t.join("")};n.on("load",function(){var t=e.document.getById(o.gL),n=t.getParent();n.addClass("cke_dialog_ui_input_file")});p.dialog.dD.call(this,n,r,i,u)},fileButton:function(e,n,r){if(arguments.length<3)return;var i=t.call(this,n),s=this;n.validate&&(this.validate=n.validate);var o=a.extend({},n),u=o.onClick;o.className=(o.className?o.className+" ":"")+"cke_dialog_ui_button";o.onClick=function(t){var r=n["for"];if(!u||u.call(this,t)!==!1){e.getContentElement(r[0],r[1]).submit();this.disable()}};e.on("load",function(){e.getContentElement(n["for"][0],n["for"][1])._.buttons.push(s)});p.dialog.button.call(this,e,o,r)},html:function(){var e=/^\s*<[\w:]+\s+([^>]*)?>/,t=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,n=/\/$/;return function(r,i,s){if(arguments.length<3)return;var o=[],u,a=i.html,f,l;a.charAt(0)!="<"&&(a="<span>"+a+"</span>");if(i.focus){var c=this.focus;this.focus=function(){c.call(this);i.focus.call(this);this.oW("focus")};if(i.fM){var h=this.fM;this.fM=h}this.eA=!0}p.dialog.bf.call(this,r,i,o,"span",null,null,"");u=o.join("");f=u.match(e);l=a.match(t)||["","",""];if(n.test(l[1])){l[1]=l[1].slice(0,-1);l[2]="/"+l[2]}s.push([l[1]," ",f[1]||"",l[2]].join(""))}}()},!0);p.dialog.html.prototype=new p.dialog.bf;p.dialog.dD.prototype=a.extend(new p.dialog.bf,{rW:function(t){var n=e.document.getById(this._.hz);n.iu()<1?(new u.text(t,e.document)).appendTo(n):n.getChild(0).$.nodeValue=t;return this},vt:function(){var t=e.document.getById(this._.hz);return!t||t.iu()<1?"":t.getChild(0).getText()},dm:f},!0);p.dialog.button.prototype=a.extend(new p.dialog.bf,{click:function(){var e=this;if(!e._.disabled)return e.oW("click",{dialog:e._.dialog});e.getElement().$.blur();return!1},enable:function(){this._.disabled=!1;var e=this.getElement();e&&e.removeClass("disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},dm:a.extend({},p.dialog.bf.prototype.dm,{onClick:function(e,t){this.on("click",t)}},!0),eZ:function(){this.click()},iU:function(){this.focus()},eA:!0},!0);p.dialog.ju.prototype=a.extend(new p.dialog.dD,{getInputElement:function(){return e.document.getById(this._.le)},focus:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&t.$.focus()},0)},select:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();if(t){t.$.focus();t.$.select()}},0)},eZ:function(){this.select()},setValue:function(e){e=e!==null?e:"";return p.dialog.bf.prototype.setValue.call(this,e)},eA:!0},i,!0);p.dialog.textarea.prototype=new p.dialog.ju;p.dialog.select.prototype=a.extend(new p.dialog.dD,{getInputElement:function(){return this._.select.getElement()},add:function(e,t,n){var r=new l("option",this.getDialog().eY().document),i=this.getInputElement().$;r.$.text=e;r.$.value=t===undefined||t===null?e:t;n===undefined||n===null?o?i.add(r.$):i.add(r.$,null):i.add(r.$,n);return this},remove:function(e){var t=this.getInputElement().$;t.remove(e);return this},clear:function(){var e=this.getInputElement().$;while(e.length>0)e.remove(0);return this},eA:!0},i,!0);p.dialog.checkbox.prototype=a.extend(new p.dialog.bf,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(e){this.getInputElement().$.checked=e;this.oW("change",{value:e})},getValue:function(){return this.getInputElement().$.checked},eZ:function(){this.setValue(!this.getValue())},dm:{onChange:function(e,t){if(!o)return f.onChange.apply(this,arguments);e.on("load",function(){var e=this._.checkbox.getElement();e.on("propertychange",function(t){t=t.data.$;t.propertyName=="checked"&&this.oW("change",{value:e.$.checked})},this)},this);this.on("change",t);return null}},eA:!0},i,!0);p.dialog.radio.prototype=a.extend(new p.dialog.bf,{setValue:function(e){var t=this._.children,n;for(var r=0;r<t.length&&(n=t[r]);r++)n.getElement().$.checked=n.getValue()==e;this.oW("change",{value:e})},getValue:function(){var e=this._.children;for(var t=0;t<e.length;t++)if(e[t].getElement().$.checked)return e[t].getValue();return null},eZ:function(){var e=this._.children,t;for(t=0;t<e.length;t++)if(e[t].getElement().$.checked){e[t].getElement().focus();return}e[0].getElement().focus()},dm:{onChange:function(e,t){if(!o)return f.onChange.apply(this,arguments);e.on("load",function(){var e=this._.children,t=this;for(var n=0;n<e.length;n++){var r=e[n].getElement();r.on("propertychange",function(e){e=e.data.$;e.propertyName=="checked"&&this.$.checked&&t.oW("change",{value:this.getAttribute("value")})})}},this);this.on("change",t);return null}},eA:!0},i,!0);p.dialog.file.prototype=a.extend(new p.dialog.dD,i,{getInputElement:function(){var t=e.document.getById(this._.gL).getFrameDocument();return t.$.forms.length>0?new l(t.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},vy:function(e){return this.getInputElement().getParent().$.action},reset:function(){function u(){n.$.open();s.isCustomDomain()&&(n.$.domain=document.domain);var e="";r.size&&(e=r.size-(o?7:0));n.$.write(['<html><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" action="',a.htmlEncode(r.action),'">','<input type="file" name="',a.htmlEncode(r.id||"cke_upload"),'" size="',a.htmlEncode(e>0?e:""),'" />',"</form>","</body></html>"].join(""));n.$.close();for(var t=0;t<i.length;t++)i[t].enable()}var t=e.document.getById(this._.gL),n=t.getFrameDocument(),r=this._.dg,i=this._.buttons;s.gecko?setTimeout(u,500):u()},getValue:function(){return""},dm:f,eA:!0},!0);p.dialog.fileButton.prototype=new p.dialog.button;e.dialog.addUIElement("text",n);e.dialog.addUIElement("password",n);e.dialog.addUIElement("textarea",r);e.dialog.addUIElement("checkbox",r);e.dialog.addUIElement("radio",r);e.dialog.addUIElement("button",r);e.dialog.addUIElement("select",r);e.dialog.addUIElement("file",r);e.dialog.addUIElement("fileButton",r);e.dialog.addUIElement("html",r);a.extend(CKFinder.dialog,e.dialog)})();(function(){h.add("help",{bM:["toolbar","button"],bz:function(n){if(!n.config.disableHelpButton){n.bD("help",{exec:function(t){t.aG["filesview.filesview"].bn().focus();window.open(e.basePath+"help/"+(t.lang.HelpLang||"en")+"/index.html")}});n.bY.add("Help",e.UI_BUTTON,{label:n.lang.Help,command:"help"})}}})})();(function(){function c(e,t,n,r,i){var s=0,o=0,a=[];for(var f=0;f<e.length;f++)if(!r||r(e[f])){a.push('<a href="',t.folder.getUrl(),encodeURIComponent(e[f].name),'" title="',e[f].name,'" rel="',n,'">a</a>');e[f].isSameFile(t)&&(s=o);o++}d();u=new l("div",i);u.setAttribute("id","ckf_gallery");u.setHtml(a.join(""));u.appendTo(i.bH());u.hide();return s}function h(t){if(t&&t.inPopup){var n=new f(t.document),r=n.getWindow();if(!o&&!s.opera||r.$.top.location.href.match(/ckfinder.html/)||r.$.top.name=="CKFinderpopup")return n}return e.oC}function p(e){return function(){e.$.activeElement&&e.$.activeElement.blur();e.$.activeElement&&e.$.activeElement.blur();if(!s.gecko){e.getWindow().focus();e.bH().focus()}}}function d(){u&&u.remove()}function v(e){return function(){d();e&&e.focus(!0,!0)}}function m(t){if(t.click)t.click();else if(e.document.$.createEvent){var n=e.document.$.createEvent("MouseEvents");n.initEvent("click",!0,!0);t.dispatchEvent(n)}}function y(e,t,n){o&&s.version<9?e.$.onreadystatechange=function(){(this.readyState=="loaded"||this.readyState=="complete")&&setTimeout(function(){t.callee.apply(n,t)},0)}:e.on("load",function(){setTimeout(function(){t.callee.apply(n,t)},0)})}function b(e,r){if(e&&e.inPopup)return;e&&e.aG["filesview.filesview"].on("afterRenderFiles",d);var i=h(r).getWindow().$;typeof i.jQuery!="undefined"&&i.jQuery.fn.colorbox?t=1:typeof i.jQuery!="undefined"&&i.jQuery.fn.fancybox?t=2:typeof i.jQuery!="undefined"&&i.jQuery.fn.prettyPhoto?t=3:typeof i.Shadowbox!="undefined"?t=4:typeof i.Prototype!="undefined"&&typeof i.Lightbox!="undefined"&&(t=5);t&&(n=1)}var t=0,n=0,r=[],i,u;CKFinder.addPlugin("gallery",{bM:["filesview"],galleryCallback:function(e,s,o){n||b(null,e);var f=h(e),g=f.getWindow().$,E=function(e){return e.isImage()};if(!t&&e.config.gallery_autoLoad){if(!E(s))return!1;var S=f.getHead(),T=CKFinder.getPluginPath("gallery")+"colorbox/",N=arguments,C,L=typeof g.jQuery=="undefined";if(!L){var O=g.jQuery.fn.jquery.split("."),M=parseInt(O[0],10),_=parseInt(O[1],10),D=parseInt(O[2]||0,10);if(M<1||M==1&&_<4||M==1&&_==4&&D<3)L=!0}if(L){g.jQuery&&(r=[g.jQuery,g.$]);C=new l("script",f);C.setAttribute("type","text/javascript");C.setAttribute("src",T+"jquery.min.js");y(C,N,g);C.appendTo(S);return!0}f.appendStyleSheet(T+"colorbox.css");C=new l("script",f);C.setAttribute("type","text/javascript");C.setAttribute("src",T+"jquery.colorbox-min.js");y(C,N,g);C.appendTo(S);return!0}if(r.length){i=g.jQuery.noConflict(!0);g.jQuery=r[0];g.$=r[1];r=[]}i||(i=g.jQuery);if(t){var P=a.getNextNumber(),H;switch(t){case 1:if(!E(s))return!1;H=c(o,s,"ckf_gallery_"+P,E,f);i("#ckf_gallery a").colorbox(a.extend({minWidth:"300",minHeight:"200",maxWidth:"95%",maxHeight:"95%",scalePhotos:!0,current:e.lang.Gallery.current},e.config.gallery_config,{group:"ckf_gallery_"+P,onClosed:v(s),onOpen:p(f)},!0)).eq(H).click();break;case 2:E=function(e){return e.isImage()||e.ext=="swf"};if(!E(s))return!1;H=c(o,s,"ckf_gallery_"+P,E,f);g.jQuery("#ckf_gallery a").fancybox(a.extend({},e.config.gallery_config,{onClosed:d,onComplete:p(f),afterClose:v(s),afterShow:p(f)},!0)).eq(H).click();break;case 3:E=function(e){return e.isImage()||e.ext=="swf"||e.ext=="mov"};if(!E(s))return!1;H=c(o,s,"prettyPhoto[ckf_gallery_"+P+"]",E,f);g.jQuery("#ckf_gallery a").prettyPhoto(a.extend({},e.config.gallery_config,{callback:v(s),changepicturecallback:p(f)},!0)).eq(H).click();break;case 4:E=function(e){return e.isImage()||e.ext=="swf"||e.ext=="mov"};if(!E(s))return!1;H=c(o,s,"ckf_gallery_"+P,E,f);g.Shadowbox.qi("#ckf_gallery a",a.extend({},e.config.gallery_config,{gallery:"ckf_gallery_"+P,onClose:v(s),onFinish:p(f)},!0));m(u.eG("a").getItem(H).$);break;case 5:if(!E(s))return!1;H=c(o,s,"lightbox[ckf_gallery_"+P+"]",E,f);m(u.eG("a").getItem(H).$);break;default:return!1}return!0}return!1},bz:b})})();c.gallery_autoLoad=!0;(function(){function t(t){if(!t||t.type!=e.cv||t.getName()!="form")return[];var n=[],r=["style","className"];for(var i=0;i<r.length;i++){var s=r[i],o=t.$.elements.namedItem(s);if(o){var u=new l(o);n.push([u,u.nextSibling]);u.remove()}}return n}function n(t,n){if(!t||t.type!=e.cv||t.getName()!="form")return;if(n.length>0)for(var r=n.length-1;r>=0;r--){var i=n[r][0],s=n[r][1];s?i.insertBefore(s):i.appendTo(t)}}function r(e,r){var i=t(e),s={},o=e.$;if(!r){s["class"]=o.className||"";o.className=""}s.inline=o.style.cssText||"";r||(o.style.cssText="position: static; overflow: visible");n(i);return s}function i(e,r){var i=t(e),s=e.$;"class"in r&&(s.className=r["class"]);"inline"in r&&(s.style.cssText=r.inline);n(i)}var u=null,c=null;h.add("maximize",{bz:function(t){function w(e){var n=p.eR();!e&&d&&(e=[d]);if(e){for(var r=0,i=e.length;r<i;r++)e[r].setStyles({width:n.width+"px",height:n.height+"px"});t.oW("resize")}else t.resize(n.width,n.height)}var n=t.lang.Maximize,h=e.oC,p=h.getWindow(),d=e.document.getWindow().$.frameElement&&new l(e.document.getWindow().$.frameElement),v=[0,0,0,0],m={},y,b;d&&!d.getFrameDocument().bH().hasClass("CKFinderFrameWindow")&&(d=null);t.bD("maximize",{oD:!1,exec:function(){var h=t.document.getWindow().$;if(t.cg.inPopup&&(!o&&!s.opera||h.top.location.href.match(/ckfinder.html/)||h.top.name=="CKFinderpopup")){var h=t.document.getWindow().$.parent;if(this.bu==e.aS){v[2]=h.screenLeft||h.screenX;v[3]=h.screenTop||h.screenY;h.moveTo(0,0);c||(c=[h.screenLeft||h.screenX,h.screenTop||h.screenY]);v[2]-=c[0];v[3]-=c[1];if(!h.outerHeight){v[0]=h.document.body.scrollWidth;v[1]=h.document.body.scrollHeight;if(!u){h.resizeTo(h.screen.availWidth,h.screen.availHeight);u=[h.screen.availWidth-h.document.body.scrollWidth,h.screen.availHeight-h.document.body.scrollHeight]}v[0]+=u[0];v[1]+=u[1]}else{v[0]=h.outerWidth;v[1]=h.outerHeight}if(h.resizeTo)h.resizeTo(h.screen.availWidth,h.screen.availHeight);else{h.outerHeight=h.screen.availHeight;h.outerWidth=h.screen.availWidth}}else{if(h.resizeTo)h.resizeTo(v[0],v[1]);else{h.outerWidth=v[0];h.outerHeight=v[1]}h.moveTo(v[2],v[3])}}else{var S=d||t.container;if(this.bu==e.aS){y=p.hV();var x=S,T;while(x=x.getParent()){T=a.getNextNumber();m[T]=r(x);x.$.og=T;x.is("html","body")&&x.setStyle("overflow","hidden");x.setStyle("z-index",t.config.baseFloatZIndex-1)}T=a.getNextNumber();m[T]=r(S,!0);S.$.og=T;var N=[S],h=S.getDocument().getWindow().$;while(h.frameElement){N.push(l.eB(h.frameElement));h=h.parent}b=function(){w(N)};p.on("resize",b);var L=new f(h.document),O={overflow:s.webkit?"":"hidden",width:0,height:0};L.gT().setStyles(O);!s.gecko&&L.gT().setStyle("position","fixed");L.bH().setStyles(O);o?setTimeout(function(){p.$.scrollTo(0,0)},0):p.$.scrollTo(0,0);var M;for(var _=0,P=N.length;_<P;_++){M=N[_];M.setStyle("position","absolute");M.$.offsetLeft;M.setStyles({"z-index":t.config.baseFloatZIndex-1,left:"0px",top:"0px"})}N[0].addClass("cke_maximized");w(N);var H=N[0].ir();N[0].setStyles({left:-1*H.x+"px",top:-1*H.y+"px"})}else{p.removeListener("resize",b);var x=S;while(x){i(x,m[x.$.og]);x.$.og=null;x=x.getParent()}m={};o?setTimeout(function(){p.$.scrollTo(y.x,y.y)},0):p.$.scrollTo(y.x,y.y);S.removeClass("cke_maximized");if(s.webkit){S.setStyle("display","inline");setTimeout(function(){S.setStyle("display","block")},0)}t.oW("resize")}}this.rJ();var F=this.pW[0];if(F){var I=this.bu==e.aS?n.maximize:n.minimize,q=t.document.getById(F._.id);q.getChild(1).setHtml(I);q.setAttribute("title",I);q.setAttribute("href",'javascript:void("'+I+'");')}}});t.bY.qW("Maximize",{label:n.maximize,command:"maximize"})}})})();(function(){function t(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].name&&t[n].name===e)return!0;return!1}var e={};CKFinder.addPlugin("zip",{uiReady:function(n){var r=n.lang.Zip;CKFinder.dialog.add("compressToFileName",function(e){var t=e.getSelectedFolder();return{title:e.lang.DestinationFile,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:e.lang.FileRename},{type:"hbox",widths:["90%","10%"],padding:0,children:[{type:"text",label:"",id:"fileName","default":t.name,validate:function(){if(!this.getValue()){e.openMsgDialog("",e.lang.ErrorMsg.pg);return!1}}},{type:"html",html:".zip",id:"fileNameExt",onLoad:function(){this.getElement().getParent().setStyles({"vertical-align":"bottom","padding-bottom":"2px"})}}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});CKFinder.dialog.add("unzipDirExists",function(t){var n=t.getSelectedFolder(),i=[[t.lang.ManuallyRename,"manuallyrename"]];n.acl.fileDelete&&n.acl.fileRename&&n.acl.folderRename&&n.acl.folderDelete&&i.push([r.removeAndExtract,"overwrite"],[r.extractAndOverwrite,"merge"]);return{title:t.lang.ErrorMsg.FolderNameExists,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{label:t.lang.common.makeDecision,type:"radio",id:"option","default":"manuallyrename",items:i}]}]}],onOk:function(){var n=this,r=n.getValueOf("tab1","option");r=="manuallyrename"&&(r=null);e.extractTo(t.getSelectedFile(),r);return!0},onCancel:function(){e.ma(n);return!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});CKFinder.dialog.add("unzipFileExists",function(t){var n=t.getSelectedFolder();return{title:t.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:"tab1",label:"",title:"",style:CKFinder.env.ie7Compat?"height:auto":"",expand:!0,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",widths:["70%","30%"],html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{type:"radio",id:"option",label:t.lang.common.makeDecision,"default":"autorename",items:[[t.lang.FileAutorename,"autorename"],[t.lang.FileOverwrite,"overwrite"],[t.lang.common.skip,"skip"]]}]},{type:"hbox",className:"cke_dialog_remember_decision",children:[{type:"checkbox",id:"remember",label:t.lang.common.rememberDecision}]}]}],onCancel:function(){e.ma(n);return!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});CKFinder.dialog.add("compressFileExists",function(t){var n=t.getSelectedFolder(),r=[[t.lang.ManuallyRename,"manuallyrename"]];n.acl.fileDelete&&n.acl.fileRename&&r.push([t.lang.FileAutorename,"autorename"],[t.lang.FileOverwrite,"overwrite"]);return{title:t.lang.FileExistsDlgTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{label:t.lang.common.makeDecision,type:"radio",id:"option","default":"manuallyrename",items:r}]}]}],onOk:function(){var n=this,r=n.getValueOf("tab1","option");r=="manuallyrename"&&(r=null);e.nX(t.getSelectedFolder(),e.pp.download,r);return!0},onCancel:function(){e.ma(n);return!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});n.connector.app.dZ("zip",112);e={rQ:{iz:/[\\\/:\*\?"<>\|]/},iG:{extractHere:{label:r.extractHereLabel,command:"ExtractHere",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},extractTo:{label:r.extractToLabel,command:"ExtractTo",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},downloadZip:{label:r.downloadZipLabel,command:"DownloadZip",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},compressZip:{label:r.compressZipLabel,command:"CompressZip",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"}},ma:function(e){e.getChildren(function(t){e.close();e.showFiles();e.open()},!0)},oc:function(t){return!t||!t.length?n.lang.ErrorMsg.FolderEmpty:e.rQ.iz.test(t)?n.lang.ErrorMsg.FolderInvChar:!1},nI:function(r){if(!e.filesList[e.currentItem])
{e.extractHere(n.getSelectedFile(),!0);return}var i=[{name:"skip"},{name:"ok"}];if(e.filesList[e.currentItem].options&&t(e.filesList[e.currentItem].options,i)){e.currentItem++;n.openDialog("unzipFileExists",e.nI);return}r.show();var s=n.lang.ErrorMsg[e.filesList[e.currentItem].type=="Folder"?"FolderExists":"FileExists"];s="<strong>"+s.replace("%s",e.filesList[e.currentItem].name)+"</strong>";r.getContentElement("tab1","msg").getElement().setHtml(s);r.on("ok",function(t){t.removeListener();var i=r.getValueOf("tab1","remember"),s=r.getValueOf("tab1","option");if(i){for(var o=0,u=e.filesList.length;o<u;o++)e.filesList[o].options||(e.filesList[o].options=s);e.extractHere(n.getSelectedFile(),!0);return}e.filesList[e.currentItem].options=s;e.currentItem++;while(e.currentItem<e.filesList.length){if(!e.filesList[e.currentItem].options||e.filesList[e.currentItem].options&&e.filesList[e.currentItem].options!="skip")break;e.currentItem++}if(e.currentItem<e.filesList.length){setTimeout(function(){n.openDialog("unzipFileExists",e.nI)},0);return}e.extractHere(n.getSelectedFile(),!0);return})},extract:function(t){var i={},s=t.file;t.extra&&(i=t.extra);i.fileName=t.file.name;n.connector.sendCommandPost(t.action,null,i,function(t){e.filesList=[];if(t.getErrorNumber()==303){e.currentItem=0;var i=t.selectNodes("Connector/Errors/Error"),s=t.selectNodes("Connector/UnzippedFiles/File"),o=0,u;for(var a=0,f=i.length;a<f;a++){u="skip";if(i[a].getAttribute("code")==115){o=1;u=null}e.filesList[a]={name:i[a].getAttribute("name"),options:u,type:i[a].getAttribute("type"),code:i[a].getAttribute("code")}}for(var l=0,f=s.length;l<f;l++,a++)e.filesList[a]={name:s[l].getAttribute("name"),options:s[l].getAttribute("action"),type:"File",code:0};if(o){n.openDialog("unzipFileExists",e.nI);return}}else if(t.checkError())return;var c=t.selectNodes("Connector/FolderExists/Folder");if(c&&c.length){n.openDialog("unzipDirExists",function(e){e.show();var t=n.lang.FolderNameExists;t="<strong>"+t.replace("%s",c[0].getAttribute("name"))+"</strong>";e.getContentElement("tab1","msg").getElement().setHtml(t)});return}var s=t.selectNodes("Connector/UnzippedFiles/File");if(s&&s.length){var h=[];for(var a=0,p=s.length;a<p;a++)s[a].getAttribute("action")=="skip"&&h.push(s[a].getAttribute("name"));if(e.filesList)for(var a=0,p=e.filesList.length;a<p;a++)h.push(e.filesList[a].name);if(h.length){n.openSkippedFilesDialog(null,h,r.extractSuccess);e.ma(n.getSelectedFolder());return!0}}n.openMsgDialog("OK",r.extractSuccess);e.ma(n.getSelectedFolder());return!0},s.folder.type,s.folder)},extractHere:function(t,i){if(i){var s=!1;for(var o=0,u=e.filesList.length;o<u;o++)if(e.filesList[o].code==115&&e.filesList[o].options!="skip"){s=!0;i={};for(var o=0,u=e.filesList.length;o<u;o++){i["files["+o+"][name]"]=e.filesList[o].name;i["files["+o+"][options]"]=e.filesList[o].options}break}if(!s){var a=[];for(var o=0,u=e.filesList.length;o<u;o++)a.push(e.filesList[o].name);n.openSkippedFilesDialog(null,a,r.extractSuccess,function(){e.ma(n.getSelectedFolder());return!0});return}}i=i||{};e.extract({action:"ExtractHere",file:t,extra:i})},extractTo:function(r,i){if(i){e.extract({action:"ExtractTo",file:r,extra:{extractDir:e.extractDir||"/",force:i}});return}n.openInputDialog(n.lang.DestinationFolder,n.lang.FolderRename,"",function(s){var o=n.getSelectedFolder(),s=CKFinder.tools.trim(s),u=e.oc(s);if(u){n.openConfirmDialog("",u,function(t){e.extractTo(r,i)});return!1}e.extractDir=s;if(!o.hasChildren){o.createNewFolder(s);e.extract({action:"ExtractTo",file:r,extra:{extractDir:s}})}else o.getChildren(function(i){if(!!t(s,i)){n.openDialog("unzipDirExists",function(e){e.show();var t=n.lang.ErrorMsg.FolderExists;t="<strong>"+t.replace("%s",s)+"</strong>";e.getContentElement("tab1","msg").getElement().setHtml(t)});return}e.extract({action:"ExtractTo",file:r,extra:{extractDir:s}})},!0)})},downloadZip:function(e,t,r){var i=n.connector.composeUrl("DownloadZip",{FileName:e,ZipName:t},r.type,r);n.connector.app.aG["filesview.filesview"].tools.downloadFile(new CKFinder.dom.document(n.document),i)},oH:function(t,r){n.connector.sendCommandPost("CreateZip",null,r,function(n){if(n.checkError())return;if(r.download){var i=n.selectSingleNode("Connector/ZipFile");if(i){var i=i.getAttribute("name");return e.downloadZip(i,r.zipName,t)}}e.ma(t)},t.type,t)},nX:function(r,i,s,o){var u={zipName:r.name+".zip",download:i};if(o)for(var a=0,f=o.length;a<f;a++){u["files["+a+"][name]"]=o[a].name;u["files["+a+"][type]"]=o[a].folder.type;u["files["+a+"][folder]"]=o[a].folder.getPath()}if(s){u=e.pp;u.fileExistsAction=s;return e.oH(r,u)}if(r.isBasket||i){if(r.isBasket&&typeof o=="undefined"){u.zipName="basket.zip";for(var a=0,f=n.basketFiles.length;a<f;a++){u["files["+a+"][name]"]=n.basketFiles[a].name;u["files["+a+"][type]"]=n.basketFiles[a].folder.type;u["files["+a+"][folder]"]=n.basketFiles[a].folder.getPath()}}if(r.isBasket){r=n.folders[1];u.basket=!0}return e.oH(r,u)}n.openDialog("compressToFileName",function(s){s.show();s.getContentElement("tab1","fileName").getElement().setValue(r.name);s.on("ok",function(o){o.removeListener();var a=s.getValueOf("tab1","fileName");a=CKFinder.tools.trim(a)+".zip";var f=e.oc(a);if(f){n.openConfirmDialog("",f,function(t){e.nX(r,i)});return!1}u.zipName=a;r.getFiles(function(i){if(t(a,i)){e.pp=u;n.openDialog("compressFileExists",function(e){e.show();var t=n.lang.ErrorMsg.FileExists;t="<strong>"+t.replace("%s",a)+"</strong>";e.getContentElement("tab1","msg").getElement().setHtml(t)});return!1}e.oH(r,u)},!0)})})}};n.addFileContextMenuOption(e.iG.extractHere,function(t,n){e.extractHere(n)},function(e){var t=n.getSelectedFolder();if(t.isBasket)return!1;var r=n.getSelectedFiles();return e.ext.toLowerCase()!=="zip"||n.config.selectMultiple&&r.length>1?!1:e.folder.acl.fileUpload&&e.folder.acl.folderCreate?!0:-1});n.addFileContextMenuOption(e.iG.extractTo,function(t,n){e.extractTo(n)},function(e){var t=n.getSelectedFolder();if(t.isBasket)return!1;var r=n.getSelectedFiles();return e.ext.toLowerCase()!=="zip"||n.config.selectMultiple&&r.length>1?!1:e.folder.acl.fileUpload&&e.folder.acl.folderCreate?!0:-1});n.addFileContextMenuOption(e.iG.compressZip,function(t,n){var r=t.getSelectedFiles(),i=t.getSelectedFolder();e.nX(i,!1,!1,r)},function(e){var t=n.getSelectedFolder();if(t.isBasket)return!1;var r=n.getSelectedFiles();return!n.config.selectMultiple||r.length<2?!1:e.folder.acl.fileUpload&&e.folder.acl.folderCreate&&t.getResourceType().isExtensionAllowed("zip")?!0:-1});n.addFileContextMenuOption(e.iG.downloadZip,function(t,n){var r=t.getSelectedFiles(),i=t.getSelectedFolder();e.nX(i,!0,!1,r)},function(e){var t=n.getSelectedFiles();return!n.config.selectMultiple||t.length<2?!1:e.folder.acl.fileUpload?!0:-1});n.addFolderContextMenuOption(e.iG.compressZip,function(t,n){e.nX(n,!1)},function(e){return e.isBasket?!1:e.acl.fileUpload&&e.getResourceType().isExtensionAllowed("zip")&&(n.files.length||e.hasChildren)?!0:-1});n.addFolderContextMenuOption(e.iG.downloadZip,function(t,n){e.nX(n,!0)},function(e){return e.isBasket?e.app.basketFiles.length?!0:-1:e.acl.fileUpload&&(n.files.length||e.hasChildren)?!0:-1});n.connector.app.aG["filesview.filesview"].on("beforeContextMenu",function(e){n.getSelectedFiles().length>1&&delete e.data.bj.downloadFile})},basketToolbar:[["DownloadZip",{label:"downloadZipLabel",icon:CKFinder.getPluginPath("zip")+"images/zip.gif",onClick:function(t){var n=t.getSelectedFolder();n.app.basketFiles.length&&e.nX(n,!0)},disableEmpty:!0}]]})})();e.skins.add("kama",function(){var t=["images/loaders/16x16.gif","images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"];o&&s.version<7&&t.push("images/sprites_ie6.png");return{ls:t,application:{css:["app.css"]},host:{qx:1,css:["host.css"]},mA:7,kN:7,ps:1,bz:function(t){function u(e){var t=e.getHead().append("style");t.setAttribute("id","cke_ui_color");t.setAttribute("type","text/css");return t}function f(e,t,n){var r,i,u;for(var a=0;a<e.length;a++)if(s.webkit){for(i=0;i<e[a].$.sheet.rules.length;i++)e[a].$.sheet.removeRule(i);for(i=0;i<t.length;i++){u=t[i][1];for(r=0;r<n.length;r++)u=u.replace(n[r][0],n[r][1]);e[a].$.sheet.addRule(t[i][0],u)}}else{u=t;for(r=0;r<n.length;r++)u=u.replace(n[r][0],n[r][1]);o?e[a].$.styleSheet.cssText=u:e[a].setHtml(u)}}t.config.width&&!isNaN(t.config.width)&&(t.config.width-=12);var n=[],r="/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{	background-color: $color !important;	border-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{	background-color: $color !important;	border-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{	background-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{	background-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{	background-color: $color !important;	border-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{	background-color: $color !important;	border-color: $color !important;}.cke_skin_kama .cke_menuseparator{	background-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{	background-color: $color !important;}";if(s.webkit){r=r.split("}").slice(0,-1);for(var i=0;i<r.length;i++)r[i]=r[i].split("{")}var l=/\$color/g;a.extend(t,{uiColor:null,rk:function(){return this.uiColor},setUiColor:function(i){var o,a,c=u(e.oC),h=u(this.document),p=".cke_"+t.name.replace(".","\\."),d=[p+" .cke_wrapper",p+"_dialog .cke_dialog_contents",p+"_dialog a.cke_dialog_tab",p+"_dialog .cke_dialog_footer"].join(","),m="background-color: $color !important;";if(s.webkit){o=[[d,m]];a=[["body,"+d,m]]}else{o=d+"{"+m+"}";a="body,"+d+"{"+m+"}"}return(this.setUiColor=function(e){var i=[[l,e]];t.uiColor=e;f([c],o,i);f([h],a,i);f(n,r,i)})(i)}});t.on("menuShow",function(e){var i=e.data[0],s=i.element.eG("iframe").getItem(0).getFrameDocument();if(!s.getById("cke_ui_color")){var o=u(s);n.push(o);var a=t.rk();a&&f([o],r,[[l,a]])}});t.config.uiColor&&t.on("uiReady",function(){t.setUiColor(t.config.uiColor)})}}}());(function(){function t(){e.dialog.on("resize",function(e){var t=e.data,n=t.width,r=t.height,i=t.dialog,s=i.bO.contents;if(t.skin!="kama")return;s.setStyles({width:n+"px",height:r+"px"});setTimeout(function(){var e=i.bO.dialog.getChild([0,0,0]),t=e.getChild(0),n=e.getChild(2);n.setStyle("width",t.$.offsetWidth+"px");n=e.getChild(7);n.setStyle("width",t.$.offsetWidth-28+"px");n=e.getChild(4);n.setStyle("height",t.$.offsetHeight-31-14+"px");n=e.getChild(5);n.setStyle("height",t.$.offsetHeight-31-14+"px")},100)})}e.dialog?t():e.on("dialogPluginReady",t)})();e.skins.add("v1",function(){var e=["images/loaders/16x16.gif","images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"];o&&s.version<7&&e.push("images/sprites_ie6.png");return{ls:e,application:{css:["app.css"]},ps:1,rv:-8,kN:0,host:{qx:1,css:["host.css"]}}}());(function(){function t(){e.dialog.on("resize",function(e){var t=e.data,n=t.width,r=t.height,i=t.dialog,s=i.bO.contents;if(t.skin!="v1")return;s.setStyles({width:n+"px",height:r+"px"});setTimeout(function(){var e=i.bO.dialog.getChild([0,0,0]),t=e.getChild(0),n=e.getChild(2);n.setStyle("width",t.$.offsetWidth+"px");n=e.getChild(7);n.setStyle("width",t.$.offsetWidth-28+"px");n=e.getChild(4);n.setStyle("height",t.$.offsetHeight-31-14+"px");n=e.getChild(5);n.setStyle("height",t.$.offsetHeight-31-14+"px")},100)})}e.dialog?t():e.on("dialogPluginReady",t)})();e.gc.add("default",function(){return{dQ:function(t){function m(){s.ie6Compat&&(t.layout.oG=t.document.getWindow().eR())}var n=t.name,r=t.element,i=t.ff;if(!r||i==e.kZ)return;t.layout=new e.application.layout(t);var u=t.oW("themeSpace",{space:"head",html:""}),f=t.oW("themeSpace",{space:"sidebar",html:""}),l=t.oW("themeSpace",{space:"mainTop",html:""}),c=t.oW("themeSpace",{space:"mainMiddle",html:""}),h=t.oW("themeSpace",{space:"mainBottom",html:""}),p=t.config.skin.indexOf(","),d=(p==-1?t.config.skin:t.config.skin.substr(0,p))||"kama",v='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="'+t.lang.LangCode+'" dir="'+t.lang.dir+'">'+"<head>"+'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />'+u.html+"</head>"+"<body>"+(s.ie6Compat?'<div id="ckfinder" role="application">':'<div id="ckfinder" role="application" style="visibility: hidden">')+"<!-- 1. CKE Skin class. -->"+'<div class="fake_wrapper cke_skin_'+d+'">'+"<!-- 2. High contrast class. -->"+'<div class="fake_wrapper"><!-- Applicable: hc cke_hc -->'+"<!-- 3. Browser class. -->"+'<div class="fake_wrapper '+s.cssClass+'">'+"<!-- 4. RTL class. -->"+'<div class="fake_wrapper cke_'+(t.lang.dir=="ltr"||o&&s.version<8?"ltr":"rtl")+'"><!-- Applicable: rtl cke_rtl -->'+"<!-- 5. Layout class. -->"+'<div class="fake_wrapper">'+'<div id="ckfinder_view" class="columns_2"><!-- Applicable: columns_1 columns_2 -->'+'<div id="sidebar_container" class="container" role="region"'+(t.config.sidebarWidth?' style="width: '+a.cssLength(t.config.sidebarWidth)+'"':"")+">"+'<div id="sidebar_wrapper" class="wrapper">'+f.html+"</div>"+"</div>"+'<div id="main_container" class="container" role="region">'+l.html+c.html+h.html+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"</body>"+"</html>";e.log("[THEME] DOM flush using document.write");t.document.$.write(v);t.cr("themeLoaded");t.cr("uiReady",function(){m();t.cr("appReady",function(){function u(){o=o||t.document.getHead().eG("link").getItem(0);var e=0;if(o)try{o.$.sheet&&o.$.sheet.cssRules.length>0?e=1:o.$.styleSheet&&o.$.styleSheet.cssText.length>0?e=1:o.$.innerHTML&&o.$.innerHTML.length>0&&(e=1)}catch(n){}if(!e){window.setTimeout(u,250);return}if(s.ie6Compat){m();t.layout.ea();setTimeout(function(){t.layout.ea()},500)}else{t.layout.ea(!0);setTimeout(function(){t.document.getById("ckfinder").removeStyle("visibility")})}return undefined}m();if(s.ie8){var e=t.document.$,n;if(e.documentMode)n=e.documentMode;else{n=5;e.compatMode&&e.compatMode=="CSS1Compat"&&(n=7)}if(n<8){var r='<strong style="color: red;">Forced IE compatibility mode! CKFinder may not look as intended.</strong>',i=t.plugins.tools;i.showTool(i.addTool(r))}}s.ie6Compat&&t.document.getWindow().on("resize",m);t.document.getWindow().on("resize",function(){t.layout.ea.call(t.layout)});var o;u()})})},pu:function(t){var n=a.getNextNumber(),r=l.kE(['<div class="cke_compatibility cke_'+t.name.replace(".","\\.")+"_dialog cke_skin_",t.gd,'" dir="',t.lang.dir,'" lang="',t.langCode,'"><table class="cke_dialog'," "+s.cssClass.replace(/browser/g,"cke_browser")," cke_",t.lang.dir,'" style="position:absolute"><tr><td><div class="%body"><div id="%title#" class="%title"></div><div id="%close_button#" class="%close_button"><span>X</span></div><div id="%tabs#" class="%tabs"></div><table class="%contents"><tr><td id="%contents#" class="%contents"></td></tr></table><div id="%footer#" class="%footer"></div></div><div id="%tl#" class="%tl"></div><div id="%tc#" class="%tc"></div><div id="%tr#" class="%tr"></div><div id="%ml#" class="%ml"></div><div id="%mr#" class="%mr"></div><div id="%bl#" class="%bl"></div><div id="%bc#" class="%bc"></div><div id="%br#" class="%br"></div></td></tr></table>',o?"":"<style>.cke_dialog{visibility:hidden;}</style>","</div>"].join("").replace(/#/g,"_"+n).replace(/%/g,"cke_dialog_"),e.document),i=r.getChild([0,0,0,0,0]),u=i.getChild(0),f=i.getChild(1);u.unselectable();f.unselectable();return{element:r,bO:{dialog:r.getChild(0),title:u,close:f,tabs:i.getChild(2),contents:i.getChild([3,0,0,0]),footer:i.getChild(4)}}},destroy:function(t){var n=t.container,r=t.ia;n&&n.remove();for(var i=0;r&&i<r.length;i++)r[i].remove();if(t.element){t.ff==e.fc&&t.element.remove();delete t.element}}}}());e.application.prototype.vU=function(t){var n=""+t,r=this._[n]||(this._[n]=e.document.getById(n+"_"+this.name));return r};e.application.prototype.nJ=function(e){var t=/^\d+$/;t.test(e)&&(e+="px");var n=this.layout.dV();n.setStyle("width",e);this.oW("resize");this.layout.ea()};e.application.prototype.resize=function(e,t){this.element.getChild(0).setStyle("height",t+"px");this.element.getChild(0).setStyle("width",e+"px")};(function(){function u(e,t){var n=0,r=0;for(var i=0;i<e.$.parentNode.childNodes.length;i++){var u=e.$.parentNode.childNodes[i];if(u.nodeType==1){var a=u==e.$;if(!u.offsetHeight&&!a)continue;r++;a||(n+=u.offsetHeight)}}var f=e.$.offsetHeight-e.$.clientHeight,l=(r-1)*t;s.ie6Compat&&!s.ie8&&!s.ie7Compat&&(l+=t*2);var c=o?e.$.parentNode.parentNode.parentNode.offsetHeight:e.$.parentNode.offsetHeight,h=c-f-n-(l||0);try{e.setStyle("height",h+"px")}catch(p){}}function f(t){return e.bs.substr(t*9%32,1)}var t="<div class='view tool_panel' style='padding:2px;display:block !important;position:static !important;color:black !important;background-color:white !important;'>",n="</div>",r=t+"This is the DEMO version of CKFinder. Please visit the <a href='http://cksource.com/ckfinder' target='_blank'>CKFinder web site</a> to obtain a valid license."+n,i=t+"CKFinder Developer License<br/>Licensed to: ";e.application.layout=function(e){this.app=r.length?e:null;this.jB=null};e.application.layout.prototype={ea:function(t){if(this.jB)return;this.jB=a.setTimeout(function(){e.log("[THEME] Repainting layout");var n=e.bs.indexOf(e.bF.substr(1,1))%5,l=[e.bF.substr(8,1),e.bF.substr(6,1)],c=e.bF&&e.bF.substr(3,1)!=e.bs.substr((e.bs.indexOf(e.bF.substr(0,1))+e.bs.indexOf(e.bF.substr(2,1)))*9%(e.bs.length-1),1),h=!!e.ed&&l[1]!=f(e.ed.length+e.bs.indexOf(l[0]));if(e.bF&&1==n&&e.lS(window.top[e.nd+"cation"][e.jG+"st"])!=e.lS(e.ed)||n==4||c){var p=this.dV().getChild(0).getChildren(),d=0;for(var m=0;m<p.count();m++)p.getItem(m).rd("position")=="static"&&(d=1);d||this.dV().getChild(0).appendHtml(c||h||n!=4?r:i+"<b>"+a.htmlEncode(e.ed)+"</b></div>")}var y=this.pn(),b=this.pS(),w=e.skins.loaded[this.app.gd];if(w.ps&&o&&s.ie6Compat&&!s.ie8){var E=this.mB(),S=this.dV(),x=3*w.kN,T=w.rv?w.rv:0,N=this.oG.width-S.$.offsetWidth-x+T;E.setStyle("width",N+"px")}y&&u(y,w.mA);b&&u(b,w.kN);this.jB=null;t=!1;this.app.oW("afterRepaintLayout");s.ie6Compat&&a.setTimeout(function(){this.app.element.$.style.cssText+=""},0,this)},t===!0?0:500,this)},dV:function(){var e=this;e.kS||(e.kS=e.app.document.getById("sidebar_container"));return e.kS},mB:function(){var e=this;e.lb||(e.lb=e.app.document.getById("main_container"));return e.lb},pS:function(){var e=this;typeof e.kK=="undefined"&&(e.kK=e.app.document.getById("folders_view"));return e.kK},pn:function(){var e=this;typeof e.kD=="undefined"&&(e.kD=e.app.document.getById("files_view"));return e.kD}}})()})();