/* Simple parser for CSS */var CSSParser=Editor.Parser=function(){function t(e,t,n){return function(r){return!e||/^\}/.test(r)?n:t?n+indentUnit*2:n+indentUnit}}function n(n,r){r=r||0;var i=e(n),s=!1,o=!1,u=!1,a={next:function(){var e=i.next(),n=e.style,a=e.content;n=="css-hash"&&(n=e.style=o?"css-colorcode":"css-identifier");n=="css-identifier"&&(o?e.style="css-value":!s&&!u&&(e.style="css-selector"));a=="\n"&&(e.indentation=t(s,o,r));a=="{"&&u=="@media"?u=!1:a=="{"?s=!0:a=="}"?s=o=u=!1:a==";"?o=u=!1:s&&n!="css-comment"&&n!="whitespace"?o=!0:!s&&n=="css-at"&&(u=a);return e},copy:function(){var t=s,n=o,r=i.state;return function(u){i=e(u,r);s=t;o=n;return a}}};return a}var e=function(){function e(e,i){var s=e.next();if(s=="@"){e.nextWhileMatches(/\w/);return"css-at"}if(s=="/"&&e.equals("*")){i(t);return null}if(s=="<"&&e.equals("!")){i(n);return null}if(s=="=")return"css-compare";if(!e.equals("=")||s!="~"&&s!="|"){if(s=='"'||s=="'"){i(r(s));return null}if(s=="#"){e.nextWhileMatches(/\w/);return"css-hash"}if(s=="!"){e.nextWhileMatches(/[ \t]/);e.nextWhileMatches(/\w/);return"css-important"}if(/\d/.test(s)){e.nextWhileMatches(/[\w.%]/);return"css-unit"}if(/[,.+>*\/]/.test(s))return"css-select-op";if(/[;{}:\[\]]/.test(s))return"css-punctuation";e.nextWhileMatches(/[\w\\\-_]/);return"css-identifier"}e.next();return"css-compare"}function t(t,n){var r=!1;while(!t.endOfLine()){var i=t.next();if(r&&i=="/"){n(e);break}r=i=="*"}return"css-comment"}function n(t,n){var r=0;while(!t.endOfLine()){var i=t.next();if(r>=2&&i==">"){n(e);break}r=i=="-"?r+1:0}return"css-comment"}function r(t){return function(n,r){var i=!1;while(!n.endOfLine()){var s=n.next();if(s==t&&!i)break;i=!i&&s=="\\"}i||r(e);return"css-string"}}return function(t,n){return tokenizer(t,n||e)}}();return{make:n,electricChars:"}"}}();