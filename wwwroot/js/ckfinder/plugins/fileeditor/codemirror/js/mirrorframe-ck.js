/* Demonstration of embedding CodeMirror in a bigger application. The
 * interface defined here is a mess of prompts and confirms, and
 * should probably not be used in a real project.
 */function MirrorFrame(e,t){function r(e,t){var r=document.createElement("input");r.type="button";r.value=e;n.home.appendChild(r);r.onclick=function(){n[t].call(n)}}this.home=document.createElement("div");e.appendChild?e.appendChild(this.home):e(this.home);var n=this;r("Search","search");r("Replace","replace");r("Current line","line");r("Jump to line","jump");r("Insert constructor","macro");r("Indent all","reindent");this.mirror=new CodeMirror(this.home,t)}MirrorFrame.prototype={search:function(){var e=prompt("Enter search term:","");if(!e)return;var t=!0;do{var n=this.mirror.getSearchCursor(e,t);t=!1;while(n.findNext()){n.select();if(!confirm("Search again?"))return}}while(confirm("End of document reached. Start over?"))},replace:function(){var e=prompt("Enter search string:",""),t;e&&(t=prompt("What should it be replaced with?",""));if(t==null)return;var n=this.mirror.getSearchCursor(e,!1);while(n.findNext())n.replace(t)},jump:function(){var e=prompt("Jump to line:","");e&&!isNaN(Number(e))&&this.mirror.jumpToLine(Number(e))},line:function(){alert("The cursor is currently at line "+this.mirror.currentLine());this.mirror.focus()},macro:function(){var e=prompt("Name your constructor:","");e&&this.mirror.replaceSelection("function "+e+"() {\n  \n}\n\n"+e+".prototype = {\n  \n};\n")},reindent:function(){this.mirror.reindent()}};